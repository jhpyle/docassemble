---
layout: docs
title: Question blocks
short_title: Question Blocks
---

In the **docassemble** web app, every screen that a user sees is
generated by a [`question`] block, which is a section of [YAML] code
that contains a [`question`] specifier.  (Well, you can also generate
a screen using the [`message()` function], but that is an advanced
topic.)

All blocks in an interview file must either be [initial blocks],
[code blocks], or contain a [`question`] specifier.

# <a name="question"></a>The `question` block

{% include side-by-side.html demo="question" %}

By including the above [YAML] block in your interview file, you are
telling **docassemble** that if it ever needs to know the value of
`swallow_velocity`, it should ask the user the question "What is the
airspeed velocity of an unladen swallow?" and provide the user with an
input box labeled "Velocity" in which the user can type the answer.

Like many things in **docassemble**, the `question` specifier can
contain [Markdown] and [Mako].  For example:

{% include side-by-side.html demo="question-markup" %}

In this example, the word "airspeed" is italicized, using the
[Markdown] syntax for italics.  The type of swallow is given by a
variable (`african_or_european`), the value of which (`"African"`) is
incorporated using [Mako].  (One of the features of [Mako] is that
anything enclosed in `${ ... }` is evaluated as [Python] code.)

# <a name="subquestion"></a>The `subquestion` specifier

The optional `subquestion` adds text underneath the [`question`].  It is
typically used to explain the question in more detail, if such an
explanation is necessary.

{% include side-by-side.html demo="subquestion" %}

# <a name="under"></a>The `under` specifier

The optional `under` specifier adds text underneath the buttons.

{% include side-by-side.html demo="under" %}

# <a name="right"></a>The `right` specifier

The optional `right` specifier adds text on the right-hand side of the
screen, or below the question on small screens.

{% include side-by-side.html demo="right-centered" %}

If your interview has questions that use the `right` specifier, you
might want to set the [`centered`] feature to `False` so that the text
on the right is wider.

{% include side-by-side.html demo="right" %}

# <a name="css class"></a>The `css class` specifier

The optional `css class` specifier can be used to set a [CSS] class
for the `<body>` of the screen of a question.

{% include side-by-side.html demo="css-class" %}

# Using questions to set variables

Here is a brief summary of the types of questions that can be asked.
More detail about how these question types work is provided in the
[next section].

## True or false: `yesno` and `noyes`

A [`yesno`] question will set a variable to `True` or `False` when a Yes
or No button is pressed.  [`noyes`] does the opposite.

{% include side-by-side.html demo="yesno" %}

## <a name="choices"></a><a name="buttons"></a>Multiple choice: `choices` or `buttons`

You can ask a multiple-choice question by providing a list of [`choices`]:

{% include side-by-side.html demo="choices" %}

Or, if you would prefer to use one-click buttons instead of "radio
buttons" in combination with a "Continue" button, use can use
[`buttons`] instead of [`choices`].

{% include side-by-side.html demo="buttons" %}

The variable indicated by [`field`] will be set to the value supplied in
the [`choices`]/[`buttons`] list.

## Acknowledgement button: `continue button field`

If you simply want the user to acknowledge something by clicking
"Continue," provide a [`continue button field`].

The variable indicated by [`continue button field`] will be set to
`True` when the user clicks "Continue."

{% include side-by-side.html demo="continue" %}

## One or more fill-in fields: [`fields`]

You can ask the user to fill in multiple fields using [`fields`].

{% include side-by-side.html demo="text-field" %}

There are many other types of input that you can gather with
[`fields`], including [large text areas], [file uploads], [radio buttons],
and [checkboxes].  There are a variety of ways you can insert text into
the list of fields to help guide the user.  If you know [HTML], you
can insert arbitrary [HTML]({{ site.baseurl }}/docs/fields.html#html), 
[CSS]({{ site.baseurl }}/docs/modifiers.html#css), and 
[JavaScript]({{ site.baseurl }}/docs/modifiers.html#script).  Using the
[`show if`] feature, you can cause fields to appear or disappear
depending on the values of other fields.

## User's signature: `signature`

You can ask the user to write his or her signature using [`signature`]:

{% include side-by-side.html demo="signature" %}

The signature will be stored as an image file in the variable
indicated by [`signature`].

# <a name="ending screens"></a>Ending screens

Sometimes, the purpose of your [`question`] is not to gather
information but to present an end screen to the user.  You can create
such "questions" by marking them as [`mandatory`]:

{% include side-by-side.html demo="terminal-screen" %}

If you have more than one possible ending screen in your interview,
use the [`event`](#event) feature described below.

## <a name="special buttons"></a>Special buttons

Using the [`buttons`](#buttons) or [`choices`](#choices) syntax
described above, you can add special buttons to a screen.  These
buttons are special because they do not set a variable.

These buttons are particularly useful on "terminal" screens.

{% include side-by-side.html demo="exit-buttons" %}

The above example allows the user to "exit" the interview (i.e., to be
redirected to a different web site) or "restart" the interview (i.e.,
go back to the beginning, with all of the answers forgotten).

There are six special button functions:

* `restart`
* `new_session`
* `exit`
* `logout`
* `exit_logout`
* `leave`
* `continue`
* `refresh`
* `signin`

<a name="restart"></a>`restart` resets the user's variable store,
except that any parameters that were originally passed through as URL
parameters will be used again.  The user is redirected to the first
question of the interview.

<a name="new_session"></a>`new_session` does not disturb the current
interview session, but starts a new session for the same interview.
The original URL parameters are not used.

<a name="exit"></a>`exit` means that the user's variable store will be
erased and the user will be redirected either to the URL given by the
associated `url` text, or if no `url` is defined, to the [`exit url`]
defined in the [`metadata`], or if that does not defined, then to the
[`exitpage`] defined in the [configuration].  If the user tries to
come back to the interview again, he will start the interview again,
as though it had never been started.  Original URL parameters will be
lost.

For example:

{% include side-by-side.html demo="exit-url" %}

[Mako] can be used in the `url` text.

<a name="logout"></a>`logout` logs the user out, if the user is logged in.

<a name="exit_logout"></a>`exit_logout` does the same thing as `exit`,
except that it also logs the user out, if the user is logged in.

<a name="leave"></a>`leave` works like `exit` except that the user's
variable store will be left intact.  This means that if the user comes
back to the interview again, he will pick up where he left off.

<a name="continue"></a>`continue` means that **docassemble** will move
on from the question without really doing anything.  Here is an
example of when it is useful:

{% include side-by-side.html demo="menu-item" %}

This example uses the [actions] feature and the [`menu_items` special
variable] to present a special screen that shows a picture.  This
screen does not set any variable, but the user can click the button to
"continue" with the normal course of the interview.

While using `continue` can be useful sometimes, it is generally not a
good idea to structure interviews around `question`s that use
`continue`.  These `question`s cannot use the [`generic object`
modifier] or [index variables].

<a name="refresh"></a>`refresh` re-runs the [interview logic].  It has
much the same effect as refreshing the page in the browser.  It is
useful in multi-user interviews when the user is waiting for another
user to finish entering information.  It can also be useful in
interviews that use external data sources.

{% include side-by-side.html demo="refresh" %}

<a name="signin"></a>`signin` redirects the user to the
**docassemble** sign-in page.

{% include side-by-side.html demo="signin" %}

Instead of using [`buttons`](#buttons), you can use
[`choices`](#choices) to get a radio list instead of a selection of
buttons.

{% include side-by-side.html demo="exit-choices" %}

The functionality is the same.

The [`command()`] function allows you to do similar things with Python
code.  In addition, the [`url_of()`] function provides URLs that
accomplish a similar purposes.

## <a name="special mixed"></a>Mixing special buttons with buttons that set a variable

Note that since "special" buttons do not set a variable, you should
not include a [`field`] in the [`question`].  If you include a
[`field`] in the [`question`], **docassemble** will assume you are
creating an ordinary [multiple choice question].

If you wish to mix "special" buttons with buttons that set a variable,
you can use the [`command()`] function in [`code`] to trigger the same
effects as clicking on a "special" button.

The following example uses a [`mandatory`]<span></span> [`code`] block
to determine the course of the interview.  Depending on the answer to
an ordinary [multiple choice question], it either exits from the
interview or proceeds to another screen.

{% include side-by-side.html demo="exit-buttons-mixed-code" %}

Another alternative is to use [multiple-choice buttons that run code]:

{% include side-by-side.html demo="exit-buttons-mixed" %}

## <a name="event"></a>Special screens: `event`

Some screens are shown to the user when a special event occurs.

For example, if you have a [multi-user interview] and the interview
reaches a point where the user cannot proceed until the other
interviewee answers a question, the interview will present the user
with a [`question`] that explains why he or she needs to wait.

Or, you might want to provide the user with the ability to review his
or her answers on a single screen, using the [`review`] functionality.

The [`event`] specifier advertises to the interview logic that the
question should be asked if a special event occurs.

{% include side-by-side.html demo="event-example" %}

This specifier can be used to indicate an
[ending screen](#ending screens), where your interview has more than
one possible ending screen and you use [interview logic] to direct the
user to the appropriate screen.

{% include side-by-side.html demo="doors" %}

In this example, `good_luck` and `bad_luck` are actually names of
[Python] variables.  However, they are [Python] variables that will
never be defined.  If a reference to these variables is made, as it is
in the [`mandatory`]<span></span> [`code`] block, **docassemble** will locate the
`good_luck` and `bad_luck` questions, just as it looks for questions
that offer to define any variable.

See [interview logic] for more information about how to
give direction to your interview by adding [`code`] blocks that are
marked with the [`mandatory`] modifier.

The `event` specifier is also used to create screens that the user can
reach from the menu or from hyperlinks embedded in question text.  For
more information, see [`event`], [`url_action()`],
[`process_action()`], [`action_menu_item()`], and [`menu_items`].

# <a name="action buttons"></a>Include additional buttons on the screen

In many [`question`]s, the only button the user can click is
"Continue."  You can set a variable using a [`buttons`] specifier with
a `field`.  You can also use a [`buttons`](#buttons) screen that does
not set a variable.  You can also use [`question back button`] to move
the "Back" button to the buttons area, or [`question help button`] to
move the interview help button to the buttons area.

If you want to include additional button choices on a screen, you can
use `action buttons`.  When the user clicks a button it will run an
[action] in the interview.

{% include side-by-side.html demo="action-buttons" %}

For each button, the required items are `action` and `label`.  You can
optionally include `color` to indicate the Bootstrap color of the
button (`primary`, `secondary`, `success`, `danger`, `warning`,
`info`, `light`, `link`, or `dark`).  The default color is `primary`.
You can also optionally include `icon` to indicate a Font Awesome icon
name to include in the button.  If your `action` requires arguments,
you can indicate the arguments using `arguments`.  You can use [Mako]
templating in any of these elements.

If you want to define the buttons programmatically, you can set
`action buttons` to a dictionary where the only item is `code`.

{% include side-by-side.html demo="action-buttons-code" %}

When you use `code` to define the `action buttons`, you need to
provide a [Python] expression that evaluates to a list of
dictionaries, where each dictionary has the items `action` and `label`
at a minimum.

By default, the buttons indicated by `action buttons` will be placed
after the "Continue" button or any other buttons specified in the
`question`, and before the [`question help button`] (if present).  If
you want a button to appear before the standard buttons of the
`question`, set `placement` to `before`.

{% include side-by-side.html demo="action-buttons-before" %}

If you set the `action` of an button to a web URL (beginning with
`http://`, `https://`, `/`, or `?`) or a [JavaScript] URL (beginning
with `javascript:`), then the button will act like a hyperlink with
the value of the `action` as the `href`.

{% include side-by-side.html demo="action-buttons-http" %}

<a name="forget prior"></a>By default, if the user starts an action
and then starts a second action without finishing the first, then when
the user finishes the second action, the first action will be resumed.
This is sometimes desirable and sometimes not.  If you want the action
launched by your button to be the only active action, set `forget
prior: True` in the action button definition; then all prior actions
will be forgotten.

# <a name="screen parts"></a>Customizing screen parts

When the user looks at a screen in an interview, there are many
different "parts" of the screen.  Above, you were introduced to the
[`question`], [`subquestion`], [`under`], [`right`], and [`css class`]
parts.

There are other parts of the screen as well, which by default are
empty or have a useful default.  The following interview demonstrates
where each part is located.  Try out the interview and look at the
results with different screen sizes.

{% include side-by-side.html demo="metadata-screen-parts" %}

* The `title` is the "long title" that appears in the upper-left on a
  large screen.
* The `short title` appears in the upper-left on a small screen.  If
  not provided, the `title` is used in its place.
* The `subtitle` is not visible on the screen, but can be seen in the
  list of [Available Interviews].
* The `logo`, if set, will replace the `title` and `short title` with
  custom HTML content, such as an image.
* The `pre` area is above the [`question`].
* The `submit` area is above the buttons, if the screen has buttons.
* The `under` area is directly below the buttons.
* The `right` area is to the right, but if the screen is too small, it
  wraps and appears under the `under` area.
* The `post` area is below everything except for image attributions,
  which are below the `post` area.
* The `exit link` is not a visible component, but rather a value that
  is either `exit` or `leave`.  It controls the operation of the exit
  link in the upper right corner, which is present if [`show login`]
  is set to `False`.
* The `exit label` is the visible label of the exit link in the upper
  right corner, which is present if [`show login`] is set to `False`.
* The `help label` is the default label for the "help" tab.  It can be
  overridden by a `label` specifier inside a [`help`] modifier.  If
  you set a [`question help button`], the `help label` will be used
  for the help button, while the label for the help tab will be the
  less conspicuous word "Help."
* The `continue button label` is the label for the "Continue" button.
  If the `question` is a [`review`] question, this is called the
  `resume button label`.
* The `back button label` is the label for the back button that
  appears within the question itself (not the upper-left corner).

There are a variety of ways that you can specify what content should
appear in these areas.  These ways range from question-specific
specifiers to interview-wide defaults to server-wide defaults.  You
should pick whatever method works best for your purposes.

You can customize many of the screen parts as part of a `question`
block.  As explained above, there are specifiers for the [`question`],
[`subquestion`], [`under`], and [`right`] parts.  There are also
modifiers for [`continue button label`], [`resume button label`], and
[`back button label`].  When you set question-specific [`help`], you
can indicate a `label` that will be used as a label for the help tab
or the help button.

There are three methods for specifying interview-wide default values for
parts of the screen:

* Using the [`set_parts()`] function in [Python] code to set default
  values for the screen parts.  You can use [Python] logic and the
  [`get_language()`] function to set different values for different
  languages.  [Mako] templating is not supported and formatting must
  use raw [HTML].
* Using a [`default screen parts`] block to specify dynamic content
  using [Mako] templating and [Markdown] formatting, which is
  re-evaluated every time the screen loads.  Using the [`language`]
  modifier (or a [`default language`] block in a separate [YAML]
  file), you can write different [`default screen parts`] blocks for
  different languages.
* Using a [`metadata`] block to specify static content that is the
  same for all sessions of the interview.  [Mako] templating is not
  supported and formatting must use raw [HTML].  You can specify
  different content to be used for different languages.  An advantage
  of [`metadata`] over [`default screen parts`] is that it is visible
  to the [Available Interviews] list, whereas other methods of setting
  defaults are not.

Finally, there is a server-wide method for specifying default values,
which is to set the [Configuration] directives [`main page pre`],
[`main page post`], etc.  [Mako] templating is not supported and
formatting must use raw [HTML].  These directives allow you to set
different content for different languages.

These different methods override each other in this order.  A
[`metadata`] block will override [Configuration] directives, a
[`default screen parts`] block will override a [`metadata`] block,
[`set_parts()`] will override a [`default screen parts`] block, and
[`question`]-specific specifiers will override a [`default screen
parts`] block.

For more information about each method, see its documentation.

[Configuration]: {{ site.baseurl }}/docs/config.html
[`main page pre`]: {{ site.baseurl }}/docs/config.html#main page pre
[`main page post`]: {{ site.baseurl }}/docs/config.html#main page post
[`get_language()`]: {{ site.baseurl }}/docs/functions.html#get_language
[`default language`]: {{ site.baseurl }}/docs/initial.html#default language
[`language`]: {{ site.baseurl }}/docs/modifiers.html#language
[`set_parts()`]: {{ site.baseurl }}/docs/functions.html#set_parts
[`default screen parts`]: {{ site.baseurl }}/docs/initial.html#default screen parts
[`metadata`]: {{ site.baseurl }}/docs/initial.html#metadata
[`review`]: {{ site.baseurl }}/docs/fields.html#review
[multi-user interview]: {{ site.baseurl }}/docs/roles.html
[role]: {{ site.baseurl }}/docs/roles.html
[Mako]: http://www.makotemplates.org/
[Markdown]: https://daringfireball.net/projects/markdown/
[YAML]: https://en.wikipedia.org/wiki/YAML
[initial blocks]: {{ site.baseurl }}/docs/initial.html
[code blocks]: {{ site.baseurl }}/docs/code.html
[interview logic]: {{ site.baseurl }}/docs/logic.html
[modifier]: {{ site.baseurl }}/docs/modifiers.html
[HTML]: https://en.wikipedia.org/wiki/HTML
[CSS]: https://en.wikipedia.org/wiki/CSS
[JavaScript]: https://en.wikipedia.org/wiki/Javascript
[next section]: {{ site.baseurl }}/docs/fields.html
[`url_action()`]: {{ site.baseurl }}/docs/functions.html#url_action
[`process_action()`]: {{ site.baseurl }}/docs/functions.html#process_action
[`action_menu_item()`]: {{ site.baseurl }}/docs/functions.html#action_menu_item
[`menu_items`]: {{ site.baseurl }}/docs/special.html#menu_items
[`yesno`]: {{ site.baseurl }}/docs/fields.html#yesno
[`noyes`]: {{ site.baseurl }}/docs/fields.html#noyes
[`choices`]: {{ site.baseurl }}/docs/fields.html#field with choices
[`buttons`]: {{ site.baseurl }}/docs/fields.html#field with buttons
[`field`]: {{ site.baseurl }}/docs/fields.html#field with choices
[`continue button field`]: {{ site.baseurl }}/docs/fields.html#field continue
[`signature`]: {{ site.baseurl }}/docs/fields.html#signature
[`event`]: {{ site.baseurl }}/docs/fields.html#event
[Python]: https://en.wikipedia.org/wiki/Python_%28programming_language%29
[`question`]: #question
[`subquestion`]: #subquestion
[`right`]: #right
[`under`]: #under
[`css class`]: #css class
[`fields`]: {{ site.baseurl }}/docs/fields.html#fields
[`mandatory`]: {{ site.baseurl }}/docs/logic.html#mandatory
[`code`]: {{ site.baseurl }}/docs/code.html#code
[configuration]: {{ site.baseurl }}/docs/config.html
[action]: {{ site.baseurl }}/docs/functions.html#actions
[actions]: {{ site.baseurl }}/docs/functions.html#actions
[`command()`]: {{ site.baseurl }}/docs/functions.html#command
[multiple choice question]: #buttons
[multiple-choice buttons that run code]: {{ site.baseurl }}/docs/fields.html#code button
[`centered`]: {{ site.baseurl }}/docs/initial.html#centered
[`url_of()`]: {{ site.baseurl }}/docs/functions.html#url_of
[Available Interviews]: {{ site.baseurl }}/docs/admin.html#available%20interviews
[`show login`]: {{ site.baseurl }}/docs/initial.html#show login
[`help`]: {{ site.baseurl }}/docs/modifiers.html#help
[`continue button label`]: {{ site.baseurl }}/docs/modifiers.html#continue button label
[`back button label`]: {{ site.baseurl }}/docs/modifiers.html#back button label
[`resume button label`]: {{ site.baseurl }}/docs/fields.html#resume button label
[`question help button`]: {{ site.baseurl }}/docs/initial.html#question help button
[`message()` function]: {{ site.baseurl }}/docs/functions.html#message
[`menu_items` special variable]: {{ site.baseurl }}/docs/special.html#menu_items
[`show if`]: {{ site.baseurl }}/docs/fields.html#show if
[large text areas]: {{ site.baseurl }}/docs/fields.html#area
[file uploads]: {{ site.baseurl }}/docs/fields.html#file
[radio buttons]: {{ site.baseurl }}/docs/fields.html#radio
[checkboxes]: {{ site.baseurl }}/docs/fields.html#fields checkboxes
[`generic object` modifier]: {{ site.baseurl }}/docs/fields.html#generic
[index variables]: {{ site.baseurl }}/docs/fields.html#index variables
[`exitpage`]: {{ site.baseurl }}/docs/config.html#exitpage
[`exit url`]: {{ site.baseurl }}/docs/initial.html#exit url
[`question back button`]: {{ site.baseurl }}/docs/initial.html#question back button
[`question help button`]: {{ site.baseurl }}/docs/initial.html#question help button
