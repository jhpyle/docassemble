{"version":3,"sources":["docassemble_webapp/docassemble/webapp/static/app/monitorbundle.js"],"sourcesContent":["/*!\n * Socket.IO v4.8.1\n * (c) 2014-2024 Guillermo Rauch\n * Released under the MIT License.\n */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.io = factory());\n})(this, (function () { 'use strict';\n\n  function _arrayLikeToArray(r, a) {\n    (null == a || a > r.length) && (a = r.length);\n    for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n    return n;\n  }\n  function _arrayWithoutHoles(r) {\n    if (Array.isArray(r)) return _arrayLikeToArray(r);\n  }\n  function _construct(t, e, r) {\n    if (_isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments);\n    var o = [null];\n    o.push.apply(o, e);\n    var p = new (t.bind.apply(t, o))();\n    return r && _setPrototypeOf(p, r.prototype), p;\n  }\n  function _defineProperties(e, r) {\n    for (var t = 0; t < r.length; t++) {\n      var o = r[t];\n      o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o);\n    }\n  }\n  function _createClass(e, r, t) {\n    return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n      writable: !1\n    }), e;\n  }\n  function _createForOfIteratorHelper(r, e) {\n    var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n    if (!t) {\n      if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) {\n        t && (r = t);\n        var n = 0,\n          F = function () {};\n        return {\n          s: F,\n          n: function () {\n            return n >= r.length ? {\n              done: !0\n            } : {\n              done: !1,\n              value: r[n++]\n            };\n          },\n          e: function (r) {\n            throw r;\n          },\n          f: F\n        };\n      }\n      throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n    var o,\n      a = !0,\n      u = !1;\n    return {\n      s: function () {\n        t = t.call(r);\n      },\n      n: function () {\n        var r = t.next();\n        return a = r.done, r;\n      },\n      e: function (r) {\n        u = !0, o = r;\n      },\n      f: function () {\n        try {\n          a || null == t.return || t.return();\n        } finally {\n          if (u) throw o;\n        }\n      }\n    };\n  }\n  function _extends() {\n    return _extends = Object.assign ? Object.assign.bind() : function (n) {\n      for (var e = 1; e < arguments.length; e++) {\n        var t = arguments[e];\n        for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n      }\n      return n;\n    }, _extends.apply(null, arguments);\n  }\n  function _getPrototypeOf(t) {\n    return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n      return t.__proto__ || Object.getPrototypeOf(t);\n    }, _getPrototypeOf(t);\n  }\n  function _inheritsLoose(t, o) {\n    t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o);\n  }\n  function _isNativeFunction(t) {\n    try {\n      return -1 !== Function.toString.call(t).indexOf(\"[native code]\");\n    } catch (n) {\n      return \"function\" == typeof t;\n    }\n  }\n  function _isNativeReflectConstruct() {\n    try {\n      var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    } catch (t) {}\n    return (_isNativeReflectConstruct = function () {\n      return !!t;\n    })();\n  }\n  function _iterableToArray(r) {\n    if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n  }\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  function _setPrototypeOf(t, e) {\n    return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n      return t.__proto__ = e, t;\n    }, _setPrototypeOf(t, e);\n  }\n  function _toConsumableArray(r) {\n    return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread();\n  }\n  function _toPrimitive(t, r) {\n    if (\"object\" != typeof t || !t) return t;\n    var e = t[Symbol.toPrimitive];\n    if (void 0 !== e) {\n      var i = e.call(t, r || \"default\");\n      if (\"object\" != typeof i) return i;\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n    return (\"string\" === r ? String : Number)(t);\n  }\n  function _toPropertyKey(t) {\n    var i = _toPrimitive(t, \"string\");\n    return \"symbol\" == typeof i ? i : i + \"\";\n  }\n  function _typeof(o) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n      return typeof o;\n    } : function (o) {\n      return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, _typeof(o);\n  }\n  function _unsupportedIterableToArray(r, a) {\n    if (r) {\n      if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n      var t = {}.toString.call(r).slice(8, -1);\n      return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n    }\n  }\n  function _wrapNativeSuper(t) {\n    var r = \"function\" == typeof Map ? new Map() : void 0;\n    return _wrapNativeSuper = function (t) {\n      if (null === t || !_isNativeFunction(t)) return t;\n      if (\"function\" != typeof t) throw new TypeError(\"Super expression must either be null or a function\");\n      if (void 0 !== r) {\n        if (r.has(t)) return r.get(t);\n        r.set(t, Wrapper);\n      }\n      function Wrapper() {\n        return _construct(t, arguments, _getPrototypeOf(this).constructor);\n      }\n      return Wrapper.prototype = Object.create(t.prototype, {\n        constructor: {\n          value: Wrapper,\n          enumerable: !1,\n          writable: !0,\n          configurable: !0\n        }\n      }), _setPrototypeOf(Wrapper, t);\n    }, _wrapNativeSuper(t);\n  }\n\n  var PACKET_TYPES = Object.create(null); // no Map = no polyfill\n  PACKET_TYPES[\"open\"] = \"0\";\n  PACKET_TYPES[\"close\"] = \"1\";\n  PACKET_TYPES[\"ping\"] = \"2\";\n  PACKET_TYPES[\"pong\"] = \"3\";\n  PACKET_TYPES[\"message\"] = \"4\";\n  PACKET_TYPES[\"upgrade\"] = \"5\";\n  PACKET_TYPES[\"noop\"] = \"6\";\n  var PACKET_TYPES_REVERSE = Object.create(null);\n  Object.keys(PACKET_TYPES).forEach(function (key) {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n  });\n  var ERROR_PACKET = {\n    type: \"error\",\n    data: \"parser error\"\n  };\n\n  var withNativeBlob$1 = typeof Blob === \"function\" || typeof Blob !== \"undefined\" && Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\";\n  var withNativeArrayBuffer$2 = typeof ArrayBuffer === \"function\";\n  // ArrayBuffer.isView method is not defined in IE10\n  var isView$1 = function isView(obj) {\n    return typeof ArrayBuffer.isView === \"function\" ? ArrayBuffer.isView(obj) : obj && obj.buffer instanceof ArrayBuffer;\n  };\n  var encodePacket = function encodePacket(_ref, supportsBinary, callback) {\n    var type = _ref.type,\n      data = _ref.data;\n    if (withNativeBlob$1 && data instanceof Blob) {\n      if (supportsBinary) {\n        return callback(data);\n      } else {\n        return encodeBlobAsBase64(data, callback);\n      }\n    } else if (withNativeArrayBuffer$2 && (data instanceof ArrayBuffer || isView$1(data))) {\n      if (supportsBinary) {\n        return callback(data);\n      } else {\n        return encodeBlobAsBase64(new Blob([data]), callback);\n      }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n  };\n  var encodeBlobAsBase64 = function encodeBlobAsBase64(data, callback) {\n    var fileReader = new FileReader();\n    fileReader.onload = function () {\n      var content = fileReader.result.split(\",\")[1];\n      callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n  };\n  function toArray(data) {\n    if (data instanceof Uint8Array) {\n      return data;\n    } else if (data instanceof ArrayBuffer) {\n      return new Uint8Array(data);\n    } else {\n      return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n  }\n  var TEXT_ENCODER;\n  function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob$1 && packet.data instanceof Blob) {\n      return packet.data.arrayBuffer().then(toArray).then(callback);\n    } else if (withNativeArrayBuffer$2 && (packet.data instanceof ArrayBuffer || isView$1(packet.data))) {\n      return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, function (encoded) {\n      if (!TEXT_ENCODER) {\n        TEXT_ENCODER = new TextEncoder();\n      }\n      callback(TEXT_ENCODER.encode(encoded));\n    });\n  }\n\n  // imported from https://github.com/socketio/base64-arraybuffer\n  var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n  // Use a lookup table to find the index.\n  var lookup$1 = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup$1[chars.charCodeAt(i)] = i;\n  }\n  var decode$1 = function decode(base64) {\n    var bufferLength = base64.length * 0.75,\n      len = base64.length,\n      i,\n      p = 0,\n      encoded1,\n      encoded2,\n      encoded3,\n      encoded4;\n    if (base64[base64.length - 1] === '=') {\n      bufferLength--;\n      if (base64[base64.length - 2] === '=') {\n        bufferLength--;\n      }\n    }\n    var arraybuffer = new ArrayBuffer(bufferLength),\n      bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n      encoded1 = lookup$1[base64.charCodeAt(i)];\n      encoded2 = lookup$1[base64.charCodeAt(i + 1)];\n      encoded3 = lookup$1[base64.charCodeAt(i + 2)];\n      encoded4 = lookup$1[base64.charCodeAt(i + 3)];\n      bytes[p++] = encoded1 << 2 | encoded2 >> 4;\n      bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n      bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n    }\n    return arraybuffer;\n  };\n\n  var withNativeArrayBuffer$1 = typeof ArrayBuffer === \"function\";\n  var decodePacket = function decodePacket(encodedPacket, binaryType) {\n    if (typeof encodedPacket !== \"string\") {\n      return {\n        type: \"message\",\n        data: mapBinary(encodedPacket, binaryType)\n      };\n    }\n    var type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n      return {\n        type: \"message\",\n        data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n      };\n    }\n    var packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n      return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1 ? {\n      type: PACKET_TYPES_REVERSE[type],\n      data: encodedPacket.substring(1)\n    } : {\n      type: PACKET_TYPES_REVERSE[type]\n    };\n  };\n  var decodeBase64Packet = function decodeBase64Packet(data, binaryType) {\n    if (withNativeArrayBuffer$1) {\n      var decoded = decode$1(data);\n      return mapBinary(decoded, binaryType);\n    } else {\n      return {\n        base64: true,\n        data: data\n      }; // fallback for old browsers\n    }\n  };\n  var mapBinary = function mapBinary(data, binaryType) {\n    switch (binaryType) {\n      case \"blob\":\n        if (data instanceof Blob) {\n          // from WebSocket + binaryType \"blob\"\n          return data;\n        } else {\n          // from HTTP long-polling or WebTransport\n          return new Blob([data]);\n        }\n      case \"arraybuffer\":\n      default:\n        if (data instanceof ArrayBuffer) {\n          // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n          return data;\n        } else {\n          // from WebTransport (Uint8Array)\n          return data.buffer;\n        }\n    }\n  };\n\n  var SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\n  var encodePayload = function encodePayload(packets, callback) {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    var length = packets.length;\n    var encodedPackets = new Array(length);\n    var count = 0;\n    packets.forEach(function (packet, i) {\n      // force base64 encoding for binary packets\n      encodePacket(packet, false, function (encodedPacket) {\n        encodedPackets[i] = encodedPacket;\n        if (++count === length) {\n          callback(encodedPackets.join(SEPARATOR));\n        }\n      });\n    });\n  };\n  var decodePayload = function decodePayload(encodedPayload, binaryType) {\n    var encodedPackets = encodedPayload.split(SEPARATOR);\n    var packets = [];\n    for (var i = 0; i < encodedPackets.length; i++) {\n      var decodedPacket = decodePacket(encodedPackets[i], binaryType);\n      packets.push(decodedPacket);\n      if (decodedPacket.type === \"error\") {\n        break;\n      }\n    }\n    return packets;\n  };\n  function createPacketEncoderStream() {\n    return new TransformStream({\n      transform: function transform(packet, controller) {\n        encodePacketToBinary(packet, function (encodedPacket) {\n          var payloadLength = encodedPacket.length;\n          var header;\n          // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n          if (payloadLength < 126) {\n            header = new Uint8Array(1);\n            new DataView(header.buffer).setUint8(0, payloadLength);\n          } else if (payloadLength < 65536) {\n            header = new Uint8Array(3);\n            var view = new DataView(header.buffer);\n            view.setUint8(0, 126);\n            view.setUint16(1, payloadLength);\n          } else {\n            header = new Uint8Array(9);\n            var _view = new DataView(header.buffer);\n            _view.setUint8(0, 127);\n            _view.setBigUint64(1, BigInt(payloadLength));\n          }\n          // first bit indicates whether the payload is plain text (0) or binary (1)\n          if (packet.data && typeof packet.data !== \"string\") {\n            header[0] |= 0x80;\n          }\n          controller.enqueue(header);\n          controller.enqueue(encodedPacket);\n        });\n      }\n    });\n  }\n  var TEXT_DECODER;\n  function totalLength(chunks) {\n    return chunks.reduce(function (acc, chunk) {\n      return acc + chunk.length;\n    }, 0);\n  }\n  function concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n      return chunks.shift();\n    }\n    var buffer = new Uint8Array(size);\n    var j = 0;\n    for (var i = 0; i < size; i++) {\n      buffer[i] = chunks[0][j++];\n      if (j === chunks[0].length) {\n        chunks.shift();\n        j = 0;\n      }\n    }\n    if (chunks.length && j < chunks[0].length) {\n      chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n  }\n  function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n      TEXT_DECODER = new TextDecoder();\n    }\n    var chunks = [];\n    var state = 0 /* State.READ_HEADER */;\n    var expectedLength = -1;\n    var isBinary = false;\n    return new TransformStream({\n      transform: function transform(chunk, controller) {\n        chunks.push(chunk);\n        while (true) {\n          if (state === 0 /* State.READ_HEADER */) {\n            if (totalLength(chunks) < 1) {\n              break;\n            }\n            var header = concatChunks(chunks, 1);\n            isBinary = (header[0] & 0x80) === 0x80;\n            expectedLength = header[0] & 0x7f;\n            if (expectedLength < 126) {\n              state = 3 /* State.READ_PAYLOAD */;\n            } else if (expectedLength === 126) {\n              state = 1 /* State.READ_EXTENDED_LENGTH_16 */;\n            } else {\n              state = 2 /* State.READ_EXTENDED_LENGTH_64 */;\n            }\n          } else if (state === 1 /* State.READ_EXTENDED_LENGTH_16 */) {\n            if (totalLength(chunks) < 2) {\n              break;\n            }\n            var headerArray = concatChunks(chunks, 2);\n            expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n            state = 3 /* State.READ_PAYLOAD */;\n          } else if (state === 2 /* State.READ_EXTENDED_LENGTH_64 */) {\n            if (totalLength(chunks) < 8) {\n              break;\n            }\n            var _headerArray = concatChunks(chunks, 8);\n            var view = new DataView(_headerArray.buffer, _headerArray.byteOffset, _headerArray.length);\n            var n = view.getUint32(0);\n            if (n > Math.pow(2, 53 - 32) - 1) {\n              // the maximum safe integer in JavaScript is 2^53 - 1\n              controller.enqueue(ERROR_PACKET);\n              break;\n            }\n            expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n            state = 3 /* State.READ_PAYLOAD */;\n          } else {\n            if (totalLength(chunks) < expectedLength) {\n              break;\n            }\n            var data = concatChunks(chunks, expectedLength);\n            controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n            state = 0 /* State.READ_HEADER */;\n          }\n          if (expectedLength === 0 || expectedLength > maxPayload) {\n            controller.enqueue(ERROR_PACKET);\n            break;\n          }\n        }\n      }\n    });\n  }\n  var protocol$1 = 4;\n\n  /**\n   * Initialize a new `Emitter`.\n   *\n   * @api public\n   */\n\n  function Emitter(obj) {\n    if (obj) return mixin(obj);\n  }\n\n  /**\n   * Mixin the emitter properties.\n   *\n   * @param {Object} obj\n   * @return {Object}\n   * @api private\n   */\n\n  function mixin(obj) {\n    for (var key in Emitter.prototype) {\n      obj[key] = Emitter.prototype[key];\n    }\n    return obj;\n  }\n\n  /**\n   * Listen on the given `event` with `fn`.\n   *\n   * @param {String} event\n   * @param {Function} fn\n   * @return {Emitter}\n   * @api public\n   */\n\n  Emitter.prototype.on = Emitter.prototype.addEventListener = function (event, fn) {\n    this._callbacks = this._callbacks || {};\n    (this._callbacks['$' + event] = this._callbacks['$' + event] || []).push(fn);\n    return this;\n  };\n\n  /**\n   * Adds an `event` listener that will be invoked a single\n   * time then automatically removed.\n   *\n   * @param {String} event\n   * @param {Function} fn\n   * @return {Emitter}\n   * @api public\n   */\n\n  Emitter.prototype.once = function (event, fn) {\n    function on() {\n      this.off(event, on);\n      fn.apply(this, arguments);\n    }\n    on.fn = fn;\n    this.on(event, on);\n    return this;\n  };\n\n  /**\n   * Remove the given callback for `event` or all\n   * registered callbacks.\n   *\n   * @param {String} event\n   * @param {Function} fn\n   * @return {Emitter}\n   * @api public\n   */\n\n  Emitter.prototype.off = Emitter.prototype.removeListener = Emitter.prototype.removeAllListeners = Emitter.prototype.removeEventListener = function (event, fn) {\n    this._callbacks = this._callbacks || {};\n\n    // all\n    if (0 == arguments.length) {\n      this._callbacks = {};\n      return this;\n    }\n\n    // specific event\n    var callbacks = this._callbacks['$' + event];\n    if (!callbacks) return this;\n\n    // remove all handlers\n    if (1 == arguments.length) {\n      delete this._callbacks['$' + event];\n      return this;\n    }\n\n    // remove specific handler\n    var cb;\n    for (var i = 0; i < callbacks.length; i++) {\n      cb = callbacks[i];\n      if (cb === fn || cb.fn === fn) {\n        callbacks.splice(i, 1);\n        break;\n      }\n    }\n\n    // Remove event specific arrays for event types that no\n    // one is subscribed for to avoid memory leak.\n    if (callbacks.length === 0) {\n      delete this._callbacks['$' + event];\n    }\n    return this;\n  };\n\n  /**\n   * Emit `event` with the given args.\n   *\n   * @param {String} event\n   * @param {Mixed} ...\n   * @return {Emitter}\n   */\n\n  Emitter.prototype.emit = function (event) {\n    this._callbacks = this._callbacks || {};\n    var args = new Array(arguments.length - 1),\n      callbacks = this._callbacks['$' + event];\n    for (var i = 1; i < arguments.length; i++) {\n      args[i - 1] = arguments[i];\n    }\n    if (callbacks) {\n      callbacks = callbacks.slice(0);\n      for (var i = 0, len = callbacks.length; i < len; ++i) {\n        callbacks[i].apply(this, args);\n      }\n    }\n    return this;\n  };\n\n  // alias used for reserved events (protected method)\n  Emitter.prototype.emitReserved = Emitter.prototype.emit;\n\n  /**\n   * Return array of callbacks for `event`.\n   *\n   * @param {String} event\n   * @return {Array}\n   * @api public\n   */\n\n  Emitter.prototype.listeners = function (event) {\n    this._callbacks = this._callbacks || {};\n    return this._callbacks['$' + event] || [];\n  };\n\n  /**\n   * Check if this emitter has `event` handlers.\n   *\n   * @param {String} event\n   * @return {Boolean}\n   * @api public\n   */\n\n  Emitter.prototype.hasListeners = function (event) {\n    return !!this.listeners(event).length;\n  };\n\n  var nextTick = function () {\n    var isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n      return function (cb) {\n        return Promise.resolve().then(cb);\n      };\n    } else {\n      return function (cb, setTimeoutFn) {\n        return setTimeoutFn(cb, 0);\n      };\n    }\n  }();\n  var globalThisShim = function () {\n    if (typeof self !== \"undefined\") {\n      return self;\n    } else if (typeof window !== \"undefined\") {\n      return window;\n    } else {\n      return Function(\"return this\")();\n    }\n  }();\n  var defaultBinaryType = \"arraybuffer\";\n  function createCookieJar() {}\n\n  function pick(obj) {\n    for (var _len = arguments.length, attr = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      attr[_key - 1] = arguments[_key];\n    }\n    return attr.reduce(function (acc, k) {\n      if (obj.hasOwnProperty(k)) {\n        acc[k] = obj[k];\n      }\n      return acc;\n    }, {});\n  }\n  // Keep a reference to the real timeout functions so they can be used when overridden\n  var NATIVE_SET_TIMEOUT = globalThisShim.setTimeout;\n  var NATIVE_CLEAR_TIMEOUT = globalThisShim.clearTimeout;\n  function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n      obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThisShim);\n      obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThisShim);\n    } else {\n      obj.setTimeoutFn = globalThisShim.setTimeout.bind(globalThisShim);\n      obj.clearTimeoutFn = globalThisShim.clearTimeout.bind(globalThisShim);\n    }\n  }\n  // base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\n  var BASE64_OVERHEAD = 1.33;\n  // we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\n  function byteLength(obj) {\n    if (typeof obj === \"string\") {\n      return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n  }\n  function utf8Length(str) {\n    var c = 0,\n      length = 0;\n    for (var i = 0, l = str.length; i < l; i++) {\n      c = str.charCodeAt(i);\n      if (c < 0x80) {\n        length += 1;\n      } else if (c < 0x800) {\n        length += 2;\n      } else if (c < 0xd800 || c >= 0xe000) {\n        length += 3;\n      } else {\n        i++;\n        length += 4;\n      }\n    }\n    return length;\n  }\n  /**\n   * Generates a random 8-characters string.\n   */\n  function randomString() {\n    return Date.now().toString(36).substring(3) + Math.random().toString(36).substring(2, 5);\n  }\n\n  // imported from https://github.com/galkn/querystring\n  /**\n   * Compiles a querystring\n   * Returns string representation of the object\n   *\n   * @param {Object}\n   * @api private\n   */\n  function encode(obj) {\n    var str = '';\n    for (var i in obj) {\n      if (obj.hasOwnProperty(i)) {\n        if (str.length) str += '&';\n        str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n      }\n    }\n    return str;\n  }\n  /**\n   * Parses a simple querystring into an object\n   *\n   * @param {String} qs\n   * @api private\n   */\n  function decode(qs) {\n    var qry = {};\n    var pairs = qs.split('&');\n    for (var i = 0, l = pairs.length; i < l; i++) {\n      var pair = pairs[i].split('=');\n      qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n  }\n\n  var TransportError = /*#__PURE__*/function (_Error) {\n    function TransportError(reason, description, context) {\n      var _this;\n      _this = _Error.call(this, reason) || this;\n      _this.description = description;\n      _this.context = context;\n      _this.type = \"TransportError\";\n      return _this;\n    }\n    _inheritsLoose(TransportError, _Error);\n    return TransportError;\n  }( /*#__PURE__*/_wrapNativeSuper(Error));\n  var Transport = /*#__PURE__*/function (_Emitter) {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    function Transport(opts) {\n      var _this2;\n      _this2 = _Emitter.call(this) || this;\n      _this2.writable = false;\n      installTimerFunctions(_this2, opts);\n      _this2.opts = opts;\n      _this2.query = opts.query;\n      _this2.socket = opts.socket;\n      _this2.supportsBinary = !opts.forceBase64;\n      return _this2;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    _inheritsLoose(Transport, _Emitter);\n    var _proto = Transport.prototype;\n    _proto.onError = function onError(reason, description, context) {\n      _Emitter.prototype.emitReserved.call(this, \"error\", new TransportError(reason, description, context));\n      return this;\n    }\n    /**\n     * Opens the transport.\n     */;\n    _proto.open = function open() {\n      this.readyState = \"opening\";\n      this.doOpen();\n      return this;\n    }\n    /**\n     * Closes the transport.\n     */;\n    _proto.close = function close() {\n      if (this.readyState === \"opening\" || this.readyState === \"open\") {\n        this.doClose();\n        this.onClose();\n      }\n      return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */;\n    _proto.send = function send(packets) {\n      if (this.readyState === \"open\") {\n        this.write(packets);\n      }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */;\n    _proto.onOpen = function onOpen() {\n      this.readyState = \"open\";\n      this.writable = true;\n      _Emitter.prototype.emitReserved.call(this, \"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */;\n    _proto.onData = function onData(data) {\n      var packet = decodePacket(data, this.socket.binaryType);\n      this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */;\n    _proto.onPacket = function onPacket(packet) {\n      _Emitter.prototype.emitReserved.call(this, \"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */;\n    _proto.onClose = function onClose(details) {\n      this.readyState = \"closed\";\n      _Emitter.prototype.emitReserved.call(this, \"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */;\n    _proto.pause = function pause(onPause) {};\n    _proto.createUri = function createUri(schema) {\n      var query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return schema + \"://\" + this._hostname() + this._port() + this.opts.path + this._query(query);\n    };\n    _proto._hostname = function _hostname() {\n      var hostname = this.opts.hostname;\n      return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    };\n    _proto._port = function _port() {\n      if (this.opts.port && (this.opts.secure && Number(this.opts.port !== 443) || !this.opts.secure && Number(this.opts.port) !== 80)) {\n        return \":\" + this.opts.port;\n      } else {\n        return \"\";\n      }\n    };\n    _proto._query = function _query(query) {\n      var encodedQuery = encode(query);\n      return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    };\n    return Transport;\n  }(Emitter);\n\n  var Polling = /*#__PURE__*/function (_Transport) {\n    function Polling() {\n      var _this;\n      _this = _Transport.apply(this, arguments) || this;\n      _this._polling = false;\n      return _this;\n    }\n    _inheritsLoose(Polling, _Transport);\n    var _proto = Polling.prototype;\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    _proto.doOpen = function doOpen() {\n      this._poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */;\n    _proto.pause = function pause(onPause) {\n      var _this2 = this;\n      this.readyState = \"pausing\";\n      var pause = function pause() {\n        _this2.readyState = \"paused\";\n        onPause();\n      };\n      if (this._polling || !this.writable) {\n        var total = 0;\n        if (this._polling) {\n          total++;\n          this.once(\"pollComplete\", function () {\n            --total || pause();\n          });\n        }\n        if (!this.writable) {\n          total++;\n          this.once(\"drain\", function () {\n            --total || pause();\n          });\n        }\n      } else {\n        pause();\n      }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */;\n    _proto._poll = function _poll() {\n      this._polling = true;\n      this.doPoll();\n      this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */;\n    _proto.onData = function onData(data) {\n      var _this3 = this;\n      var callback = function callback(packet) {\n        // if its the first message we consider the transport open\n        if (\"opening\" === _this3.readyState && packet.type === \"open\") {\n          _this3.onOpen();\n        }\n        // if its a close packet, we close the ongoing requests\n        if (\"close\" === packet.type) {\n          _this3.onClose({\n            description: \"transport closed by the server\"\n          });\n          return false;\n        }\n        // otherwise bypass onData and handle the message\n        _this3.onPacket(packet);\n      };\n      // decode payload\n      decodePayload(data, this.socket.binaryType).forEach(callback);\n      // if an event did not trigger closing\n      if (\"closed\" !== this.readyState) {\n        // if we got data we're not polling\n        this._polling = false;\n        this.emitReserved(\"pollComplete\");\n        if (\"open\" === this.readyState) {\n          this._poll();\n        }\n      }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */;\n    _proto.doClose = function doClose() {\n      var _this4 = this;\n      var close = function close() {\n        _this4.write([{\n          type: \"close\"\n        }]);\n      };\n      if (\"open\" === this.readyState) {\n        close();\n      } else {\n        // in case we're trying to close while\n        // handshaking is in progress (GH-164)\n        this.once(\"open\", close);\n      }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */;\n    _proto.write = function write(packets) {\n      var _this5 = this;\n      this.writable = false;\n      encodePayload(packets, function (data) {\n        _this5.doWrite(data, function () {\n          _this5.writable = true;\n          _this5.emitReserved(\"drain\");\n        });\n      });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */;\n    _proto.uri = function uri() {\n      var schema = this.opts.secure ? \"https\" : \"http\";\n      var query = this.query || {};\n      // cache busting is forced\n      if (false !== this.opts.timestampRequests) {\n        query[this.opts.timestampParam] = randomString();\n      }\n      if (!this.supportsBinary && !query.sid) {\n        query.b64 = 1;\n      }\n      return this.createUri(schema, query);\n    };\n    return _createClass(Polling, [{\n      key: \"name\",\n      get: function get() {\n        return \"polling\";\n      }\n    }]);\n  }(Transport);\n\n  // imported from https://github.com/component/has-cors\n  var value = false;\n  try {\n    value = typeof XMLHttpRequest !== 'undefined' && 'withCredentials' in new XMLHttpRequest();\n  } catch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n  }\n  var hasCORS = value;\n\n  function empty() {}\n  var BaseXHR = /*#__PURE__*/function (_Polling) {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    function BaseXHR(opts) {\n      var _this;\n      _this = _Polling.call(this, opts) || this;\n      if (typeof location !== \"undefined\") {\n        var isSSL = \"https:\" === location.protocol;\n        var port = location.port;\n        // some user agents have empty `location.port`\n        if (!port) {\n          port = isSSL ? \"443\" : \"80\";\n        }\n        _this.xd = typeof location !== \"undefined\" && opts.hostname !== location.hostname || port !== opts.port;\n      }\n      return _this;\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    _inheritsLoose(BaseXHR, _Polling);\n    var _proto = BaseXHR.prototype;\n    _proto.doWrite = function doWrite(data, fn) {\n      var _this2 = this;\n      var req = this.request({\n        method: \"POST\",\n        data: data\n      });\n      req.on(\"success\", fn);\n      req.on(\"error\", function (xhrStatus, context) {\n        _this2.onError(\"xhr post error\", xhrStatus, context);\n      });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */;\n    _proto.doPoll = function doPoll() {\n      var _this3 = this;\n      var req = this.request();\n      req.on(\"data\", this.onData.bind(this));\n      req.on(\"error\", function (xhrStatus, context) {\n        _this3.onError(\"xhr poll error\", xhrStatus, context);\n      });\n      this.pollXhr = req;\n    };\n    return BaseXHR;\n  }(Polling);\n  var Request = /*#__PURE__*/function (_Emitter) {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    function Request(createRequest, uri, opts) {\n      var _this4;\n      _this4 = _Emitter.call(this) || this;\n      _this4.createRequest = createRequest;\n      installTimerFunctions(_this4, opts);\n      _this4._opts = opts;\n      _this4._method = opts.method || \"GET\";\n      _this4._uri = uri;\n      _this4._data = undefined !== opts.data ? opts.data : null;\n      _this4._create();\n      return _this4;\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    _inheritsLoose(Request, _Emitter);\n    var _proto2 = Request.prototype;\n    _proto2._create = function _create() {\n      var _this5 = this;\n      var _a;\n      var opts = pick(this._opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n      opts.xdomain = !!this._opts.xd;\n      var xhr = this._xhr = this.createRequest(opts);\n      try {\n        xhr.open(this._method, this._uri, true);\n        try {\n          if (this._opts.extraHeaders) {\n            // @ts-ignore\n            xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n            for (var i in this._opts.extraHeaders) {\n              if (this._opts.extraHeaders.hasOwnProperty(i)) {\n                xhr.setRequestHeader(i, this._opts.extraHeaders[i]);\n              }\n            }\n          }\n        } catch (e) {}\n        if (\"POST\" === this._method) {\n          try {\n            xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n          } catch (e) {}\n        }\n        try {\n          xhr.setRequestHeader(\"Accept\", \"*/*\");\n        } catch (e) {}\n        (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n        // ie6 check\n        if (\"withCredentials\" in xhr) {\n          xhr.withCredentials = this._opts.withCredentials;\n        }\n        if (this._opts.requestTimeout) {\n          xhr.timeout = this._opts.requestTimeout;\n        }\n        xhr.onreadystatechange = function () {\n          var _a;\n          if (xhr.readyState === 3) {\n            (_a = _this5._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(\n            // @ts-ignore\n            xhr.getResponseHeader(\"set-cookie\"));\n          }\n          if (4 !== xhr.readyState) return;\n          if (200 === xhr.status || 1223 === xhr.status) {\n            _this5._onLoad();\n          } else {\n            // make sure the `error` event handler that's user-set\n            // does not throw in the same tick and gets caught here\n            _this5.setTimeoutFn(function () {\n              _this5._onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n            }, 0);\n          }\n        };\n        xhr.send(this._data);\n      } catch (e) {\n        // Need to defer since .create() is called directly from the constructor\n        // and thus the 'error' event can only be only bound *after* this exception\n        // occurs.  Therefore, also, we cannot throw here at all.\n        this.setTimeoutFn(function () {\n          _this5._onError(e);\n        }, 0);\n        return;\n      }\n      if (typeof document !== \"undefined\") {\n        this._index = Request.requestsCount++;\n        Request.requests[this._index] = this;\n      }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */;\n    _proto2._onError = function _onError(err) {\n      this.emitReserved(\"error\", err, this._xhr);\n      this._cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */;\n    _proto2._cleanup = function _cleanup(fromError) {\n      if (\"undefined\" === typeof this._xhr || null === this._xhr) {\n        return;\n      }\n      this._xhr.onreadystatechange = empty;\n      if (fromError) {\n        try {\n          this._xhr.abort();\n        } catch (e) {}\n      }\n      if (typeof document !== \"undefined\") {\n        delete Request.requests[this._index];\n      }\n      this._xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */;\n    _proto2._onLoad = function _onLoad() {\n      var data = this._xhr.responseText;\n      if (data !== null) {\n        this.emitReserved(\"data\", data);\n        this.emitReserved(\"success\");\n        this._cleanup();\n      }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */;\n    _proto2.abort = function abort() {\n      this._cleanup();\n    };\n    return Request;\n  }(Emitter);\n  Request.requestsCount = 0;\n  Request.requests = {};\n  /**\n   * Aborts pending requests when unloading the window. This is needed to prevent\n   * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n   * emitted.\n   */\n  if (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n      // @ts-ignore\n      attachEvent(\"onunload\", unloadHandler);\n    } else if (typeof addEventListener === \"function\") {\n      var terminationEvent = \"onpagehide\" in globalThisShim ? \"pagehide\" : \"unload\";\n      addEventListener(terminationEvent, unloadHandler, false);\n    }\n  }\n  function unloadHandler() {\n    for (var i in Request.requests) {\n      if (Request.requests.hasOwnProperty(i)) {\n        Request.requests[i].abort();\n      }\n    }\n  }\n  var hasXHR2 = function () {\n    var xhr = newRequest({\n      xdomain: false\n    });\n    return xhr && xhr.responseType !== null;\n  }();\n  /**\n   * HTTP long-polling based on the built-in `XMLHttpRequest` object.\n   *\n   * Usage: browser\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n   */\n  var XHR = /*#__PURE__*/function (_BaseXHR) {\n    function XHR(opts) {\n      var _this6;\n      _this6 = _BaseXHR.call(this, opts) || this;\n      var forceBase64 = opts && opts.forceBase64;\n      _this6.supportsBinary = hasXHR2 && !forceBase64;\n      return _this6;\n    }\n    _inheritsLoose(XHR, _BaseXHR);\n    var _proto3 = XHR.prototype;\n    _proto3.request = function request() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      _extends(opts, {\n        xd: this.xd\n      }, this.opts);\n      return new Request(newRequest, this.uri(), opts);\n    };\n    return XHR;\n  }(BaseXHR);\n  function newRequest(opts) {\n    var xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n      if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n        return new XMLHttpRequest();\n      }\n    } catch (e) {}\n    if (!xdomain) {\n      try {\n        return new globalThisShim[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n      } catch (e) {}\n    }\n  }\n\n  // detect ReactNative environment\n  var isReactNative = typeof navigator !== \"undefined\" && typeof navigator.product === \"string\" && navigator.product.toLowerCase() === \"reactnative\";\n  var BaseWS = /*#__PURE__*/function (_Transport) {\n    function BaseWS() {\n      return _Transport.apply(this, arguments) || this;\n    }\n    _inheritsLoose(BaseWS, _Transport);\n    var _proto = BaseWS.prototype;\n    _proto.doOpen = function doOpen() {\n      var uri = this.uri();\n      var protocols = this.opts.protocols;\n      // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n      var opts = isReactNative ? {} : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n      if (this.opts.extraHeaders) {\n        opts.headers = this.opts.extraHeaders;\n      }\n      try {\n        this.ws = this.createSocket(uri, protocols, opts);\n      } catch (err) {\n        return this.emitReserved(\"error\", err);\n      }\n      this.ws.binaryType = this.socket.binaryType;\n      this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */;\n    _proto.addEventListeners = function addEventListeners() {\n      var _this = this;\n      this.ws.onopen = function () {\n        if (_this.opts.autoUnref) {\n          _this.ws._socket.unref();\n        }\n        _this.onOpen();\n      };\n      this.ws.onclose = function (closeEvent) {\n        return _this.onClose({\n          description: \"websocket connection closed\",\n          context: closeEvent\n        });\n      };\n      this.ws.onmessage = function (ev) {\n        return _this.onData(ev.data);\n      };\n      this.ws.onerror = function (e) {\n        return _this.onError(\"websocket error\", e);\n      };\n    };\n    _proto.write = function write(packets) {\n      var _this2 = this;\n      this.writable = false;\n      // encodePacket efficient as it uses WS framing\n      // no need for encodePayload\n      var _loop = function _loop() {\n        var packet = packets[i];\n        var lastPacket = i === packets.length - 1;\n        encodePacket(packet, _this2.supportsBinary, function (data) {\n          // Sometimes the websocket has already been closed but the browser didn't\n          // have a chance of informing us about it yet, in that case send will\n          // throw an error\n          try {\n            _this2.doWrite(packet, data);\n          } catch (e) {}\n          if (lastPacket) {\n            // fake drain\n            // defer to next tick to allow Socket to clear writeBuffer\n            nextTick(function () {\n              _this2.writable = true;\n              _this2.emitReserved(\"drain\");\n            }, _this2.setTimeoutFn);\n          }\n        });\n      };\n      for (var i = 0; i < packets.length; i++) {\n        _loop();\n      }\n    };\n    _proto.doClose = function doClose() {\n      if (typeof this.ws !== \"undefined\") {\n        this.ws.onerror = function () {};\n        this.ws.close();\n        this.ws = null;\n      }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */;\n    _proto.uri = function uri() {\n      var schema = this.opts.secure ? \"wss\" : \"ws\";\n      var query = this.query || {};\n      // append timestamp to URI\n      if (this.opts.timestampRequests) {\n        query[this.opts.timestampParam] = randomString();\n      }\n      // communicate binary support capabilities\n      if (!this.supportsBinary) {\n        query.b64 = 1;\n      }\n      return this.createUri(schema, query);\n    };\n    return _createClass(BaseWS, [{\n      key: \"name\",\n      get: function get() {\n        return \"websocket\";\n      }\n    }]);\n  }(Transport);\n  var WebSocketCtor = globalThisShim.WebSocket || globalThisShim.MozWebSocket;\n  /**\n   * WebSocket transport based on the built-in `WebSocket` object.\n   *\n   * Usage: browser, Node.js (since v21), Deno, Bun\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n   * @see https://caniuse.com/mdn-api_websocket\n   * @see https://nodejs.org/api/globals.html#websocket\n   */\n  var WS = /*#__PURE__*/function (_BaseWS) {\n    function WS() {\n      return _BaseWS.apply(this, arguments) || this;\n    }\n    _inheritsLoose(WS, _BaseWS);\n    var _proto2 = WS.prototype;\n    _proto2.createSocket = function createSocket(uri, protocols, opts) {\n      return !isReactNative ? protocols ? new WebSocketCtor(uri, protocols) : new WebSocketCtor(uri) : new WebSocketCtor(uri, protocols, opts);\n    };\n    _proto2.doWrite = function doWrite(_packet, data) {\n      this.ws.send(data);\n    };\n    return WS;\n  }(BaseWS);\n\n  /**\n   * WebTransport transport based on the built-in `WebTransport` object.\n   *\n   * Usage: browser, Node.js (with the `@fails-components/webtransport` package)\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/WebTransport\n   * @see https://caniuse.com/webtransport\n   */\n  var WT = /*#__PURE__*/function (_Transport) {\n    function WT() {\n      return _Transport.apply(this, arguments) || this;\n    }\n    _inheritsLoose(WT, _Transport);\n    var _proto = WT.prototype;\n    _proto.doOpen = function doOpen() {\n      var _this = this;\n      try {\n        // @ts-ignore\n        this._transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n      } catch (err) {\n        return this.emitReserved(\"error\", err);\n      }\n      this._transport.closed.then(function () {\n        _this.onClose();\n      })[\"catch\"](function (err) {\n        _this.onError(\"webtransport error\", err);\n      });\n      // note: we could have used async/await, but that would require some additional polyfills\n      this._transport.ready.then(function () {\n        _this._transport.createBidirectionalStream().then(function (stream) {\n          var decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, _this.socket.binaryType);\n          var reader = stream.readable.pipeThrough(decoderStream).getReader();\n          var encoderStream = createPacketEncoderStream();\n          encoderStream.readable.pipeTo(stream.writable);\n          _this._writer = encoderStream.writable.getWriter();\n          var read = function read() {\n            reader.read().then(function (_ref) {\n              var done = _ref.done,\n                value = _ref.value;\n              if (done) {\n                return;\n              }\n              _this.onPacket(value);\n              read();\n            })[\"catch\"](function (err) {});\n          };\n          read();\n          var packet = {\n            type: \"open\"\n          };\n          if (_this.query.sid) {\n            packet.data = \"{\\\"sid\\\":\\\"\".concat(_this.query.sid, \"\\\"}\");\n          }\n          _this._writer.write(packet).then(function () {\n            return _this.onOpen();\n          });\n        });\n      });\n    };\n    _proto.write = function write(packets) {\n      var _this2 = this;\n      this.writable = false;\n      var _loop = function _loop() {\n        var packet = packets[i];\n        var lastPacket = i === packets.length - 1;\n        _this2._writer.write(packet).then(function () {\n          if (lastPacket) {\n            nextTick(function () {\n              _this2.writable = true;\n              _this2.emitReserved(\"drain\");\n            }, _this2.setTimeoutFn);\n          }\n        });\n      };\n      for (var i = 0; i < packets.length; i++) {\n        _loop();\n      }\n    };\n    _proto.doClose = function doClose() {\n      var _a;\n      (_a = this._transport) === null || _a === void 0 ? void 0 : _a.close();\n    };\n    return _createClass(WT, [{\n      key: \"name\",\n      get: function get() {\n        return \"webtransport\";\n      }\n    }]);\n  }(Transport);\n\n  var transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: XHR\n  };\n\n  // imported from https://github.com/galkn/parseuri\n  /**\n   * Parses a URI\n   *\n   * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n   *\n   * See:\n   * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n   * - https://caniuse.com/url\n   * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n   *\n   * History of the parse() method:\n   * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n   * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n   * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n   *\n   * @author Steven Levithan <stevenlevithan.com> (MIT license)\n   * @api private\n   */\n  var re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n  var parts = ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'];\n  function parse(str) {\n    if (str.length > 8000) {\n      throw \"URI too long\";\n    }\n    var src = str,\n      b = str.indexOf('['),\n      e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n      str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    var m = re.exec(str || ''),\n      uri = {},\n      i = 14;\n    while (i--) {\n      uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n      uri.source = src;\n      uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n      uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n      uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n  }\n  function pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n      names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n      names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n      names.splice(names.length - 1, 1);\n    }\n    return names;\n  }\n  function queryKey(uri, query) {\n    var data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n      if ($1) {\n        data[$1] = $2;\n      }\n    });\n    return data;\n  }\n\n  var withEventListeners = typeof addEventListener === \"function\" && typeof removeEventListener === \"function\";\n  var OFFLINE_EVENT_LISTENERS = [];\n  if (withEventListeners) {\n    // within a ServiceWorker, any event handler for the 'offline' event must be added on the initial evaluation of the\n    // script, so we create one single event listener here which will forward the event to the socket instances\n    addEventListener(\"offline\", function () {\n      OFFLINE_EVENT_LISTENERS.forEach(function (listener) {\n        return listener();\n      });\n    }, false);\n  }\n  /**\n   * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n   * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n   *\n   * This class comes without upgrade mechanism, which means that it will keep the first low-level transport that\n   * successfully establishes the connection.\n   *\n   * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n   *\n   * @example\n   * import { SocketWithoutUpgrade, WebSocket } from \"engine.io-client\";\n   *\n   * const socket = new SocketWithoutUpgrade({\n   *   transports: [WebSocket]\n   * });\n   *\n   * socket.on(\"open\", () => {\n   *   socket.send(\"hello\");\n   * });\n   *\n   * @see SocketWithUpgrade\n   * @see Socket\n   */\n  var SocketWithoutUpgrade = /*#__PURE__*/function (_Emitter) {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    function SocketWithoutUpgrade(uri, opts) {\n      var _this;\n      _this = _Emitter.call(this) || this;\n      _this.binaryType = defaultBinaryType;\n      _this.writeBuffer = [];\n      _this._prevBufferLen = 0;\n      _this._pingInterval = -1;\n      _this._pingTimeout = -1;\n      _this._maxPayload = -1;\n      /**\n       * The expiration timestamp of the {@link _pingTimeoutTimer} object is tracked, in case the timer is throttled and the\n       * callback is not fired on time. This can happen for example when a laptop is suspended or when a phone is locked.\n       */\n      _this._pingTimeoutTime = Infinity;\n      if (uri && \"object\" === _typeof(uri)) {\n        opts = uri;\n        uri = null;\n      }\n      if (uri) {\n        var parsedUri = parse(uri);\n        opts.hostname = parsedUri.host;\n        opts.secure = parsedUri.protocol === \"https\" || parsedUri.protocol === \"wss\";\n        opts.port = parsedUri.port;\n        if (parsedUri.query) opts.query = parsedUri.query;\n      } else if (opts.host) {\n        opts.hostname = parse(opts.host).host;\n      }\n      installTimerFunctions(_this, opts);\n      _this.secure = null != opts.secure ? opts.secure : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n      if (opts.hostname && !opts.port) {\n        // if no port is specified manually, use the protocol default\n        opts.port = _this.secure ? \"443\" : \"80\";\n      }\n      _this.hostname = opts.hostname || (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n      _this.port = opts.port || (typeof location !== \"undefined\" && location.port ? location.port : _this.secure ? \"443\" : \"80\");\n      _this.transports = [];\n      _this._transportsByName = {};\n      opts.transports.forEach(function (t) {\n        var transportName = t.prototype.name;\n        _this.transports.push(transportName);\n        _this._transportsByName[transportName] = t;\n      });\n      _this.opts = _extends({\n        path: \"/engine.io\",\n        agent: false,\n        withCredentials: false,\n        upgrade: true,\n        timestampParam: \"t\",\n        rememberUpgrade: false,\n        addTrailingSlash: true,\n        rejectUnauthorized: true,\n        perMessageDeflate: {\n          threshold: 1024\n        },\n        transportOptions: {},\n        closeOnBeforeunload: false\n      }, opts);\n      _this.opts.path = _this.opts.path.replace(/\\/$/, \"\") + (_this.opts.addTrailingSlash ? \"/\" : \"\");\n      if (typeof _this.opts.query === \"string\") {\n        _this.opts.query = decode(_this.opts.query);\n      }\n      if (withEventListeners) {\n        if (_this.opts.closeOnBeforeunload) {\n          // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n          // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n          // closed/reloaded)\n          _this._beforeunloadEventListener = function () {\n            if (_this.transport) {\n              // silently close the transport\n              _this.transport.removeAllListeners();\n              _this.transport.close();\n            }\n          };\n          addEventListener(\"beforeunload\", _this._beforeunloadEventListener, false);\n        }\n        if (_this.hostname !== \"localhost\") {\n          _this._offlineEventListener = function () {\n            _this._onClose(\"transport close\", {\n              description: \"network connection lost\"\n            });\n          };\n          OFFLINE_EVENT_LISTENERS.push(_this._offlineEventListener);\n        }\n      }\n      if (_this.opts.withCredentials) {\n        _this._cookieJar = createCookieJar();\n      }\n      _this._open();\n      return _this;\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    _inheritsLoose(SocketWithoutUpgrade, _Emitter);\n    var _proto = SocketWithoutUpgrade.prototype;\n    _proto.createTransport = function createTransport(name) {\n      var query = _extends({}, this.opts.query);\n      // append engine.io protocol identifier\n      query.EIO = protocol$1;\n      // transport name\n      query.transport = name;\n      // session id if we already have one\n      if (this.id) query.sid = this.id;\n      var opts = _extends({}, this.opts, {\n        query: query,\n        socket: this,\n        hostname: this.hostname,\n        secure: this.secure,\n        port: this.port\n      }, this.opts.transportOptions[name]);\n      return new this._transportsByName[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */;\n    _proto._open = function _open() {\n      var _this2 = this;\n      if (this.transports.length === 0) {\n        // Emit error on next tick so it can be listened to\n        this.setTimeoutFn(function () {\n          _this2.emitReserved(\"error\", \"No transports available\");\n        }, 0);\n        return;\n      }\n      var transportName = this.opts.rememberUpgrade && SocketWithoutUpgrade.priorWebsocketSuccess && this.transports.indexOf(\"websocket\") !== -1 ? \"websocket\" : this.transports[0];\n      this.readyState = \"opening\";\n      var transport = this.createTransport(transportName);\n      transport.open();\n      this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */;\n    _proto.setTransport = function setTransport(transport) {\n      var _this3 = this;\n      if (this.transport) {\n        this.transport.removeAllListeners();\n      }\n      // set up transport\n      this.transport = transport;\n      // set up transport listeners\n      transport.on(\"drain\", this._onDrain.bind(this)).on(\"packet\", this._onPacket.bind(this)).on(\"error\", this._onError.bind(this)).on(\"close\", function (reason) {\n        return _this3._onClose(\"transport close\", reason);\n      });\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */;\n    _proto.onOpen = function onOpen() {\n      this.readyState = \"open\";\n      SocketWithoutUpgrade.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n      this.emitReserved(\"open\");\n      this.flush();\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */;\n    _proto._onPacket = function _onPacket(packet) {\n      if (\"opening\" === this.readyState || \"open\" === this.readyState || \"closing\" === this.readyState) {\n        this.emitReserved(\"packet\", packet);\n        // Socket is live - any packet counts\n        this.emitReserved(\"heartbeat\");\n        switch (packet.type) {\n          case \"open\":\n            this.onHandshake(JSON.parse(packet.data));\n            break;\n          case \"ping\":\n            this._sendPacket(\"pong\");\n            this.emitReserved(\"ping\");\n            this.emitReserved(\"pong\");\n            this._resetPingTimeout();\n            break;\n          case \"error\":\n            var err = new Error(\"server error\");\n            // @ts-ignore\n            err.code = packet.data;\n            this._onError(err);\n            break;\n          case \"message\":\n            this.emitReserved(\"data\", packet.data);\n            this.emitReserved(\"message\", packet.data);\n            break;\n        }\n      }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */;\n    _proto.onHandshake = function onHandshake(data) {\n      this.emitReserved(\"handshake\", data);\n      this.id = data.sid;\n      this.transport.query.sid = data.sid;\n      this._pingInterval = data.pingInterval;\n      this._pingTimeout = data.pingTimeout;\n      this._maxPayload = data.maxPayload;\n      this.onOpen();\n      // In case open handler closes socket\n      if (\"closed\" === this.readyState) return;\n      this._resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */;\n    _proto._resetPingTimeout = function _resetPingTimeout() {\n      var _this4 = this;\n      this.clearTimeoutFn(this._pingTimeoutTimer);\n      var delay = this._pingInterval + this._pingTimeout;\n      this._pingTimeoutTime = Date.now() + delay;\n      this._pingTimeoutTimer = this.setTimeoutFn(function () {\n        _this4._onClose(\"ping timeout\");\n      }, delay);\n      if (this.opts.autoUnref) {\n        this._pingTimeoutTimer.unref();\n      }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */;\n    _proto._onDrain = function _onDrain() {\n      this.writeBuffer.splice(0, this._prevBufferLen);\n      // setting prevBufferLen = 0 is very important\n      // for example, when upgrading, upgrade packet is sent over,\n      // and a nonzero prevBufferLen could cause problems on `drain`\n      this._prevBufferLen = 0;\n      if (0 === this.writeBuffer.length) {\n        this.emitReserved(\"drain\");\n      } else {\n        this.flush();\n      }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */;\n    _proto.flush = function flush() {\n      if (\"closed\" !== this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length) {\n        var packets = this._getWritablePackets();\n        this.transport.send(packets);\n        // keep track of current length of writeBuffer\n        // splice writeBuffer and callbackBuffer on `drain`\n        this._prevBufferLen = packets.length;\n        this.emitReserved(\"flush\");\n      }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */;\n    _proto._getWritablePackets = function _getWritablePackets() {\n      var shouldCheckPayloadSize = this._maxPayload && this.transport.name === \"polling\" && this.writeBuffer.length > 1;\n      if (!shouldCheckPayloadSize) {\n        return this.writeBuffer;\n      }\n      var payloadSize = 1; // first packet type\n      for (var i = 0; i < this.writeBuffer.length; i++) {\n        var data = this.writeBuffer[i].data;\n        if (data) {\n          payloadSize += byteLength(data);\n        }\n        if (i > 0 && payloadSize > this._maxPayload) {\n          return this.writeBuffer.slice(0, i);\n        }\n        payloadSize += 2; // separator + packet type\n      }\n      return this.writeBuffer;\n    }\n    /**\n     * Checks whether the heartbeat timer has expired but the socket has not yet been notified.\n     *\n     * Note: this method is private for now because it does not really fit the WebSocket API, but if we put it in the\n     * `write()` method then the message would not be buffered by the Socket.IO client.\n     *\n     * @return {boolean}\n     * @private\n     */\n    /* private */;\n    _proto._hasPingExpired = function _hasPingExpired() {\n      var _this5 = this;\n      if (!this._pingTimeoutTime) return true;\n      var hasExpired = Date.now() > this._pingTimeoutTime;\n      if (hasExpired) {\n        this._pingTimeoutTime = 0;\n        nextTick(function () {\n          _this5._onClose(\"ping timeout\");\n        }, this.setTimeoutFn);\n      }\n      return hasExpired;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */;\n    _proto.write = function write(msg, options, fn) {\n      this._sendPacket(\"message\", msg, options, fn);\n      return this;\n    }\n    /**\n     * Sends a message. Alias of {@link Socket#write}.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */;\n    _proto.send = function send(msg, options, fn) {\n      this._sendPacket(\"message\", msg, options, fn);\n      return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */;\n    _proto._sendPacket = function _sendPacket(type, data, options, fn) {\n      if (\"function\" === typeof data) {\n        fn = data;\n        data = undefined;\n      }\n      if (\"function\" === typeof options) {\n        fn = options;\n        options = null;\n      }\n      if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n        return;\n      }\n      options = options || {};\n      options.compress = false !== options.compress;\n      var packet = {\n        type: type,\n        data: data,\n        options: options\n      };\n      this.emitReserved(\"packetCreate\", packet);\n      this.writeBuffer.push(packet);\n      if (fn) this.once(\"flush\", fn);\n      this.flush();\n    }\n    /**\n     * Closes the connection.\n     */;\n    _proto.close = function close() {\n      var _this6 = this;\n      var close = function close() {\n        _this6._onClose(\"forced close\");\n        _this6.transport.close();\n      };\n      var cleanupAndClose = function cleanupAndClose() {\n        _this6.off(\"upgrade\", cleanupAndClose);\n        _this6.off(\"upgradeError\", cleanupAndClose);\n        close();\n      };\n      var waitForUpgrade = function waitForUpgrade() {\n        // wait for upgrade to finish since we can't send packets while pausing a transport\n        _this6.once(\"upgrade\", cleanupAndClose);\n        _this6.once(\"upgradeError\", cleanupAndClose);\n      };\n      if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n        this.readyState = \"closing\";\n        if (this.writeBuffer.length) {\n          this.once(\"drain\", function () {\n            if (_this6.upgrading) {\n              waitForUpgrade();\n            } else {\n              close();\n            }\n          });\n        } else if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      }\n      return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */;\n    _proto._onError = function _onError(err) {\n      SocketWithoutUpgrade.priorWebsocketSuccess = false;\n      if (this.opts.tryAllTransports && this.transports.length > 1 && this.readyState === \"opening\") {\n        this.transports.shift();\n        return this._open();\n      }\n      this.emitReserved(\"error\", err);\n      this._onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */;\n    _proto._onClose = function _onClose(reason, description) {\n      if (\"opening\" === this.readyState || \"open\" === this.readyState || \"closing\" === this.readyState) {\n        // clear timers\n        this.clearTimeoutFn(this._pingTimeoutTimer);\n        // stop event from firing again for transport\n        this.transport.removeAllListeners(\"close\");\n        // ensure transport won't stay open\n        this.transport.close();\n        // ignore further transport communication\n        this.transport.removeAllListeners();\n        if (withEventListeners) {\n          if (this._beforeunloadEventListener) {\n            removeEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n          }\n          if (this._offlineEventListener) {\n            var i = OFFLINE_EVENT_LISTENERS.indexOf(this._offlineEventListener);\n            if (i !== -1) {\n              OFFLINE_EVENT_LISTENERS.splice(i, 1);\n            }\n          }\n        }\n        // set ready state\n        this.readyState = \"closed\";\n        // clear session id\n        this.id = null;\n        // emit close event\n        this.emitReserved(\"close\", reason, description);\n        // clean buffers after, so users can still\n        // grab the buffers on `close` event\n        this.writeBuffer = [];\n        this._prevBufferLen = 0;\n      }\n    };\n    return SocketWithoutUpgrade;\n  }(Emitter);\n  SocketWithoutUpgrade.protocol = protocol$1;\n  /**\n   * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n   * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n   *\n   * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n   * low-level transport, it will try to upgrade to a better transport.\n   *\n   * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n   *\n   * @example\n   * import { SocketWithUpgrade, WebSocket } from \"engine.io-client\";\n   *\n   * const socket = new SocketWithUpgrade({\n   *   transports: [WebSocket]\n   * });\n   *\n   * socket.on(\"open\", () => {\n   *   socket.send(\"hello\");\n   * });\n   *\n   * @see SocketWithoutUpgrade\n   * @see Socket\n   */\n  var SocketWithUpgrade = /*#__PURE__*/function (_SocketWithoutUpgrade) {\n    function SocketWithUpgrade() {\n      var _this7;\n      _this7 = _SocketWithoutUpgrade.apply(this, arguments) || this;\n      _this7._upgrades = [];\n      return _this7;\n    }\n    _inheritsLoose(SocketWithUpgrade, _SocketWithoutUpgrade);\n    var _proto2 = SocketWithUpgrade.prototype;\n    _proto2.onOpen = function onOpen() {\n      _SocketWithoutUpgrade.prototype.onOpen.call(this);\n      if (\"open\" === this.readyState && this.opts.upgrade) {\n        for (var i = 0; i < this._upgrades.length; i++) {\n          this._probe(this._upgrades[i]);\n        }\n      }\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */;\n    _proto2._probe = function _probe(name) {\n      var _this8 = this;\n      var transport = this.createTransport(name);\n      var failed = false;\n      SocketWithoutUpgrade.priorWebsocketSuccess = false;\n      var onTransportOpen = function onTransportOpen() {\n        if (failed) return;\n        transport.send([{\n          type: \"ping\",\n          data: \"probe\"\n        }]);\n        transport.once(\"packet\", function (msg) {\n          if (failed) return;\n          if (\"pong\" === msg.type && \"probe\" === msg.data) {\n            _this8.upgrading = true;\n            _this8.emitReserved(\"upgrading\", transport);\n            if (!transport) return;\n            SocketWithoutUpgrade.priorWebsocketSuccess = \"websocket\" === transport.name;\n            _this8.transport.pause(function () {\n              if (failed) return;\n              if (\"closed\" === _this8.readyState) return;\n              cleanup();\n              _this8.setTransport(transport);\n              transport.send([{\n                type: \"upgrade\"\n              }]);\n              _this8.emitReserved(\"upgrade\", transport);\n              transport = null;\n              _this8.upgrading = false;\n              _this8.flush();\n            });\n          } else {\n            var err = new Error(\"probe error\");\n            // @ts-ignore\n            err.transport = transport.name;\n            _this8.emitReserved(\"upgradeError\", err);\n          }\n        });\n      };\n      function freezeTransport() {\n        if (failed) return;\n        // Any callback called by transport should be ignored since now\n        failed = true;\n        cleanup();\n        transport.close();\n        transport = null;\n      }\n      // Handle any error that happens while probing\n      var onerror = function onerror(err) {\n        var error = new Error(\"probe error: \" + err);\n        // @ts-ignore\n        error.transport = transport.name;\n        freezeTransport();\n        _this8.emitReserved(\"upgradeError\", error);\n      };\n      function onTransportClose() {\n        onerror(\"transport closed\");\n      }\n      // When the socket is closed while we're probing\n      function onclose() {\n        onerror(\"socket closed\");\n      }\n      // When the socket is upgraded while we're probing\n      function onupgrade(to) {\n        if (transport && to.name !== transport.name) {\n          freezeTransport();\n        }\n      }\n      // Remove all listeners on the transport and on self\n      var cleanup = function cleanup() {\n        transport.removeListener(\"open\", onTransportOpen);\n        transport.removeListener(\"error\", onerror);\n        transport.removeListener(\"close\", onTransportClose);\n        _this8.off(\"close\", onclose);\n        _this8.off(\"upgrading\", onupgrade);\n      };\n      transport.once(\"open\", onTransportOpen);\n      transport.once(\"error\", onerror);\n      transport.once(\"close\", onTransportClose);\n      this.once(\"close\", onclose);\n      this.once(\"upgrading\", onupgrade);\n      if (this._upgrades.indexOf(\"webtransport\") !== -1 && name !== \"webtransport\") {\n        // favor WebTransport\n        this.setTimeoutFn(function () {\n          if (!failed) {\n            transport.open();\n          }\n        }, 200);\n      } else {\n        transport.open();\n      }\n    };\n    _proto2.onHandshake = function onHandshake(data) {\n      this._upgrades = this._filterUpgrades(data.upgrades);\n      _SocketWithoutUpgrade.prototype.onHandshake.call(this, data);\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */;\n    _proto2._filterUpgrades = function _filterUpgrades(upgrades) {\n      var filteredUpgrades = [];\n      for (var i = 0; i < upgrades.length; i++) {\n        if (~this.transports.indexOf(upgrades[i])) filteredUpgrades.push(upgrades[i]);\n      }\n      return filteredUpgrades;\n    };\n    return SocketWithUpgrade;\n  }(SocketWithoutUpgrade);\n  /**\n   * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n   * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n   *\n   * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n   * low-level transport, it will try to upgrade to a better transport.\n   *\n   * @example\n   * import { Socket } from \"engine.io-client\";\n   *\n   * const socket = new Socket();\n   *\n   * socket.on(\"open\", () => {\n   *   socket.send(\"hello\");\n   * });\n   *\n   * @see SocketWithoutUpgrade\n   * @see SocketWithUpgrade\n   */\n  var Socket$1 = /*#__PURE__*/function (_SocketWithUpgrade) {\n    function Socket(uri) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var o = _typeof(uri) === \"object\" ? uri : opts;\n      if (!o.transports || o.transports && typeof o.transports[0] === \"string\") {\n        o.transports = (o.transports || [\"polling\", \"websocket\", \"webtransport\"]).map(function (transportName) {\n          return transports[transportName];\n        }).filter(function (t) {\n          return !!t;\n        });\n      }\n      return _SocketWithUpgrade.call(this, uri, o) || this;\n    }\n    _inheritsLoose(Socket, _SocketWithUpgrade);\n    return Socket;\n  }(SocketWithUpgrade);\n\n  Socket$1.protocol;\n\n  function getDefaultExportFromCjs (x) {\n  \treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n  }\n\n  var browser = {exports: {}};\n\n  var ms;\n  var hasRequiredMs;\n  function requireMs() {\n    if (hasRequiredMs) return ms;\n    hasRequiredMs = 1;\n    var s = 1000;\n    var m = s * 60;\n    var h = m * 60;\n    var d = h * 24;\n    var w = d * 7;\n    var y = d * 365.25;\n\n    /**\n     * Parse or format the given `val`.\n     *\n     * Options:\n     *\n     *  - `long` verbose formatting [false]\n     *\n     * @param {String|Number} val\n     * @param {Object} [options]\n     * @throws {Error} throw an error if val is not a non-empty string or a number\n     * @return {String|Number}\n     * @api public\n     */\n\n    ms = function ms(val, options) {\n      options = options || {};\n      var type = _typeof(val);\n      if (type === 'string' && val.length > 0) {\n        return parse(val);\n      } else if (type === 'number' && isFinite(val)) {\n        return options[\"long\"] ? fmtLong(val) : fmtShort(val);\n      }\n      throw new Error('val is not a non-empty string or a valid number. val=' + JSON.stringify(val));\n    };\n\n    /**\n     * Parse the given `str` and return milliseconds.\n     *\n     * @param {String} str\n     * @return {Number}\n     * @api private\n     */\n\n    function parse(str) {\n      str = String(str);\n      if (str.length > 100) {\n        return;\n      }\n      var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);\n      if (!match) {\n        return;\n      }\n      var n = parseFloat(match[1]);\n      var type = (match[2] || 'ms').toLowerCase();\n      switch (type) {\n        case 'years':\n        case 'year':\n        case 'yrs':\n        case 'yr':\n        case 'y':\n          return n * y;\n        case 'weeks':\n        case 'week':\n        case 'w':\n          return n * w;\n        case 'days':\n        case 'day':\n        case 'd':\n          return n * d;\n        case 'hours':\n        case 'hour':\n        case 'hrs':\n        case 'hr':\n        case 'h':\n          return n * h;\n        case 'minutes':\n        case 'minute':\n        case 'mins':\n        case 'min':\n        case 'm':\n          return n * m;\n        case 'seconds':\n        case 'second':\n        case 'secs':\n        case 'sec':\n        case 's':\n          return n * s;\n        case 'milliseconds':\n        case 'millisecond':\n        case 'msecs':\n        case 'msec':\n        case 'ms':\n          return n;\n        default:\n          return undefined;\n      }\n    }\n\n    /**\n     * Short format for `ms`.\n     *\n     * @param {Number} ms\n     * @return {String}\n     * @api private\n     */\n\n    function fmtShort(ms) {\n      var msAbs = Math.abs(ms);\n      if (msAbs >= d) {\n        return Math.round(ms / d) + 'd';\n      }\n      if (msAbs >= h) {\n        return Math.round(ms / h) + 'h';\n      }\n      if (msAbs >= m) {\n        return Math.round(ms / m) + 'm';\n      }\n      if (msAbs >= s) {\n        return Math.round(ms / s) + 's';\n      }\n      return ms + 'ms';\n    }\n\n    /**\n     * Long format for `ms`.\n     *\n     * @param {Number} ms\n     * @return {String}\n     * @api private\n     */\n\n    function fmtLong(ms) {\n      var msAbs = Math.abs(ms);\n      if (msAbs >= d) {\n        return plural(ms, msAbs, d, 'day');\n      }\n      if (msAbs >= h) {\n        return plural(ms, msAbs, h, 'hour');\n      }\n      if (msAbs >= m) {\n        return plural(ms, msAbs, m, 'minute');\n      }\n      if (msAbs >= s) {\n        return plural(ms, msAbs, s, 'second');\n      }\n      return ms + ' ms';\n    }\n\n    /**\n     * Pluralization helper.\n     */\n\n    function plural(ms, msAbs, n, name) {\n      var isPlural = msAbs >= n * 1.5;\n      return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n    }\n    return ms;\n  }\n\n  /**\n   * This is the common logic for both the Node.js and web browser\n   * implementations of `debug()`.\n   */\n\n  function setup(env) {\n    createDebug.debug = createDebug;\n    createDebug[\"default\"] = createDebug;\n    createDebug.coerce = coerce;\n    createDebug.disable = disable;\n    createDebug.enable = enable;\n    createDebug.enabled = enabled;\n    createDebug.humanize = requireMs();\n    createDebug.destroy = destroy;\n    Object.keys(env).forEach(function (key) {\n      createDebug[key] = env[key];\n    });\n\n    /**\n    * The currently active debug mode names, and names to skip.\n    */\n\n    createDebug.names = [];\n    createDebug.skips = [];\n\n    /**\n    * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n    *\n    * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n    */\n    createDebug.formatters = {};\n\n    /**\n    * Selects a color for a debug namespace\n    * @param {String} namespace The namespace string for the debug instance to be colored\n    * @return {Number|String} An ANSI color code for the given namespace\n    * @api private\n    */\n    function selectColor(namespace) {\n      var hash = 0;\n      for (var i = 0; i < namespace.length; i++) {\n        hash = (hash << 5) - hash + namespace.charCodeAt(i);\n        hash |= 0; // Convert to 32bit integer\n      }\n      return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n    }\n    createDebug.selectColor = selectColor;\n\n    /**\n    * Create a debugger with the given `namespace`.\n    *\n    * @param {String} namespace\n    * @return {Function}\n    * @api public\n    */\n    function createDebug(namespace) {\n      var prevTime;\n      var enableOverride = null;\n      var namespacesCache;\n      var enabledCache;\n      function debug() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        // Disabled?\n        if (!debug.enabled) {\n          return;\n        }\n        var self = debug;\n\n        // Set `diff` timestamp\n        var curr = Number(new Date());\n        var ms = curr - (prevTime || curr);\n        self.diff = ms;\n        self.prev = prevTime;\n        self.curr = curr;\n        prevTime = curr;\n        args[0] = createDebug.coerce(args[0]);\n        if (typeof args[0] !== 'string') {\n          // Anything else let's inspect with %O\n          args.unshift('%O');\n        }\n\n        // Apply any `formatters` transformations\n        var index = 0;\n        args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n          // If we encounter an escaped % then don't increase the array index\n          if (match === '%%') {\n            return '%';\n          }\n          index++;\n          var formatter = createDebug.formatters[format];\n          if (typeof formatter === 'function') {\n            var val = args[index];\n            match = formatter.call(self, val);\n\n            // Now we need to remove `args[index]` since it's inlined in the `format`\n            args.splice(index, 1);\n            index--;\n          }\n          return match;\n        });\n\n        // Apply env-specific formatting (colors, etc.)\n        createDebug.formatArgs.call(self, args);\n        var logFn = self.log || createDebug.log;\n        logFn.apply(self, args);\n      }\n      debug.namespace = namespace;\n      debug.useColors = createDebug.useColors();\n      debug.color = createDebug.selectColor(namespace);\n      debug.extend = extend;\n      debug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n      Object.defineProperty(debug, 'enabled', {\n        enumerable: true,\n        configurable: false,\n        get: function get() {\n          if (enableOverride !== null) {\n            return enableOverride;\n          }\n          if (namespacesCache !== createDebug.namespaces) {\n            namespacesCache = createDebug.namespaces;\n            enabledCache = createDebug.enabled(namespace);\n          }\n          return enabledCache;\n        },\n        set: function set(v) {\n          enableOverride = v;\n        }\n      });\n\n      // Env-specific initialization logic for debug instances\n      if (typeof createDebug.init === 'function') {\n        createDebug.init(debug);\n      }\n      return debug;\n    }\n    function extend(namespace, delimiter) {\n      var newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n      newDebug.log = this.log;\n      return newDebug;\n    }\n\n    /**\n    * Enables a debug mode by namespaces. This can include modes\n    * separated by a colon and wildcards.\n    *\n    * @param {String} namespaces\n    * @api public\n    */\n    function enable(namespaces) {\n      createDebug.save(namespaces);\n      createDebug.namespaces = namespaces;\n      createDebug.names = [];\n      createDebug.skips = [];\n      var i;\n      var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n      var len = split.length;\n      for (i = 0; i < len; i++) {\n        if (!split[i]) {\n          // ignore empty strings\n          continue;\n        }\n        namespaces = split[i].replace(/\\*/g, '.*?');\n        if (namespaces[0] === '-') {\n          createDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n        } else {\n          createDebug.names.push(new RegExp('^' + namespaces + '$'));\n        }\n      }\n    }\n\n    /**\n    * Disable debug output.\n    *\n    * @return {String} namespaces\n    * @api public\n    */\n    function disable() {\n      var namespaces = [].concat(_toConsumableArray(createDebug.names.map(toNamespace)), _toConsumableArray(createDebug.skips.map(toNamespace).map(function (namespace) {\n        return '-' + namespace;\n      }))).join(',');\n      createDebug.enable('');\n      return namespaces;\n    }\n\n    /**\n    * Returns true if the given mode name is enabled, false otherwise.\n    *\n    * @param {String} name\n    * @return {Boolean}\n    * @api public\n    */\n    function enabled(name) {\n      if (name[name.length - 1] === '*') {\n        return true;\n      }\n      var i;\n      var len;\n      for (i = 0, len = createDebug.skips.length; i < len; i++) {\n        if (createDebug.skips[i].test(name)) {\n          return false;\n        }\n      }\n      for (i = 0, len = createDebug.names.length; i < len; i++) {\n        if (createDebug.names[i].test(name)) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    /**\n    * Convert regexp to namespace\n    *\n    * @param {RegExp} regxep\n    * @return {String} namespace\n    * @api private\n    */\n    function toNamespace(regexp) {\n      return regexp.toString().substring(2, regexp.toString().length - 2).replace(/\\.\\*\\?$/, '*');\n    }\n\n    /**\n    * Coerce `val`.\n    *\n    * @param {Mixed} val\n    * @return {Mixed}\n    * @api private\n    */\n    function coerce(val) {\n      if (val instanceof Error) {\n        return val.stack || val.message;\n      }\n      return val;\n    }\n\n    /**\n    * XXX DO NOT USE. This is a temporary stub function.\n    * XXX It WILL be removed in the next major release.\n    */\n    function destroy() {\n      console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n    }\n    createDebug.enable(createDebug.load());\n    return createDebug;\n  }\n  var common = setup;\n\n  /* eslint-env browser */\n  browser.exports;\n  (function (module, exports) {\n    /**\n     * This is the web browser implementation of `debug()`.\n     */\n\n    exports.formatArgs = formatArgs;\n    exports.save = save;\n    exports.load = load;\n    exports.useColors = useColors;\n    exports.storage = localstorage();\n    exports.destroy = function () {\n      var warned = false;\n      return function () {\n        if (!warned) {\n          warned = true;\n          console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n        }\n      };\n    }();\n\n    /**\n     * Colors.\n     */\n\n    exports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n\n    /**\n     * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n     * and the Firebug extension (any Firefox version) are known\n     * to support \"%c\" CSS customizations.\n     *\n     * TODO: add a `localStorage` variable to explicitly enable/disable colors\n     */\n\n    // eslint-disable-next-line complexity\n    function useColors() {\n      // NB: In an Electron preload script, document will be defined but not fully\n      // initialized. Since we know we're in Chrome, we'll just detect this case\n      // explicitly\n      if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n        return true;\n      }\n\n      // Internet Explorer and Edge do not support colors.\n      if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n        return false;\n      }\n\n      // Is webkit? http://stackoverflow.com/a/16459606/376773\n      // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n      return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance ||\n      // Is firebug? http://stackoverflow.com/a/398120/376773\n      typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) ||\n      // Is firefox >= v31?\n      // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n      typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 ||\n      // Double check webkit in userAgent just in case we are in a worker\n      typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n    }\n\n    /**\n     * Colorize log arguments if enabled.\n     *\n     * @api public\n     */\n\n    function formatArgs(args) {\n      args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\n      if (!this.useColors) {\n        return;\n      }\n      var c = 'color: ' + this.color;\n      args.splice(1, 0, c, 'color: inherit');\n\n      // The final \"%c\" is somewhat tricky, because there could be other\n      // arguments passed either before or after the %c, so we need to\n      // figure out the correct index to insert the CSS into\n      var index = 0;\n      var lastC = 0;\n      args[0].replace(/%[a-zA-Z%]/g, function (match) {\n        if (match === '%%') {\n          return;\n        }\n        index++;\n        if (match === '%c') {\n          // We only are interested in the *last* %c\n          // (the user may have provided their own)\n          lastC = index;\n        }\n      });\n      args.splice(lastC, 0, c);\n    }\n\n    /**\n     * Invokes `console.debug()` when available.\n     * No-op when `console.debug` is not a \"function\".\n     * If `console.debug` is not available, falls back\n     * to `console.log`.\n     *\n     * @api public\n     */\n    exports.log = console.debug || console.log || function () {};\n\n    /**\n     * Save `namespaces`.\n     *\n     * @param {String} namespaces\n     * @api private\n     */\n    function save(namespaces) {\n      try {\n        if (namespaces) {\n          exports.storage.setItem('debug', namespaces);\n        } else {\n          exports.storage.removeItem('debug');\n        }\n      } catch (error) {\n        // Swallow\n        // XXX (@Qix-) should we be logging these?\n      }\n    }\n\n    /**\n     * Load `namespaces`.\n     *\n     * @return {String} returns the previously persisted debug modes\n     * @api private\n     */\n    function load() {\n      var r;\n      try {\n        r = exports.storage.getItem('debug');\n      } catch (error) {\n        // Swallow\n        // XXX (@Qix-) should we be logging these?\n      }\n\n      // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n      if (!r && typeof process !== 'undefined' && 'env' in process) {\n        r = process.env.DEBUG;\n      }\n      return r;\n    }\n\n    /**\n     * Localstorage attempts to return the localstorage.\n     *\n     * This is necessary because safari throws\n     * when a user disables cookies/localstorage\n     * and you attempt to access it.\n     *\n     * @return {LocalStorage}\n     * @api private\n     */\n\n    function localstorage() {\n      try {\n        // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n        // The Browser also has localStorage in the global context.\n        return localStorage;\n      } catch (error) {\n        // Swallow\n        // XXX (@Qix-) should we be logging these?\n      }\n    }\n    module.exports = common(exports);\n    var formatters = module.exports.formatters;\n\n    /**\n     * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n     */\n\n    formatters.j = function (v) {\n      try {\n        return JSON.stringify(v);\n      } catch (error) {\n        return '[UnexpectedJSONParseError]: ' + error.message;\n      }\n    };\n  })(browser, browser.exports);\n  var browserExports = browser.exports;\n  var debugModule = /*@__PURE__*/getDefaultExportFromCjs(browserExports);\n\n  var debug$3 = debugModule(\"socket.io-client:url\"); // debug()\n  /**\n   * URL parser.\n   *\n   * @param uri - url\n   * @param path - the request path of the connection\n   * @param loc - An object meant to mimic window.location.\n   *        Defaults to window.location.\n   * @public\n   */\n  function url(uri) {\n    var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    var loc = arguments.length > 2 ? arguments[2] : undefined;\n    var obj = uri;\n    // default to window.location\n    loc = loc || typeof location !== \"undefined\" && location;\n    if (null == uri) uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n      if (\"/\" === uri.charAt(0)) {\n        if (\"/\" === uri.charAt(1)) {\n          uri = loc.protocol + uri;\n        } else {\n          uri = loc.host + uri;\n        }\n      }\n      if (!/^(https?|wss?):\\/\\//.test(uri)) {\n        debug$3(\"protocol-less url %s\", uri);\n        if (\"undefined\" !== typeof loc) {\n          uri = loc.protocol + \"//\" + uri;\n        } else {\n          uri = \"https://\" + uri;\n        }\n      }\n      // parse\n      debug$3(\"parse %s\", uri);\n      obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n      if (/^(http|ws)$/.test(obj.protocol)) {\n        obj.port = \"80\";\n      } else if (/^(http|ws)s$/.test(obj.protocol)) {\n        obj.port = \"443\";\n      }\n    }\n    obj.path = obj.path || \"/\";\n    var ipv6 = obj.host.indexOf(\":\") !== -1;\n    var host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href = obj.protocol + \"://\" + host + (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n  }\n\n  var withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n  var isView = function isView(obj) {\n    return typeof ArrayBuffer.isView === \"function\" ? ArrayBuffer.isView(obj) : obj.buffer instanceof ArrayBuffer;\n  };\n  var toString = Object.prototype.toString;\n  var withNativeBlob = typeof Blob === \"function\" || typeof Blob !== \"undefined\" && toString.call(Blob) === \"[object BlobConstructor]\";\n  var withNativeFile = typeof File === \"function\" || typeof File !== \"undefined\" && toString.call(File) === \"[object FileConstructor]\";\n  /**\n   * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n   *\n   * @private\n   */\n  function isBinary(obj) {\n    return withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)) || withNativeBlob && obj instanceof Blob || withNativeFile && obj instanceof File;\n  }\n  function hasBinary(obj, toJSON) {\n    if (!obj || _typeof(obj) !== \"object\") {\n      return false;\n    }\n    if (Array.isArray(obj)) {\n      for (var i = 0, l = obj.length; i < l; i++) {\n        if (hasBinary(obj[i])) {\n          return true;\n        }\n      }\n      return false;\n    }\n    if (isBinary(obj)) {\n      return true;\n    }\n    if (obj.toJSON && typeof obj.toJSON === \"function\" && arguments.length === 1) {\n      return hasBinary(obj.toJSON(), true);\n    }\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n   *\n   * @param {Object} packet - socket.io event packet\n   * @return {Object} with deconstructed packet and list of buffers\n   * @public\n   */\n  function deconstructPacket(packet) {\n    var buffers = [];\n    var packetData = packet.data;\n    var pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return {\n      packet: pack,\n      buffers: buffers\n    };\n  }\n  function _deconstructPacket(data, buffers) {\n    if (!data) return data;\n    if (isBinary(data)) {\n      var placeholder = {\n        _placeholder: true,\n        num: buffers.length\n      };\n      buffers.push(data);\n      return placeholder;\n    } else if (Array.isArray(data)) {\n      var newData = new Array(data.length);\n      for (var i = 0; i < data.length; i++) {\n        newData[i] = _deconstructPacket(data[i], buffers);\n      }\n      return newData;\n    } else if (_typeof(data) === \"object\" && !(data instanceof Date)) {\n      var _newData = {};\n      for (var key in data) {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n          _newData[key] = _deconstructPacket(data[key], buffers);\n        }\n      }\n      return _newData;\n    }\n    return data;\n  }\n  /**\n   * Reconstructs a binary packet from its placeholder packet and buffers\n   *\n   * @param {Object} packet - event packet with placeholders\n   * @param {Array} buffers - binary buffers to put in placeholder positions\n   * @return {Object} reconstructed packet\n   * @public\n   */\n  function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n  }\n  function _reconstructPacket(data, buffers) {\n    if (!data) return data;\n    if (data && data._placeholder === true) {\n      var isIndexValid = typeof data.num === \"number\" && data.num >= 0 && data.num < buffers.length;\n      if (isIndexValid) {\n        return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n      } else {\n        throw new Error(\"illegal attachments\");\n      }\n    } else if (Array.isArray(data)) {\n      for (var i = 0; i < data.length; i++) {\n        data[i] = _reconstructPacket(data[i], buffers);\n      }\n    } else if (_typeof(data) === \"object\") {\n      for (var key in data) {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n          data[key] = _reconstructPacket(data[key], buffers);\n        }\n      }\n    }\n    return data;\n  }\n\n  /**\n   * These strings must not be used as event names, as they have a special meaning.\n   */\n  var RESERVED_EVENTS$1 = [\"connect\",\n  // used on the client side\n  \"connect_error\",\n  // used on the client side\n  \"disconnect\",\n  // used on both sides\n  \"disconnecting\",\n  // used on the server side\n  \"newListener\",\n  // used by the Node.js EventEmitter\n  \"removeListener\" // used by the Node.js EventEmitter\n  ];\n  /**\n   * Protocol version.\n   *\n   * @public\n   */\n  var protocol = 5;\n  var PacketType;\n  (function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n  })(PacketType || (PacketType = {}));\n  /**\n   * A socket.io Encoder instance\n   */\n  var Encoder = /*#__PURE__*/function () {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    function Encoder(replacer) {\n      this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    var _proto = Encoder.prototype;\n    _proto.encode = function encode(obj) {\n      if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n        if (hasBinary(obj)) {\n          return this.encodeAsBinary({\n            type: obj.type === PacketType.EVENT ? PacketType.BINARY_EVENT : PacketType.BINARY_ACK,\n            nsp: obj.nsp,\n            data: obj.data,\n            id: obj.id\n          });\n        }\n      }\n      return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */;\n    _proto.encodeAsString = function encodeAsString(obj) {\n      // first is type\n      var str = \"\" + obj.type;\n      // attachments if we have them\n      if (obj.type === PacketType.BINARY_EVENT || obj.type === PacketType.BINARY_ACK) {\n        str += obj.attachments + \"-\";\n      }\n      // if we have a namespace other than `/`\n      // we append it followed by a comma `,`\n      if (obj.nsp && \"/\" !== obj.nsp) {\n        str += obj.nsp + \",\";\n      }\n      // immediately followed by the id\n      if (null != obj.id) {\n        str += obj.id;\n      }\n      // json data\n      if (null != obj.data) {\n        str += JSON.stringify(obj.data, this.replacer);\n      }\n      return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */;\n    _proto.encodeAsBinary = function encodeAsBinary(obj) {\n      var deconstruction = deconstructPacket(obj);\n      var pack = this.encodeAsString(deconstruction.packet);\n      var buffers = deconstruction.buffers;\n      buffers.unshift(pack); // add packet info to beginning of data list\n      return buffers; // write all the buffers\n    };\n    return Encoder;\n  }();\n  /**\n   * A socket.io Decoder instance\n   *\n   * @return {Object} decoder\n   */\n  var Decoder = /*#__PURE__*/function (_Emitter) {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    function Decoder(reviver) {\n      var _this;\n      _this = _Emitter.call(this) || this;\n      _this.reviver = reviver;\n      return _this;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    _inheritsLoose(Decoder, _Emitter);\n    var _proto2 = Decoder.prototype;\n    _proto2.add = function add(obj) {\n      var packet;\n      if (typeof obj === \"string\") {\n        if (this.reconstructor) {\n          throw new Error(\"got plaintext data when reconstructing a packet\");\n        }\n        packet = this.decodeString(obj);\n        var isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n        if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n          packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n          // binary packet's json\n          this.reconstructor = new BinaryReconstructor(packet);\n          // no attachments, labeled binary but no binary data to follow\n          if (packet.attachments === 0) {\n            _Emitter.prototype.emitReserved.call(this, \"decoded\", packet);\n          }\n        } else {\n          // non-binary full packet\n          _Emitter.prototype.emitReserved.call(this, \"decoded\", packet);\n        }\n      } else if (isBinary(obj) || obj.base64) {\n        // raw binary data\n        if (!this.reconstructor) {\n          throw new Error(\"got binary data when not reconstructing a packet\");\n        } else {\n          packet = this.reconstructor.takeBinaryData(obj);\n          if (packet) {\n            // received final buffer\n            this.reconstructor = null;\n            _Emitter.prototype.emitReserved.call(this, \"decoded\", packet);\n          }\n        }\n      } else {\n        throw new Error(\"Unknown type: \" + obj);\n      }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */;\n    _proto2.decodeString = function decodeString(str) {\n      var i = 0;\n      // look up type\n      var p = {\n        type: Number(str.charAt(0))\n      };\n      if (PacketType[p.type] === undefined) {\n        throw new Error(\"unknown packet type \" + p.type);\n      }\n      // look up attachments if type binary\n      if (p.type === PacketType.BINARY_EVENT || p.type === PacketType.BINARY_ACK) {\n        var start = i + 1;\n        while (str.charAt(++i) !== \"-\" && i != str.length) {}\n        var buf = str.substring(start, i);\n        if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n          throw new Error(\"Illegal attachments\");\n        }\n        p.attachments = Number(buf);\n      }\n      // look up namespace (if any)\n      if (\"/\" === str.charAt(i + 1)) {\n        var _start = i + 1;\n        while (++i) {\n          var c = str.charAt(i);\n          if (\",\" === c) break;\n          if (i === str.length) break;\n        }\n        p.nsp = str.substring(_start, i);\n      } else {\n        p.nsp = \"/\";\n      }\n      // look up id\n      var next = str.charAt(i + 1);\n      if (\"\" !== next && Number(next) == next) {\n        var _start2 = i + 1;\n        while (++i) {\n          var _c = str.charAt(i);\n          if (null == _c || Number(_c) != _c) {\n            --i;\n            break;\n          }\n          if (i === str.length) break;\n        }\n        p.id = Number(str.substring(_start2, i + 1));\n      }\n      // look up json data\n      if (str.charAt(++i)) {\n        var payload = this.tryParse(str.substr(i));\n        if (Decoder.isPayloadValid(p.type, payload)) {\n          p.data = payload;\n        } else {\n          throw new Error(\"invalid payload\");\n        }\n      }\n      return p;\n    };\n    _proto2.tryParse = function tryParse(str) {\n      try {\n        return JSON.parse(str, this.reviver);\n      } catch (e) {\n        return false;\n      }\n    };\n    Decoder.isPayloadValid = function isPayloadValid(type, payload) {\n      switch (type) {\n        case PacketType.CONNECT:\n          return isObject(payload);\n        case PacketType.DISCONNECT:\n          return payload === undefined;\n        case PacketType.CONNECT_ERROR:\n          return typeof payload === \"string\" || isObject(payload);\n        case PacketType.EVENT:\n        case PacketType.BINARY_EVENT:\n          return Array.isArray(payload) && (typeof payload[0] === \"number\" || typeof payload[0] === \"string\" && RESERVED_EVENTS$1.indexOf(payload[0]) === -1);\n        case PacketType.ACK:\n        case PacketType.BINARY_ACK:\n          return Array.isArray(payload);\n      }\n    }\n    /**\n     * Deallocates a parser's resources\n     */;\n    _proto2.destroy = function destroy() {\n      if (this.reconstructor) {\n        this.reconstructor.finishedReconstruction();\n        this.reconstructor = null;\n      }\n    };\n    return Decoder;\n  }(Emitter);\n  /**\n   * A manager of a binary event's 'buffer sequence'. Should\n   * be constructed whenever a packet of type BINARY_EVENT is\n   * decoded.\n   *\n   * @param {Object} packet\n   * @return {BinaryReconstructor} initialized reconstructor\n   */\n  var BinaryReconstructor = /*#__PURE__*/function () {\n    function BinaryReconstructor(packet) {\n      this.packet = packet;\n      this.buffers = [];\n      this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    var _proto3 = BinaryReconstructor.prototype;\n    _proto3.takeBinaryData = function takeBinaryData(binData) {\n      this.buffers.push(binData);\n      if (this.buffers.length === this.reconPack.attachments) {\n        // done with buffer list\n        var packet = reconstructPacket(this.reconPack, this.buffers);\n        this.finishedReconstruction();\n        return packet;\n      }\n      return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */;\n    _proto3.finishedReconstruction = function finishedReconstruction() {\n      this.reconPack = null;\n      this.buffers = [];\n    };\n    return BinaryReconstructor;\n  }();\n  function isNamespaceValid(nsp) {\n    return typeof nsp === \"string\";\n  }\n  // see https://caniuse.com/mdn-javascript_builtins_number_isinteger\n  var isInteger = Number.isInteger || function (value) {\n    return typeof value === \"number\" && isFinite(value) && Math.floor(value) === value;\n  };\n  function isAckIdValid(id) {\n    return id === undefined || isInteger(id);\n  }\n  // see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\n  function isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n  }\n  function isDataValid(type, payload) {\n    switch (type) {\n      case PacketType.CONNECT:\n        return payload === undefined || isObject(payload);\n      case PacketType.DISCONNECT:\n        return payload === undefined;\n      case PacketType.EVENT:\n        return Array.isArray(payload) && (typeof payload[0] === \"number\" || typeof payload[0] === \"string\" && RESERVED_EVENTS$1.indexOf(payload[0]) === -1);\n      case PacketType.ACK:\n        return Array.isArray(payload);\n      case PacketType.CONNECT_ERROR:\n        return typeof payload === \"string\" || isObject(payload);\n      default:\n        return false;\n    }\n  }\n  function isPacketValid(packet) {\n    return isNamespaceValid(packet.nsp) && isAckIdValid(packet.id) && isDataValid(packet.type, packet.data);\n  }\n\n  var parser = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    protocol: protocol,\n    get PacketType () { return PacketType; },\n    Encoder: Encoder,\n    Decoder: Decoder,\n    isPacketValid: isPacketValid\n  });\n\n  function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n      obj.off(ev, fn);\n    };\n  }\n\n  var debug$2 = debugModule(\"socket.io-client:socket\"); // debug()\n  /**\n   * Internal events.\n   * These events can't be emitted by the user.\n   */\n  var RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1\n  });\n  /**\n   * A Socket is the fundamental class for interacting with the server.\n   *\n   * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n   *\n   * @example\n   * const socket = io();\n   *\n   * socket.on(\"connect\", () => {\n   *   console.log(\"connected\");\n   * });\n   *\n   * // send an event to the server\n   * socket.emit(\"foo\", \"bar\");\n   *\n   * socket.on(\"foobar\", () => {\n   *   // an event was received from the server\n   * });\n   *\n   * // upon disconnection\n   * socket.on(\"disconnect\", (reason) => {\n   *   console.log(`disconnected due to ${reason}`);\n   * });\n   */\n  var Socket = /*#__PURE__*/function (_Emitter) {\n    /**\n     * `Socket` constructor.\n     */\n    function Socket(io, nsp, opts) {\n      var _this;\n      _this = _Emitter.call(this) || this;\n      /**\n       * Whether the socket is currently connected to the server.\n       *\n       * @example\n       * const socket = io();\n       *\n       * socket.on(\"connect\", () => {\n       *   console.log(socket.connected); // true\n       * });\n       *\n       * socket.on(\"disconnect\", () => {\n       *   console.log(socket.connected); // false\n       * });\n       */\n      _this.connected = false;\n      /**\n       * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n       * be transmitted by the server.\n       */\n      _this.recovered = false;\n      /**\n       * Buffer for packets received before the CONNECT packet\n       */\n      _this.receiveBuffer = [];\n      /**\n       * Buffer for packets that will be sent once the socket is connected\n       */\n      _this.sendBuffer = [];\n      /**\n       * The queue of packets to be sent with retry in case of failure.\n       *\n       * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n       * @private\n       */\n      _this._queue = [];\n      /**\n       * A sequence to generate the ID of the {@link QueuedPacket}.\n       * @private\n       */\n      _this._queueSeq = 0;\n      _this.ids = 0;\n      /**\n       * A map containing acknowledgement handlers.\n       *\n       * The `withError` attribute is used to differentiate handlers that accept an error as first argument:\n       *\n       * - `socket.emit(\"test\", (err, value) => { ... })` with `ackTimeout` option\n       * - `socket.timeout(5000).emit(\"test\", (err, value) => { ... })`\n       * - `const value = await socket.emitWithAck(\"test\")`\n       *\n       * From those that don't:\n       *\n       * - `socket.emit(\"test\", (value) => { ... });`\n       *\n       * In the first case, the handlers will be called with an error when:\n       *\n       * - the timeout is reached\n       * - the socket gets disconnected\n       *\n       * In the second case, the handlers will be simply discarded upon disconnection, since the client will never receive\n       * an acknowledgement from the server.\n       *\n       * @private\n       */\n      _this.acks = {};\n      _this.flags = {};\n      _this.io = io;\n      _this.nsp = nsp;\n      if (opts && opts.auth) {\n        _this.auth = opts.auth;\n      }\n      _this._opts = _extends({}, opts);\n      if (_this.io._autoConnect) _this.open();\n      return _this;\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    _inheritsLoose(Socket, _Emitter);\n    var _proto = Socket.prototype;\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    _proto.subEvents = function subEvents() {\n      if (this.subs) return;\n      var io = this.io;\n      this.subs = [on(io, \"open\", this.onopen.bind(this)), on(io, \"packet\", this.onpacket.bind(this)), on(io, \"error\", this.onerror.bind(this)), on(io, \"close\", this.onclose.bind(this))];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */;\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    _proto.connect = function connect() {\n      if (this.connected) return this;\n      this.subEvents();\n      if (!this.io[\"_reconnecting\"]) this.io.open(); // ensure open\n      if (\"open\" === this.io._readyState) this.onopen();\n      return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */;\n    _proto.open = function open() {\n      return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */;\n    _proto.send = function send() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      args.unshift(\"message\");\n      this.emit.apply(this, args);\n      return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */;\n    _proto.emit = function emit(ev) {\n      var _a, _b, _c;\n      if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n        throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n      }\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n      args.unshift(ev);\n      if (this._opts.retries && !this.flags.fromQueue && !this.flags[\"volatile\"]) {\n        this._addToQueue(args);\n        return this;\n      }\n      var packet = {\n        type: PacketType.EVENT,\n        data: args\n      };\n      packet.options = {};\n      packet.options.compress = this.flags.compress !== false;\n      // event ack callback\n      if (\"function\" === typeof args[args.length - 1]) {\n        var id = this.ids++;\n        debug$2(\"emitting packet with ack id %d\", id);\n        var ack = args.pop();\n        this._registerAckCallback(id, ack);\n        packet.id = id;\n      }\n      var isTransportWritable = (_b = (_a = this.io.engine) === null || _a === void 0 ? void 0 : _a.transport) === null || _b === void 0 ? void 0 : _b.writable;\n      var isConnected = this.connected && !((_c = this.io.engine) === null || _c === void 0 ? void 0 : _c._hasPingExpired());\n      var discardPacket = this.flags[\"volatile\"] && !isTransportWritable;\n      if (discardPacket) {\n        debug$2(\"discard packet as the transport is not currently writable\");\n      } else if (isConnected) {\n        this.notifyOutgoingListeners(packet);\n        this.packet(packet);\n      } else {\n        this.sendBuffer.push(packet);\n      }\n      this.flags = {};\n      return this;\n    }\n    /**\n     * @private\n     */;\n    _proto._registerAckCallback = function _registerAckCallback(id, ack) {\n      var _this2 = this;\n      var _a;\n      var timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n      if (timeout === undefined) {\n        this.acks[id] = ack;\n        return;\n      }\n      // @ts-ignore\n      var timer = this.io.setTimeoutFn(function () {\n        delete _this2.acks[id];\n        for (var i = 0; i < _this2.sendBuffer.length; i++) {\n          if (_this2.sendBuffer[i].id === id) {\n            debug$2(\"removing packet with ack id %d from the buffer\", id);\n            _this2.sendBuffer.splice(i, 1);\n          }\n        }\n        debug$2(\"event with ack id %d has timed out after %d ms\", id, timeout);\n        ack.call(_this2, new Error(\"operation has timed out\"));\n      }, timeout);\n      var fn = function fn() {\n        // @ts-ignore\n        _this2.io.clearTimeoutFn(timer);\n        for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          args[_key3] = arguments[_key3];\n        }\n        ack.apply(_this2, args);\n      };\n      fn.withError = true;\n      this.acks[id] = fn;\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */;\n    _proto.emitWithAck = function emitWithAck(ev) {\n      var _this3 = this;\n      for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n        args[_key4 - 1] = arguments[_key4];\n      }\n      return new Promise(function (resolve, reject) {\n        var fn = function fn(arg1, arg2) {\n          return arg1 ? reject(arg1) : resolve(arg2);\n        };\n        fn.withError = true;\n        args.push(fn);\n        _this3.emit.apply(_this3, [ev].concat(args));\n      });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */;\n    _proto._addToQueue = function _addToQueue(args) {\n      var _this4 = this;\n      var ack;\n      if (typeof args[args.length - 1] === \"function\") {\n        ack = args.pop();\n      }\n      var packet = {\n        id: this._queueSeq++,\n        tryCount: 0,\n        pending: false,\n        args: args,\n        flags: _extends({\n          fromQueue: true\n        }, this.flags)\n      };\n      args.push(function (err) {\n        if (packet !== _this4._queue[0]) {\n          // the packet has already been acknowledged\n          return;\n        }\n        var hasError = err !== null;\n        if (hasError) {\n          if (packet.tryCount > _this4._opts.retries) {\n            debug$2(\"packet [%d] is discarded after %d tries\", packet.id, packet.tryCount);\n            _this4._queue.shift();\n            if (ack) {\n              ack(err);\n            }\n          }\n        } else {\n          debug$2(\"packet [%d] was successfully sent\", packet.id);\n          _this4._queue.shift();\n          if (ack) {\n            for (var _len5 = arguments.length, responseArgs = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n              responseArgs[_key5 - 1] = arguments[_key5];\n            }\n            ack.apply(void 0, [null].concat(responseArgs));\n          }\n        }\n        packet.pending = false;\n        return _this4._drainQueue();\n      });\n      this._queue.push(packet);\n      this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */;\n    _proto._drainQueue = function _drainQueue() {\n      var force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      debug$2(\"draining queue\");\n      if (!this.connected || this._queue.length === 0) {\n        return;\n      }\n      var packet = this._queue[0];\n      if (packet.pending && !force) {\n        debug$2(\"packet [%d] has already been sent and is waiting for an ack\", packet.id);\n        return;\n      }\n      packet.pending = true;\n      packet.tryCount++;\n      debug$2(\"sending packet [%d] (try n%d)\", packet.id, packet.tryCount);\n      this.flags = packet.flags;\n      this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */;\n    _proto.packet = function packet(_packet) {\n      _packet.nsp = this.nsp;\n      this.io._packet(_packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */;\n    _proto.onopen = function onopen() {\n      var _this5 = this;\n      debug$2(\"transport is open - connecting\");\n      if (typeof this.auth == \"function\") {\n        this.auth(function (data) {\n          _this5._sendConnectPacket(data);\n        });\n      } else {\n        this._sendConnectPacket(this.auth);\n      }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */;\n    _proto._sendConnectPacket = function _sendConnectPacket(data) {\n      this.packet({\n        type: PacketType.CONNECT,\n        data: this._pid ? _extends({\n          pid: this._pid,\n          offset: this._lastOffset\n        }, data) : data\n      });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */;\n    _proto.onerror = function onerror(err) {\n      if (!this.connected) {\n        this.emitReserved(\"connect_error\", err);\n      }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */;\n    _proto.onclose = function onclose(reason, description) {\n      debug$2(\"close (%s)\", reason);\n      this.connected = false;\n      delete this.id;\n      this.emitReserved(\"disconnect\", reason, description);\n      this._clearAcks();\n    }\n    /**\n     * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from\n     * the server.\n     *\n     * @private\n     */;\n    _proto._clearAcks = function _clearAcks() {\n      var _this6 = this;\n      Object.keys(this.acks).forEach(function (id) {\n        var isBuffered = _this6.sendBuffer.some(function (packet) {\n          return String(packet.id) === id;\n        });\n        if (!isBuffered) {\n          // note: handlers that do not accept an error as first argument are ignored here\n          var ack = _this6.acks[id];\n          delete _this6.acks[id];\n          if (ack.withError) {\n            ack.call(_this6, new Error(\"socket has been disconnected\"));\n          }\n        }\n      });\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */;\n    _proto.onpacket = function onpacket(packet) {\n      var sameNamespace = packet.nsp === this.nsp;\n      if (!sameNamespace) return;\n      switch (packet.type) {\n        case PacketType.CONNECT:\n          if (packet.data && packet.data.sid) {\n            this.onconnect(packet.data.sid, packet.data.pid);\n          } else {\n            this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n          }\n          break;\n        case PacketType.EVENT:\n        case PacketType.BINARY_EVENT:\n          this.onevent(packet);\n          break;\n        case PacketType.ACK:\n        case PacketType.BINARY_ACK:\n          this.onack(packet);\n          break;\n        case PacketType.DISCONNECT:\n          this.ondisconnect();\n          break;\n        case PacketType.CONNECT_ERROR:\n          this.destroy();\n          var err = new Error(packet.data.message);\n          // @ts-ignore\n          err.data = packet.data.data;\n          this.emitReserved(\"connect_error\", err);\n          break;\n      }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */;\n    _proto.onevent = function onevent(packet) {\n      var args = packet.data || [];\n      debug$2(\"emitting event %j\", args);\n      if (null != packet.id) {\n        debug$2(\"attaching ack callback to event\");\n        args.push(this.ack(packet.id));\n      }\n      if (this.connected) {\n        this.emitEvent(args);\n      } else {\n        this.receiveBuffer.push(Object.freeze(args));\n      }\n    };\n    _proto.emitEvent = function emitEvent(args) {\n      if (this._anyListeners && this._anyListeners.length) {\n        var listeners = this._anyListeners.slice();\n        var _iterator = _createForOfIteratorHelper(listeners),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var listener = _step.value;\n            listener.apply(this, args);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n      _Emitter.prototype.emit.apply(this, args);\n      if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n        this._lastOffset = args[args.length - 1];\n      }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */;\n    _proto.ack = function ack(id) {\n      var self = this;\n      var sent = false;\n      return function () {\n        // prevent double callbacks\n        if (sent) return;\n        sent = true;\n        for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n          args[_key6] = arguments[_key6];\n        }\n        debug$2(\"sending ack %j\", args);\n        self.packet({\n          type: PacketType.ACK,\n          id: id,\n          data: args\n        });\n      };\n    }\n    /**\n     * Called upon a server acknowledgement.\n     *\n     * @param packet\n     * @private\n     */;\n    _proto.onack = function onack(packet) {\n      var ack = this.acks[packet.id];\n      if (typeof ack !== \"function\") {\n        debug$2(\"bad ack %s\", packet.id);\n        return;\n      }\n      delete this.acks[packet.id];\n      debug$2(\"calling ack %s with %j\", packet.id, packet.data);\n      // @ts-ignore FIXME ack is incorrectly inferred as 'never'\n      if (ack.withError) {\n        packet.data.unshift(null);\n      }\n      // @ts-ignore\n      ack.apply(this, packet.data);\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */;\n    _proto.onconnect = function onconnect(id, pid) {\n      debug$2(\"socket connected with id %s\", id);\n      this.id = id;\n      this.recovered = pid && this._pid === pid;\n      this._pid = pid; // defined only if connection state recovery is enabled\n      this.connected = true;\n      this.emitBuffered();\n      this.emitReserved(\"connect\");\n      this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */;\n    _proto.emitBuffered = function emitBuffered() {\n      var _this7 = this;\n      this.receiveBuffer.forEach(function (args) {\n        return _this7.emitEvent(args);\n      });\n      this.receiveBuffer = [];\n      this.sendBuffer.forEach(function (packet) {\n        _this7.notifyOutgoingListeners(packet);\n        _this7.packet(packet);\n      });\n      this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */;\n    _proto.ondisconnect = function ondisconnect() {\n      debug$2(\"server disconnect (%s)\", this.nsp);\n      this.destroy();\n      this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */;\n    _proto.destroy = function destroy() {\n      if (this.subs) {\n        // clean subscriptions to avoid reconnections\n        this.subs.forEach(function (subDestroy) {\n          return subDestroy();\n        });\n        this.subs = undefined;\n      }\n      this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */;\n    _proto.disconnect = function disconnect() {\n      if (this.connected) {\n        debug$2(\"performing disconnect (%s)\", this.nsp);\n        this.packet({\n          type: PacketType.DISCONNECT\n        });\n      }\n      // remove socket from pool\n      this.destroy();\n      if (this.connected) {\n        // fire events\n        this.onclose(\"io client disconnect\");\n      }\n      return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */;\n    _proto.close = function close() {\n      return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */;\n    _proto.compress = function compress(_compress) {\n      this.flags.compress = _compress;\n      return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */;\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    _proto.timeout = function timeout(_timeout) {\n      this.flags.timeout = _timeout;\n      return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */;\n    _proto.onAny = function onAny(listener) {\n      this._anyListeners = this._anyListeners || [];\n      this._anyListeners.push(listener);\n      return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */;\n    _proto.prependAny = function prependAny(listener) {\n      this._anyListeners = this._anyListeners || [];\n      this._anyListeners.unshift(listener);\n      return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */;\n    _proto.offAny = function offAny(listener) {\n      if (!this._anyListeners) {\n        return this;\n      }\n      if (listener) {\n        var listeners = this._anyListeners;\n        for (var i = 0; i < listeners.length; i++) {\n          if (listener === listeners[i]) {\n            listeners.splice(i, 1);\n            return this;\n          }\n        }\n      } else {\n        this._anyListeners = [];\n      }\n      return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */;\n    _proto.listenersAny = function listenersAny() {\n      return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */;\n    _proto.onAnyOutgoing = function onAnyOutgoing(listener) {\n      this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n      this._anyOutgoingListeners.push(listener);\n      return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */;\n    _proto.prependAnyOutgoing = function prependAnyOutgoing(listener) {\n      this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n      this._anyOutgoingListeners.unshift(listener);\n      return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */;\n    _proto.offAnyOutgoing = function offAnyOutgoing(listener) {\n      if (!this._anyOutgoingListeners) {\n        return this;\n      }\n      if (listener) {\n        var listeners = this._anyOutgoingListeners;\n        for (var i = 0; i < listeners.length; i++) {\n          if (listener === listeners[i]) {\n            listeners.splice(i, 1);\n            return this;\n          }\n        }\n      } else {\n        this._anyOutgoingListeners = [];\n      }\n      return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */;\n    _proto.listenersAnyOutgoing = function listenersAnyOutgoing() {\n      return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */;\n    _proto.notifyOutgoingListeners = function notifyOutgoingListeners(packet) {\n      if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n        var listeners = this._anyOutgoingListeners.slice();\n        var _iterator2 = _createForOfIteratorHelper(listeners),\n          _step2;\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var listener = _step2.value;\n            listener.apply(this, packet.data);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      }\n    };\n    return _createClass(Socket, [{\n      key: \"disconnected\",\n      get: function get() {\n        return !this.connected;\n      }\n    }, {\n      key: \"active\",\n      get: function get() {\n        return !!this.subs;\n      }\n    }, {\n      key: \"volatile\",\n      get: function get() {\n        this.flags[\"volatile\"] = true;\n        return this;\n      }\n    }]);\n  }(Emitter);\n\n  /**\n   * Initialize backoff timer with `opts`.\n   *\n   * - `min` initial timeout in milliseconds [100]\n   * - `max` max timeout [10000]\n   * - `jitter` [0]\n   * - `factor` [2]\n   *\n   * @param {Object} opts\n   * @api public\n   */\n  function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n  }\n  /**\n   * Return the backoff duration.\n   *\n   * @return {Number}\n   * @api public\n   */\n  Backoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n      var rand = Math.random();\n      var deviation = Math.floor(rand * this.jitter * ms);\n      ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n  };\n  /**\n   * Reset the number of attempts.\n   *\n   * @api public\n   */\n  Backoff.prototype.reset = function () {\n    this.attempts = 0;\n  };\n  /**\n   * Set the minimum duration\n   *\n   * @api public\n   */\n  Backoff.prototype.setMin = function (min) {\n    this.ms = min;\n  };\n  /**\n   * Set the maximum duration\n   *\n   * @api public\n   */\n  Backoff.prototype.setMax = function (max) {\n    this.max = max;\n  };\n  /**\n   * Set the jitter\n   *\n   * @api public\n   */\n  Backoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n  };\n\n  var debug$1 = debugModule(\"socket.io-client:manager\"); // debug()\n  var Manager = /*#__PURE__*/function (_Emitter) {\n    function Manager(uri, opts) {\n      var _this;\n      var _a;\n      _this = _Emitter.call(this) || this;\n      _this.nsps = {};\n      _this.subs = [];\n      if (uri && \"object\" === _typeof(uri)) {\n        opts = uri;\n        uri = undefined;\n      }\n      opts = opts || {};\n      opts.path = opts.path || \"/socket.io\";\n      _this.opts = opts;\n      installTimerFunctions(_this, opts);\n      _this.reconnection(opts.reconnection !== false);\n      _this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n      _this.reconnectionDelay(opts.reconnectionDelay || 1000);\n      _this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n      _this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n      _this.backoff = new Backoff({\n        min: _this.reconnectionDelay(),\n        max: _this.reconnectionDelayMax(),\n        jitter: _this.randomizationFactor()\n      });\n      _this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n      _this._readyState = \"closed\";\n      _this.uri = uri;\n      var _parser = opts.parser || parser;\n      _this.encoder = new _parser.Encoder();\n      _this.decoder = new _parser.Decoder();\n      _this._autoConnect = opts.autoConnect !== false;\n      if (_this._autoConnect) _this.open();\n      return _this;\n    }\n    _inheritsLoose(Manager, _Emitter);\n    var _proto = Manager.prototype;\n    _proto.reconnection = function reconnection(v) {\n      if (!arguments.length) return this._reconnection;\n      this._reconnection = !!v;\n      if (!v) {\n        this.skipReconnect = true;\n      }\n      return this;\n    };\n    _proto.reconnectionAttempts = function reconnectionAttempts(v) {\n      if (v === undefined) return this._reconnectionAttempts;\n      this._reconnectionAttempts = v;\n      return this;\n    };\n    _proto.reconnectionDelay = function reconnectionDelay(v) {\n      var _a;\n      if (v === undefined) return this._reconnectionDelay;\n      this._reconnectionDelay = v;\n      (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n      return this;\n    };\n    _proto.randomizationFactor = function randomizationFactor(v) {\n      var _a;\n      if (v === undefined) return this._randomizationFactor;\n      this._randomizationFactor = v;\n      (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n      return this;\n    };\n    _proto.reconnectionDelayMax = function reconnectionDelayMax(v) {\n      var _a;\n      if (v === undefined) return this._reconnectionDelayMax;\n      this._reconnectionDelayMax = v;\n      (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n      return this;\n    };\n    _proto.timeout = function timeout(v) {\n      if (!arguments.length) return this._timeout;\n      this._timeout = v;\n      return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */;\n    _proto.maybeReconnectOnOpen = function maybeReconnectOnOpen() {\n      // Only try to reconnect if it's the first time we're connecting\n      if (!this._reconnecting && this._reconnection && this.backoff.attempts === 0) {\n        // keeps reconnection from firing twice for the same reconnection loop\n        this.reconnect();\n      }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */;\n    _proto.open = function open(fn) {\n      var _this2 = this;\n      debug$1(\"readyState %s\", this._readyState);\n      if (~this._readyState.indexOf(\"open\")) return this;\n      debug$1(\"opening %s\", this.uri);\n      this.engine = new Socket$1(this.uri, this.opts);\n      var socket = this.engine;\n      var self = this;\n      this._readyState = \"opening\";\n      this.skipReconnect = false;\n      // emit `open`\n      var openSubDestroy = on(socket, \"open\", function () {\n        self.onopen();\n        fn && fn();\n      });\n      var onError = function onError(err) {\n        debug$1(\"error\");\n        _this2.cleanup();\n        _this2._readyState = \"closed\";\n        _this2.emitReserved(\"error\", err);\n        if (fn) {\n          fn(err);\n        } else {\n          // Only do this if there is no fn to handle the error\n          _this2.maybeReconnectOnOpen();\n        }\n      };\n      // emit `error`\n      var errorSub = on(socket, \"error\", onError);\n      if (false !== this._timeout) {\n        var timeout = this._timeout;\n        debug$1(\"connect attempt will timeout after %d\", timeout);\n        // set timer\n        var timer = this.setTimeoutFn(function () {\n          debug$1(\"connect attempt timed out after %d\", timeout);\n          openSubDestroy();\n          onError(new Error(\"timeout\"));\n          socket.close();\n        }, timeout);\n        if (this.opts.autoUnref) {\n          timer.unref();\n        }\n        this.subs.push(function () {\n          _this2.clearTimeoutFn(timer);\n        });\n      }\n      this.subs.push(openSubDestroy);\n      this.subs.push(errorSub);\n      return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */;\n    _proto.connect = function connect(fn) {\n      return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */;\n    _proto.onopen = function onopen() {\n      debug$1(\"open\");\n      // clear old subs\n      this.cleanup();\n      // mark as open\n      this._readyState = \"open\";\n      this.emitReserved(\"open\");\n      // add new subs\n      var socket = this.engine;\n      this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)),\n      // @ts-ignore\n      on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */;\n    _proto.onping = function onping() {\n      this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */;\n    _proto.ondata = function ondata(data) {\n      try {\n        this.decoder.add(data);\n      } catch (e) {\n        this.onclose(\"parse error\", e);\n      }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */;\n    _proto.ondecoded = function ondecoded(packet) {\n      var _this3 = this;\n      // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n      nextTick(function () {\n        _this3.emitReserved(\"packet\", packet);\n      }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */;\n    _proto.onerror = function onerror(err) {\n      debug$1(\"error\", err);\n      this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */;\n    _proto.socket = function socket(nsp, opts) {\n      var socket = this.nsps[nsp];\n      if (!socket) {\n        socket = new Socket(this, nsp, opts);\n        this.nsps[nsp] = socket;\n      } else if (this._autoConnect && !socket.active) {\n        socket.connect();\n      }\n      return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */;\n    _proto._destroy = function _destroy(socket) {\n      var nsps = Object.keys(this.nsps);\n      for (var _i = 0, _nsps = nsps; _i < _nsps.length; _i++) {\n        var nsp = _nsps[_i];\n        var _socket = this.nsps[nsp];\n        if (_socket.active) {\n          debug$1(\"socket %s is still active, skipping close\", nsp);\n          return;\n        }\n      }\n      this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */;\n    _proto._packet = function _packet(packet) {\n      debug$1(\"writing packet %j\", packet);\n      var encodedPackets = this.encoder.encode(packet);\n      for (var i = 0; i < encodedPackets.length; i++) {\n        this.engine.write(encodedPackets[i], packet.options);\n      }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */;\n    _proto.cleanup = function cleanup() {\n      debug$1(\"cleanup\");\n      this.subs.forEach(function (subDestroy) {\n        return subDestroy();\n      });\n      this.subs.length = 0;\n      this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */;\n    _proto._close = function _close() {\n      debug$1(\"disconnect\");\n      this.skipReconnect = true;\n      this._reconnecting = false;\n      this.onclose(\"forced close\");\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */;\n    _proto.disconnect = function disconnect() {\n      return this._close();\n    }\n    /**\n     * Called when:\n     *\n     * - the low-level engine is closed\n     * - the parser encountered a badly formatted packet\n     * - all sockets are disconnected\n     *\n     * @private\n     */;\n    _proto.onclose = function onclose(reason, description) {\n      var _a;\n      debug$1(\"closed due to %s\", reason);\n      this.cleanup();\n      (_a = this.engine) === null || _a === void 0 ? void 0 : _a.close();\n      this.backoff.reset();\n      this._readyState = \"closed\";\n      this.emitReserved(\"close\", reason, description);\n      if (this._reconnection && !this.skipReconnect) {\n        this.reconnect();\n      }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */;\n    _proto.reconnect = function reconnect() {\n      var _this4 = this;\n      if (this._reconnecting || this.skipReconnect) return this;\n      var self = this;\n      if (this.backoff.attempts >= this._reconnectionAttempts) {\n        debug$1(\"reconnect failed\");\n        this.backoff.reset();\n        this.emitReserved(\"reconnect_failed\");\n        this._reconnecting = false;\n      } else {\n        var delay = this.backoff.duration();\n        debug$1(\"will wait %dms before reconnect attempt\", delay);\n        this._reconnecting = true;\n        var timer = this.setTimeoutFn(function () {\n          if (self.skipReconnect) return;\n          debug$1(\"attempting reconnect\");\n          _this4.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n          // check again for the case socket closed in above events\n          if (self.skipReconnect) return;\n          self.open(function (err) {\n            if (err) {\n              debug$1(\"reconnect attempt error\");\n              self._reconnecting = false;\n              self.reconnect();\n              _this4.emitReserved(\"reconnect_error\", err);\n            } else {\n              debug$1(\"reconnect success\");\n              self.onreconnect();\n            }\n          });\n        }, delay);\n        if (this.opts.autoUnref) {\n          timer.unref();\n        }\n        this.subs.push(function () {\n          _this4.clearTimeoutFn(timer);\n        });\n      }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */;\n    _proto.onreconnect = function onreconnect() {\n      var attempt = this.backoff.attempts;\n      this._reconnecting = false;\n      this.backoff.reset();\n      this.emitReserved(\"reconnect\", attempt);\n    };\n    return Manager;\n  }(Emitter);\n\n  var debug = debugModule(\"socket.io-client\"); // debug()\n  /**\n   * Managers cache.\n   */\n  var cache = {};\n  function lookup(uri, opts) {\n    if (_typeof(uri) === \"object\") {\n      opts = uri;\n      uri = undefined;\n    }\n    opts = opts || {};\n    var parsed = url(uri, opts.path || \"/socket.io\");\n    var source = parsed.source;\n    var id = parsed.id;\n    var path = parsed.path;\n    var sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    var newConnection = opts.forceNew || opts[\"force new connection\"] || false === opts.multiplex || sameNamespace;\n    var io;\n    if (newConnection) {\n      debug(\"ignoring socket cache for %s\", source);\n      io = new Manager(source, opts);\n    } else {\n      if (!cache[id]) {\n        debug(\"new io instance for %s\", source);\n        cache[id] = new Manager(source, opts);\n      }\n      io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n      opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n  }\n  // so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n  // namespace (e.g. `io.connect(...)`), for backward compatibility\n  _extends(lookup, {\n    Manager: Manager,\n    Socket: Socket,\n    io: lookup,\n    connect: lookup\n  });\n\n  return lookup;\n\n}));\n//# sourceMappingURL=socket.io.js.map\n\nvar $;\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  if (typeof $ == \"undefined\") {\n    $ = jQuery.noConflict();\n  }\n  $(document).ready(daReadyFunction);\n});\n\nvar daAudioContext = null;\nvar daSocket;\nvar daSoundBuffer = Object();\nvar daShowingNotif = false;\nvar daUpdatedSessions = Object();\nvar daSessions = Object();\nvar daAvailRoles = Object();\nvar daChatPartners = Object();\nvar daPhonePartners = Object();\nvar daNewPhonePartners = Object();\nvar daTermPhonePartners = Object();\nvar daFirstTime = 1;\nvar daUpdateMonitorInterval = null;\nvar daNotificationsEnabled = false;\nvar daControlling = Object();\nwindow.daGotConfirmation = function (key) {\n  //console.log(\"Got confirmation in parent for key \" + key);\n  // daControlling[key] = 2;\n  // var skey = key.replace(/(:|\\.|\\[|\\]|,|=|\\/)/g, '\\\\$1');\n  // $(\"#listelement\" + skey).find(\"a\").each(function(){\n  //     if ($(this).data('name') == \"stopcontrolling\"){\n  //         $(this).removeClass('dainvisible');\n  //         console.log(\"Found it\");\n  //     }\n  // });\n};\nfunction daFaviconRegular() {\n  var link =\n    document.querySelector(\"link[rel*='shortcut icon'\") ||\n    document.createElement(\"link\");\n  link.type = \"image/x-icon\";\n  link.rel = \"shortcut icon\";\n  link.href = daFaviconIcoUrl;\n  document.getElementsByTagName(\"head\")[0].appendChild(link);\n}\nfunction daFaviconAlert() {\n  var link =\n    document.querySelector(\"link[rel*='shortcut icon'\") ||\n    document.createElement(\"link\");\n  link.type = \"image/x-icon\";\n  link.rel = \"shortcut icon\";\n  link.href = daChatIcoUrl;\n  document.getElementsByTagName(\"head\")[0].appendChild(link);\n}\nfunction daTopMessage(message) {\n  var newDiv = document.createElement(\"div\");\n  $(newDiv).addClass(\n    \"datop-alert col-xs-10 col-sm-7 col-md-6 col-lg-5 dacol-centered\",\n  );\n  $(newDiv).html(message);\n  $(newDiv).css(\"display\", \"none\");\n  $(newDiv).appendTo($(daTargetDiv));\n  $(newDiv).slideDown();\n  setTimeout(function () {\n    $(newDiv).slideUp(300, function () {\n      $(newDiv).remove();\n    });\n  }, 2000);\n}\nwindow.daAbortControlling = function (key) {\n  daTopMessage(daAlreadyControlled);\n  daStopControlling(key);\n};\nwindow.daStopControlling = function (key) {\n  //console.log(\"Got daStopControlling in parent for key \" + key);\n  // if (daControlling.hasOwnProperty(key)){\n  //   delete daControlling[key];\n  // }\n  var skey = key.replace(/(:|\\.|\\[|\\]|,|=|\\/)/g, \"\\\\$1\");\n  $(\"#listelement\" + skey)\n    .find(\"a\")\n    .each(function () {\n      if ($(this).data(\"name\") == \"stopcontrolling\") {\n        $(this).click();\n        //console.log(\"Found it\");\n      }\n    });\n};\nfunction daOnError() {\n  console.log(\"daOnError\");\n}\nfunction daLoadSoundBuffer(key, url_a, url_b) {\n  //console.log(\"daLoadSoundBuffer\");\n  var pos = 0;\n  if (daAudioContext == null) {\n    return;\n  }\n  var request = new XMLHttpRequest();\n  request.open(\"GET\", url_a, true);\n  request.responseType = \"arraybuffer\";\n  request.onload = function () {\n    daAudioContext.decodeAudioData(\n      request.response,\n      function (buffer) {\n        if (!buffer) {\n          if (pos == 1) {\n            console.error(\"daLoadSoundBuffer: error decoding file data\");\n            return;\n          } else {\n            pos = 1;\n            console.info(\n              \"daLoadSoundBuffer: error decoding file data, trying next source\",\n            );\n            request.open(\"GET\", url_b, true);\n            return request.send();\n          }\n        }\n        daSoundBuffer[key] = buffer;\n      },\n      function (error) {\n        if (pos == 1) {\n          console.error(\"daLoadSoundBuffer: decodeAudioData error\");\n          return;\n        } else {\n          pos = 1;\n          console.info(\n            \"daLoadSoundBuffer: decodeAudioData error, trying next source\",\n          );\n          request.open(\"GET\", url_b, true);\n          return request.send();\n        }\n      },\n    );\n  };\n  request.send();\n}\nfunction daPlaySound(key) {\n  //console.log(\"daPlaySound\");\n  var buffer = daSoundBuffer[key];\n  if (!daAudioContext || !buffer) {\n    return;\n  }\n  var source = daAudioContext.createBufferSource();\n  source.buffer = buffer;\n  source.connect(daAudioContext.destination);\n  source.start(0);\n}\nfunction daCheckNotifications() {\n  //console.log(\"daCheckNotifications\");\n  if (daNotificationsEnabled) {\n    return;\n  }\n  if (!(\"Notification\" in window)) {\n    daNotificationsEnabled = false;\n    return;\n  }\n  if (Notification.permission === \"granted\") {\n    daNotificationsEnabled = true;\n    return;\n  }\n  if (Notification.permission !== \"denied\") {\n    Notification.requestPermission(function (permission) {\n      if (permission === \"granted\") {\n        daNotificationsEnabled = true;\n      }\n    });\n  }\n}\nfunction daNotifyOperator(key, mode, message) {\n  //console.log(\"daNotifyOperator: \" + key + \" \" + mode + \" \" + message);\n  var skey = key.replace(/(:|\\.|\\[|\\]|,|=|\\/)/g, \"\\\\$1\");\n  if (mode == \"chat\") {\n    daPlaySound(\"newmessage\");\n  } else {\n    daPlaySound(\"newconversation\");\n  }\n  if (\n    $(\"#listelement\" + skey).offset().top >\n    $(window).scrollTop() + $(window).height()\n  ) {\n    if (mode == \"chat\") {\n      $(\"#chat-message-below\").html(daNewMessageBelow);\n    } else {\n      $(\"#chat-message-below\").html(daNewConversationBelow);\n    }\n    //$(\"#chat-message-below\").data('key', key);\n    $(\"#chat-message-below\").slideDown();\n    daShowingNotif = true;\n    daMarkAsUpdated(key);\n  } else if (\n    $(\"#listelement\" + skey).offset().top + $(\"#listelement\" + skey).height() <\n    $(window).scrollTop() + 32\n  ) {\n    if (mode == \"chat\") {\n      $(\"#chat-message-above\").html(daNewMessageAbove);\n    } else {\n      $(\"#chat-message-above\").html(daNewConversationAbove);\n    }\n    //$(\"#chat-message-above\").data('key', key);\n    $(\"#chat-message-above\").slideDown();\n    daShowingNotif = true;\n    daMarkAsUpdated(key);\n  } else {\n    //console.log(\"It is visible\");\n  }\n  if (!daNotificationsEnabled) {\n    //console.log(\"Browser will not enable notifications\")\n    return;\n  }\n  if (!(\"Notification\" in window)) {\n    return;\n  }\n  if (Notification.permission === \"granted\") {\n    var notification = new Notification(message);\n  } else if (Notification.permission !== \"denied\") {\n    Notification.requestPermission(function (permission) {\n      if (permission === \"granted\") {\n        var notification = new Notification(message);\n        daNotificationsEnabled = true;\n      }\n    });\n  }\n}\nfunction daPhoneNumberOk() {\n  //console.log(\"daPhoneNumberOk\");\n  var phoneNumber = $(\"#daPhoneNumber\").val();\n  if (phoneNumber == \"\" || phoneNumber.match(/^\\+?[1-9]\\d{1,14}$/)) {\n    return true;\n  } else {\n    return false;\n  }\n}\nfunction daCheckPhone() {\n  //console.log(\"daCheckPhone\");\n  $(\"#daPhoneNumber\").val($(\"#daPhoneNumber\").val().replace(/ \\-/g, \"\"));\n  var the_number = $(\"#daPhoneNumber\").val();\n  if (the_number != \"\" && the_number[0] != \"+\") {\n    $(\"#daPhoneNumber\").val(\"+\" + the_number);\n  }\n  if (daPhoneNumberOk()) {\n    $(\"#daPhoneNumber\").removeClass(\"is-invalid\");\n    $(\"#daPhoneError\").addClass(\"dainvisible\");\n    daPhoneNumber = $(\"#daPhoneNumber\").val();\n    if (daPhoneNumber == \"\") {\n      daPhoneNumber = null;\n    } else {\n      $(\".phone\").removeClass(\"dainvisible\");\n    }\n    $(\"#daPhoneSaved\").removeClass(\"dainvisible\");\n    setTimeout(function () {\n      $(\"#daPhoneSaved\").addClass(\"dainvisible\");\n    }, 2000);\n  } else {\n    $(\"#daPhoneNumber\").addClass(\"is-invalid\");\n    $(\"#daPhoneError\").removeClass(\"dainvisible\");\n    daPhoneNumber = null;\n    $(\".phone\").addClass(\"dainvisible\");\n  }\n}\nfunction daAllSessions(uid, yaml_filename) {\n  //console.log(\"daAllSessions\");\n  var prefix = \"da:session:uid:\" + uid + \":i:\" + yaml_filename + \":userid:\";\n  var output = Array();\n  for (var key in daSessions) {\n    if (daSessions.hasOwnProperty(key) && key.indexOf(prefix) == 0) {\n      output.push(key);\n    }\n  }\n  return output;\n}\nfunction daScrollChat(key) {\n  var chatScroller = $(key).find(\"ul\").first();\n  if (chatScroller.length) {\n    var height = chatScroller[0].scrollHeight;\n    chatScroller.animate({ scrollTop: height }, 800);\n  } else {\n    console.log(\"daScrollChat: error\");\n  }\n}\nfunction daScrollChatFast(key) {\n  var chatScroller = $(key).find(\"ul\").first();\n  if (chatScroller.length) {\n    var height = chatScroller[0].scrollHeight;\n    //console.log(\"Scrolling to \" + height + \" where there are \" + chatScroller[0].childElementCount + \" children\");\n    chatScroller.scrollTop(height);\n  } else {\n    console.log(\"daScrollChatFast: error\");\n  }\n}\nfunction daDoUpdateMonitor() {\n  //console.log(\"daDoUpdateMonitor with \" + daAvailableForChat);\n  if (daPhoneNumberOk()) {\n    daPhoneNumber = $(\"#daPhoneNumber\").val();\n    if (daPhoneNumber == \"\") {\n      daPhoneNumber = null;\n    }\n  } else {\n    daPhoneNumber = null;\n  }\n  daSocket.emit(\"updatemonitor\", {\n    available_for_chat: daAvailableForChat,\n    phone_number: daPhoneNumber,\n    subscribed_roles: daSubscribedRoles,\n    phone_partners_to_add: daNewPhonePartners,\n    phone_partners_to_terminate: daTermPhonePartners,\n  });\n}\nfunction daUpdateMonitor() {\n  //console.log(\"daUpdateMonitor with \" + daAvailableForChat);\n  if (daUpdateMonitorInterval != null) {\n    clearInterval(daUpdateMonitorInterval);\n  }\n  daDoUpdateMonitor();\n  daUpdateMonitorInterval = setInterval(daDoUpdateMonitor, daCheckinInterval);\n  //console.log(\"daUpdateMonitor\");\n}\nfunction daIsHidden(ref) {\n  if ($(ref).length) {\n    if ($(ref).offset().top + $(ref).height() < $(window).scrollTop() + 32) {\n      return -1;\n    } else if (\n      $(ref).offset().top >\n      $(window).scrollTop() + $(window).height()\n    ) {\n      return 1;\n    } else {\n      return 0;\n    }\n  } else {\n    return 0;\n  }\n}\nfunction daMarkAsUpdated(key) {\n  //console.log(\"daMarkAsUpdated with \" + key);\n  var skey = key.replace(/(:|\\.|\\[|\\]|,|=|\\/)/g, \"\\\\$1\");\n  if (daIsHidden(\"#listelement\" + skey)) {\n    daUpdatedSessions[\"#listelement\" + skey] = 1;\n  }\n}\nfunction daActivateChatArea(key) {\n  //console.log(\"daActivateChatArea with \" + key);\n  var skey = key.replace(/(:|\\.|\\[|\\]|,|=|\\/)/g, \"\\\\$1\");\n  if (\n    !$(\"#chatarea\" + skey)\n      .find(\"input\")\n      .first()\n      .is(\":focus\")\n  ) {\n    $(\"#listelement\" + skey).addClass(\"da-new-message\");\n    if (daBrowserTitle == document.title) {\n      document.title = \"* \" + daBrowserTitle;\n      daFaviconAlert();\n    }\n  }\n  daMarkAsUpdated(key);\n  $(\"#chatarea\" + skey).removeClass(\"dainvisible\");\n  $(\"#chatarea\" + skey)\n    .find(\"input, button\")\n    .prop(\"disabled\", false);\n  $(\"#chatarea\" + skey)\n    .find(\"ul\")\n    .html(\"\");\n  daSocket.emit(\"chat_log\", { key: key });\n}\nfunction daDeActivateChatArea(key) {\n  //console.log(\"daActivateChatArea with \" + key);\n  var skey = key.replace(/(:|\\.|\\[|\\]|,|=|\\/)/g, \"\\\\$1\");\n  $(\"#chatarea\" + skey)\n    .find(\"input, button\")\n    .prop(\"disabled\", true);\n  $(\"#listelement\" + skey).removeClass(\"da-new-message\");\n  if (document.title != daBrowserTitle) {\n    document.title = daBrowserTitle;\n    daFaviconRegular();\n  }\n}\nfunction daUndrawSession(key) {\n  //console.log(\"Undrawing...\");\n  var skey = key.replace(/(:|\\.|\\[|\\]|,|=|\\/)/g, \"\\\\$1\");\n  var xButton = document.createElement(\"a\");\n  var xButtonIcon = document.createElement(\"i\");\n  $(xButton).addClass(\"dacorner-remove\");\n  $(xButtonIcon).addClass(\"fa-solid fa-times-circle\");\n  $(xButtonIcon).appendTo($(xButton));\n  $(\"#listelement\" + skey).addClass(\"list-group-item-danger\");\n  $(\"#session\" + skey)\n    .find(\"a\")\n    .remove();\n  $(\"#session\" + skey)\n    .find(\"span\")\n    .first()\n    .html(daOfflineWord);\n  $(\"#session\" + skey)\n    .find(\"span\")\n    .first()\n    .removeClass(daButtonStyle + \"info\");\n  $(\"#session\" + skey)\n    .find(\"span\")\n    .first()\n    .addClass(daButtonStyle + \"danger\");\n  $(xButton).click(function () {\n    $(\"#listelement\" + skey).slideUp(300, function () {\n      $(\"#listelement\" + skey).remove();\n      daCheckIfEmpty();\n    });\n  });\n  $(xButton).appendTo($(\"#session\" + skey));\n  $(\"#chatarea\" + skey)\n    .find(\"input, button\")\n    .prop(\"disabled\", true);\n  var theIframe = $(\"#iframe\" + skey).find(\"iframe\")[0];\n  if (theIframe) {\n    $(theIframe).contents().find(\"body\").addClass(\"dainactive\");\n    if (theIframe.contentWindow && theIframe.contentWindow.daTurnOffControl) {\n      theIframe.contentWindow.daTurnOffControl();\n    }\n  }\n  if (daControlling.hasOwnProperty(key)) {\n    delete daControlling[key];\n  }\n  delete daSessions[key];\n}\nfunction daPublishChatLog(uid, yaml_filename, userid, mode, messages, scroll) {\n  //console.log(\"daPublishChatLog with \" + uid + \" \" + yaml_filename + \" \" + userid + \" \" + mode + \" \" + messages);\n  //console.log(\"daPublishChatLog: scroll is \" + scroll);\n  var keys;\n  //if (mode == 'peer' || mode == 'peerhelp'){\n  //    keys = daAllSessions(uid, yaml_filename);\n  //}\n  //else{\n  keys = [\n    \"da:session:uid:\" + uid + \":i:\" + yaml_filename + \":userid:\" + userid,\n  ];\n  //}\n  for (var i = 0; i < keys.length; ++i) {\n    key = keys[i];\n    var skey = key.replace(/(:|\\.|\\[|\\]|,|=|\\/)/g, \"\\\\$1\");\n    var chatArea = $(\"#chatarea\" + skey)\n      .find(\"ul\")\n      .first();\n    if (messages.length > 0) {\n      $(chatArea).removeClass(\"dainvisible\");\n    }\n    for (var i = 0; i < messages.length; ++i) {\n      var message = messages[i];\n      var newLi = document.createElement(\"li\");\n      $(newLi).addClass(\"list-group-item\");\n      if (message.is_self) {\n        $(newLi).addClass(\"list-group-item-primary dalistright\");\n      } else {\n        $(newLi).addClass(\"list-group-item-secondary dalistleft\");\n      }\n      $(newLi).html(message.message);\n      $(newLi).appendTo(chatArea);\n    }\n    if (messages.length > 0 && scroll) {\n      daScrollChatFast(\"#chatarea\" + skey);\n    }\n  }\n}\nfunction daCheckIfEmpty() {\n  if ($(\"#monitorsessions\").find(\"li\").length > 0) {\n    $(\"#emptylist\").addClass(\"dainvisible\");\n  } else {\n    $(\"#emptylist\").removeClass(\"dainvisible\");\n  }\n}\nfunction daDrawSession(key, obj) {\n  //console.log(\"daDrawSession with \" + key);\n  var skey = key.replace(/(:|\\.|\\[|\\]|,|=|\\/)/g, \"\\\\$1\");\n  var the_html;\n  var wants_to_chat;\n  if (obj.chatstatus != \"off\") {\n    wants_to_chat = true;\n  }\n  if (wants_to_chat) {\n    the_html = obj.browser_title + \" &mdash; \";\n    if (obj.hasOwnProperty(\"first_name\")) {\n      the_html += obj.first_name + \" \" + obj.last_name;\n    } else {\n      the_html += daAnonymousVisitor + \" \" + obj.temp_user_id;\n    }\n  }\n  var theListElement;\n  var sessionDiv;\n  var theIframeContainer;\n  var theChatArea;\n  if ($(\"#session\" + skey).length && !(key in daSessions)) {\n    $(\"#listelement\" + skey).removeClass(\"list-group-item-danger\");\n    $(\"#iframe\" + skey)\n      .find(\"iframe\")\n      .first()\n      .contents()\n      .find(\"body\")\n      .removeClass(\"dainactive\");\n  }\n  daSessions[key] = 1;\n  if ($(\"#session\" + skey).length) {\n    theListElement = $(\"#listelement\" + skey).first();\n    sessionDiv = $(\"#session\" + skey).first();\n    //controlDiv = $(\"#control\" + skey).first();\n    theIframeContainer = $(\"#iframe\" + skey).first();\n    theChatArea = $(\"#chatarea\" + skey).first();\n    $(sessionDiv).empty();\n    if (\n      obj.chatstatus == \"on\" &&\n      key in daChatPartners &&\n      $(\"#chatarea\" + skey)\n        .find(\"button\")\n        .first()\n        .prop(\"disabled\") == true\n    ) {\n      daActivateChatArea(key);\n    }\n  } else {\n    var theListElement = document.createElement(\"li\");\n    $(theListElement).addClass(\"list-group-item\");\n    $(theListElement).attr(\"id\", \"listelement\" + key);\n    var sessionDiv = document.createElement(\"div\");\n    $(sessionDiv).attr(\"id\", \"session\" + key);\n    $(sessionDiv).addClass(\"da-chat-session\");\n    $(sessionDiv).addClass(\"p-1\");\n    $(sessionDiv).appendTo($(theListElement));\n    $(theListElement).appendTo(\"#monitorsessions\");\n    // controlDiv = document.createElement('div');\n    // $(controlDiv).attr('id', \"control\" + key);\n    // $(controlDiv).addClass(\"dachatcontrol dainvisible da-chat-session\");\n    // $(controlDiv).appendTo($(theListElement));\n    theIframeContainer = document.createElement(\"div\");\n    $(theIframeContainer).addClass(\"daobserver-container dainvisible\");\n    $(theIframeContainer).attr(\"id\", \"iframe\" + key);\n    var theIframe = document.createElement(\"iframe\");\n    $(theIframe).addClass(\"daobserver\");\n    $(theIframe).attr(\"name\", \"iframe\" + key);\n    $(theIframe).appendTo($(theIframeContainer));\n    $(theIframeContainer).appendTo($(theListElement));\n    var theChatArea = document.createElement(\"div\");\n    $(theChatArea).addClass(\"monitor-chat-area dainvisible\");\n    $(theChatArea).html(\n      '<div class=\"row\"><div class=\"col-md-12\"><ul class=\"list-group dachatbox\" id=\"daCorrespondence\"></ul></div></div><form autocomplete=\"off\"><div class=\"row\"><div class=\"col-md-12\"><div class=\"input-group\"><input type=\"text\" class=\"form-control daChatMessage\" disabled=\"\"><button role=\"button\" class=\"btn \" + daButtonStyle + \"secondary daChatButton\" type=\"button\" disabled=\"\">' +\n        daSendWord +\n        \"</button></div></div></div></form>\",\n    );\n    $(theChatArea).attr(\"id\", \"chatarea\" + key);\n    var submitter = function () {\n      //console.log(\"I am the submitter and I am submitting \" + key);\n      var input = $(theChatArea).find(\"input\").first();\n      var message = input.val().trim();\n      if (message == null || message == \"\") {\n        //console.log(\"Message was blank\");\n        return false;\n      }\n      daSocket.emit(\"chatmessage\", { key: key, data: input.val() });\n      input.val(\"\");\n      return false;\n    };\n    $(theChatArea).find(\"button\").click(submitter);\n    $(theChatArea)\n      .find(\"input\")\n      .bind(\"keypress keydown keyup\", function (e) {\n        var theCode = e.which || e.keyCode;\n        if (theCode == 13) {\n          submitter();\n          e.preventDefault();\n        }\n      });\n    $(theChatArea)\n      .find(\"input\")\n      .focus(function () {\n        $(theListElement).removeClass(\"da-new-message\");\n        if (document.title != daBrowserTitle) {\n          document.title = daBrowserTitle;\n          daFaviconRegular();\n        }\n      });\n    $(theChatArea).appendTo($(theListElement));\n    if (obj.chatstatus == \"on\" && key in daChatPartners) {\n      daActivateChatArea(key);\n    }\n  }\n  var theText = document.createElement(\"span\");\n  $(theText).addClass(\"da-chat-title-label\");\n  theText.innerHTML = the_html;\n  var statusLabel = document.createElement(\"span\");\n  $(statusLabel).addClass(\"badge bg-info da-chat-status-label\");\n  $(statusLabel).html(obj.chatstatus == \"observeonly\" ? \"off\" : obj.chatstatus);\n  $(statusLabel).appendTo($(sessionDiv));\n  if (daUsePhone) {\n    var phoneButton = document.createElement(\"a\");\n    var phoneIcon = document.createElement(\"i\");\n    $(phoneIcon).addClass(\"fa-solid fa-phone\");\n    $(phoneIcon).appendTo($(phoneButton));\n    $(phoneButton).addClass(\"btn phone\");\n    $(phoneButton).data(\"name\", \"phone\");\n    if (key in daPhonePartners) {\n      $(phoneButton).addClass(\"phone-on \" + daButtonStyle + \"success\");\n      $(phoneButton).attr(\"title\", daPhoneOnMessage);\n    } else {\n      $(phoneButton).addClass(\"phone-off \" + daButtonStyle + \"secondary\");\n      $(phoneButton).attr(\"title\", daPhoneOffMessage);\n    }\n    $(phoneButton).attr(\"tabindex\", 0);\n    $(phoneButton).addClass(\"daobservebutton\");\n    $(phoneButton).appendTo($(sessionDiv));\n    $(phoneButton).attr(\"href\", \"#\");\n    if (daPhoneNumber == null) {\n      $(phoneButton).addClass(\"dainvisible\");\n    }\n    $(phoneButton).click(function (e) {\n      e.preventDefault();\n      if ($(this).hasClass(\"phone-off\") && daPhoneNumber != null) {\n        $(this).removeClass(\"phone-off\");\n        $(this).removeClass(daButtonStyle + \"secondary\");\n        $(this).addClass(\"phone-on\");\n        $(this).addClass(daButtonStyle + \"success\");\n        $(this).attr(\"title\", daPhoneOnMessage);\n        daPhonePartners[key] = 1;\n        daNewPhonePartners[key] = 1;\n        if (key in daTermPhonePartners) {\n          delete daTermPhonePartners[key];\n        }\n      } else {\n        $(this).removeClass(\"phone-on\");\n        $(this).removeClass(daButtonStyle + \"success\");\n        $(this).addClass(\"phone-off\");\n        $(this).addClass(daButtonStyle + \"secondary\");\n        $(this).attr(\"title\", daPhoneOffMessage);\n        if (key in daPhonePartners) {\n          delete daPhonePartners[key];\n        }\n        if (key in daNewPhonePartners) {\n          delete daNewPhonePartners[key];\n        }\n        daTermPhonePartners[key] = 1;\n      }\n      daUpdateMonitor();\n      return false;\n    });\n  }\n  var unblockButton = document.createElement(\"a\");\n  $(unblockButton).addClass(\"btn \" + daButtonStyle + \"info daobservebutton\");\n  $(unblockButton).data(\"name\", \"unblock\");\n  if (!obj.blocked) {\n    $(unblockButton).addClass(\"dainvisible\");\n  }\n  $(unblockButton).html(daUnblockWord);\n  $(unblockButton).attr(\"href\", \"#\");\n  $(unblockButton).appendTo($(sessionDiv));\n  var blockButton = document.createElement(\"a\");\n  $(blockButton).addClass(\"btn \" + daButtonStyle + \"danger daobservebutton\");\n  if (obj.blocked) {\n    $(blockButton).addClass(\"dainvisible\");\n  }\n  $(blockButton).html(daBlockWord);\n  $(blockButton).attr(\"href\", \"#\");\n  $(blockButton).data(\"name\", \"block\");\n  $(blockButton).appendTo($(sessionDiv));\n  $(blockButton).click(function (e) {\n    $(unblockButton).removeClass(\"dainvisible\");\n    $(this).addClass(\"dainvisible\");\n    daDeActivateChatArea(key);\n    daSocket.emit(\"block\", { key: key });\n    e.preventDefault();\n    return false;\n  });\n  $(unblockButton).click(function (e) {\n    $(blockButton).removeClass(\"dainvisible\");\n    $(this).addClass(\"dainvisible\");\n    daSocket.emit(\"unblock\", { key: key });\n    e.preventDefault();\n    return false;\n  });\n  var joinButton = document.createElement(\"a\");\n  $(joinButton).addClass(\"btn \" + daButtonStyle + \"warning daobservebutton\");\n  $(joinButton).html(daJoinWord);\n  $(joinButton).attr(\n    \"href\",\n    daVisitInterviewUrl +\n      \"?\" +\n      $.param({ i: obj.i, uid: obj.uid, userid: obj.userid }),\n  );\n  $(joinButton).data(\"name\", \"join\");\n  $(joinButton).attr(\"target\", \"_blank\");\n  $(joinButton).appendTo($(sessionDiv));\n  if (wants_to_chat) {\n    var openButton = document.createElement(\"a\");\n    $(openButton).addClass(\"btn \" + daButtonStyle + \"primary daobservebutton\");\n    $(openButton).attr(\n      \"href\",\n      daObserverUrl +\n        \"?\" +\n        $.param({ i: obj.i, uid: obj.uid, userid: obj.userid }),\n    );\n    //$(openButton).attr('href', 'about:blank');\n    $(openButton).attr(\"id\", \"observe\" + key);\n    $(openButton).attr(\"target\", \"iframe\" + key);\n    $(openButton).html(daObserveWord);\n    $(openButton).data(\"name\", \"open\");\n    $(openButton).appendTo($(sessionDiv));\n    var stopObservingButton = document.createElement(\"a\");\n    $(stopObservingButton).addClass(\n      \"btn \" + daButtonStyle + \"secondary daobservebutton dainvisible\",\n    );\n    $(stopObservingButton).html(daStopObservingWord);\n    $(stopObservingButton).attr(\"href\", \"#\");\n    $(stopObservingButton).data(\"name\", \"stopObserving\");\n    $(stopObservingButton).appendTo($(sessionDiv));\n    var controlButton = document.createElement(\"a\");\n    $(controlButton).addClass(\"btn \" + daButtonStyle + \"info daobservebutton\");\n    $(controlButton).html(daControlWord);\n    $(controlButton).attr(\"href\", \"#\");\n    $(controlButton).data(\"name\", \"control\");\n    $(controlButton).appendTo($(sessionDiv));\n    var stopControllingButton = document.createElement(\"a\");\n    $(stopControllingButton).addClass(\n      \"btn \" + daButtonStyle + \"secondary daobservebutton dainvisible\",\n    );\n    $(stopControllingButton).html(daStopControllingWord);\n    $(stopControllingButton).attr(\"href\", \"#\");\n    $(stopControllingButton).data(\"name\", \"stopcontrolling\");\n    $(stopControllingButton).appendTo($(sessionDiv));\n    $(controlButton).click(function (event) {\n      event.preventDefault();\n      //console.log(\"Controlling...\");\n      $(this).addClass(\"dainvisible\");\n      $(stopControllingButton).removeClass(\"dainvisible\");\n      $(stopObservingButton).addClass(\"dainvisible\");\n      var theIframe = $(\"#iframe\" + skey).find(\"iframe\")[0];\n      if (theIframe != null && theIframe.contentWindow) {\n        theIframe.contentWindow.daTurnOnControl();\n      } else {\n        console.log(\"Cannot turn on control\");\n      }\n      daControlling[key] = 1;\n      return false;\n    });\n    $(stopControllingButton).click(function (event) {\n      //console.log(\"Got click on stopControllingButton\");\n      event.preventDefault();\n      var theIframe = $(\"#iframe\" + skey).find(\"iframe\")[0];\n      if (\n        theIframe != null &&\n        theIframe.contentWindow &&\n        theIframe.contentWindow.daTurnOffControl\n      ) {\n        theIframe.contentWindow.daTurnOffControl();\n      } else {\n        console.log(\"Cannot turn off control\");\n        return false;\n      }\n      //console.log(\"Stop controlling...\");\n      $(this).addClass(\"dainvisible\");\n      $(controlButton).removeClass(\"dainvisible\");\n      $(stopObservingButton).removeClass(\"dainvisible\");\n      if (daControlling.hasOwnProperty(key)) {\n        delete daControlling[key];\n      }\n      return false;\n    });\n    $(openButton).click(function (event) {\n      //console.log(\"Observing..\");\n      $(this).addClass(\"dainvisible\");\n      $(stopObservingButton).removeClass(\"dainvisible\");\n      $(\"#iframe\" + skey).removeClass(\"dainvisible\");\n      $(controlButton).removeClass(\"dainvisible\");\n      return true;\n    });\n    $(stopObservingButton).click(function (e) {\n      //console.log(\"Unobserving...\");\n      $(this).addClass(\"dainvisible\");\n      $(openButton).removeClass(\"dainvisible\");\n      $(controlButton).addClass(\"dainvisible\");\n      $(stopObservingButton).addClass(\"dainvisible\");\n      $(stopControllingButton).addClass(\"dainvisible\");\n      var theIframe = $(\"#iframe\" + skey).find(\"iframe\")[0];\n      if (daControlling.hasOwnProperty(key)) {\n        delete daControlling[key];\n        if (\n          theIframe != null &&\n          theIframe.contentWindow &&\n          theIframe.contentWindow.daTurnOffControl\n        ) {\n          //console.log(\"Calling daTurnOffControl in iframe\");\n          theIframe.contentWindow.daTurnOffControl();\n        }\n      }\n      if (theIframe != null && theIframe.contentWindow) {\n        //console.log(\"Deleting the iframe\");\n        theIframe.contentWindow.document.open();\n        theIframe.contentWindow.document.write(\"\");\n        theIframe.contentWindow.document.close();\n      }\n      $(\"#iframe\" + skey).slideUp(400, function () {\n        $(this).css(\"display\", \"\").addClass(\"dainvisible\");\n      });\n      e.preventDefault();\n      return false;\n    });\n    if ($(theIframeContainer).hasClass(\"dainvisible\")) {\n      $(openButton).removeClass(\"dainvisible\");\n      $(stopObservingButton).addClass(\"dainvisible\");\n      $(controlButton).addClass(\"dainvisible\");\n      $(stopControllingButton).addClass(\"dainvisible\");\n      if (daControlling.hasOwnProperty(key)) {\n        delete daControlling[key];\n      }\n    } else {\n      $(openButton).addClass(\"dainvisible\");\n      if (daControlling.hasOwnProperty(key)) {\n        $(stopObservingButton).addClass(\"dainvisible\");\n        $(controlButton).addClass(\"dainvisible\");\n        $(stopControllingButton).removeClass(\"dainvisible\");\n      } else {\n        $(stopObservingButton).removeClass(\"dainvisible\");\n        $(controlButton).removeClass(\"dainvisible\");\n        $(stopControllingButton).addClass(\"dainvisible\");\n      }\n    }\n  }\n  $(theText).appendTo($(sessionDiv));\n  if (\n    obj.chatstatus == \"on\" &&\n    key in daChatPartners &&\n    $(\"#chatarea\" + skey).hasClass(\"dainvisible\")\n  ) {\n    daActivateChatArea(key);\n  }\n  if (\n    (obj.chatstatus != \"on\" || !(key in daChatPartners)) &&\n    $(\"#chatarea\" + skey)\n      .find(\"button\")\n      .first()\n      .prop(\"disabled\") == false\n  ) {\n    daDeActivateChatArea(key);\n  } else if (obj.blocked) {\n    daDeActivateChatArea(key);\n  }\n}\nfunction daOnScrollResize() {\n  if (document.title != daBrowserTitle) {\n    document.title = daBrowserTitle;\n    daFaviconRegular();\n  }\n  if (!daShowingNotif) {\n    return true;\n  }\n  var obj = Array();\n  for (var key in daUpdatedSessions) {\n    if (daUpdatedSessions.hasOwnProperty(key)) {\n      obj.push(key);\n    }\n  }\n  var somethingAbove = false;\n  var somethingBelow = false;\n  var firstElement = -1;\n  var lastElement = -1;\n  for (var i = 0; i < obj.length; ++i) {\n    var result = daIsHidden(obj[i]);\n    if (result == 0) {\n      delete daUpdatedSessions[obj[i]];\n    } else if (result < 0) {\n      var top = $(obj[i]).offset().top;\n      somethingAbove = true;\n      if (firstElement == -1 || top < firstElement) {\n        firstElement = top;\n      }\n    } else if (result > 0) {\n      var top = $(obj[i]).offset().top;\n      somethingBelow = true;\n      if (lastElement == -1 || top > lastElement) {\n        lastElement = top;\n      }\n    }\n  }\n  if ($(\"#chat-message-above\").is(\":visible\") && !somethingAbove) {\n    $(\"#chat-message-above\").hide();\n  }\n  if ($(\"#chat-message-below\").is(\":visible\") && !somethingBelow) {\n    $(\"#chat-message-below\").hide();\n  }\n  if (!(somethingAbove || somethingBelow)) {\n    daShowingNotif = false;\n  }\n  return true;\n}\nfunction daReadyFunction() {\n  //console.log(\"document ready\");\n  try {\n    window.AudioContext = window.AudioContext || window.webkitAudioContext;\n    daAudioContext = new AudioContext();\n  } catch (e) {\n    console.log(\"Web Audio API is not supported in this browser\");\n  }\n  daLoadSoundBuffer(\n    \"newmessage\",\n    daNotificationClickOnMp3,\n    daNotificationClickOnOgg,\n  );\n  daLoadSoundBuffer(\n    \"newconversation\",\n    daNotificationStaplerMp3,\n    daNotificationStaplerOgg,\n  );\n  daLoadSoundBuffer(\"signinout\", daNotificationSnapMp3, daNotificationSnapOgg);\n  if (location.protocol === \"http:\" || document.location.protocol === \"http:\") {\n    daSocket = io.connect(\"http://\" + document.domain + \"/monitor\", {\n      path: daRootUrl + \"ws/socket.io\",\n    });\n  }\n  if (\n    location.protocol === \"https:\" ||\n    document.location.protocol === \"https:\"\n  ) {\n    daSocket = io.connect(\"https://\" + document.domain + \"/monitor\", {\n      path: daRootUrl + \"ws/socket.io\",\n    });\n  }\n  //console.log(\"socket is \" + daSocket)\n  if (typeof daSocket !== \"undefined\") {\n    daSocket.on(\"connect\", function () {\n      //console.log(\"Connected!\");\n      daUpdateMonitor();\n    });\n    daSocket.on(\"terminate\", function () {\n      console.log(\"monitor: terminating socket\");\n      daSocket.disconnect();\n    });\n    daSocket.on(\"disconnect\", function () {\n      //console.log(\"monitor: disconnected socket\");\n      //daSocket = null;\n    });\n    daSocket.on(\"refreshsessions\", function (data) {\n      daUpdateMonitor();\n    });\n    // daSocket.on('abortcontroller', function(data) {\n    //     console.log(\"Got abortcontroller message for \" + data.key);\n    // });\n    daSocket.on(\"chatready\", function (data) {\n      var key =\n        \"da:session:uid:\" +\n        data.uid +\n        \":i:\" +\n        data.i +\n        \":userid:\" +\n        data.userid;\n      //console.log('chatready: ' + key);\n      daActivateChatArea(key);\n      daNotifyOperator(key, \"chatready\", daNewChatConnection + \" \" + data.name);\n    });\n    daSocket.on(\"chatstop\", function (data) {\n      var key =\n        \"da:session:uid:\" +\n        data.uid +\n        \":i:\" +\n        data.i +\n        \":userid:\" +\n        data.userid;\n      //console.log('chatstop: ' + key);\n      if (key in daChatPartners) {\n        delete daChatPartners[key];\n      }\n      daDeActivateChatArea(key);\n    });\n    daSocket.on(\"chat_log\", function (arg) {\n      //console.log('chat_log: ' + arg.userid);\n      daPublishChatLog(\n        arg.uid,\n        arg.i,\n        arg.userid,\n        arg.mode,\n        arg.data,\n        arg.scroll,\n      );\n    });\n    daSocket.on(\"block\", function (arg) {\n      //console.log(\"back from blocking \" + arg.key);\n      daUpdateMonitor();\n    });\n    daSocket.on(\"unblock\", function (arg) {\n      //console.log(\"back from unblocking \" + arg.key);\n      daUpdateMonitor();\n    });\n    daSocket.on(\"chatmessage\", function (data) {\n      //console.log(\"chatmessage\");\n      var keys;\n      if (data.data.mode == \"peer\" || data.data.mode == \"peerhelp\") {\n        keys = daAllSessions(data.uid, data.i);\n      } else {\n        keys = [\n          \"da:session:uid:\" +\n            data.uid +\n            \":i:\" +\n            data.i +\n            \":userid:\" +\n            data.userid,\n        ];\n      }\n      for (var i = 0; i < keys.length; ++i) {\n        key = keys[i];\n        var skey = key.replace(/(:|\\.|\\[|\\]|,|=|\\/)/g, \"\\\\$1\");\n        //console.log(\"Received chat message for #chatarea\" + skey);\n        var chatArea = $(\"#chatarea\" + skey)\n          .find(\"ul\")\n          .first();\n        var newLi = document.createElement(\"li\");\n        $(newLi).addClass(\"list-group-item\");\n        if (data.data.is_self) {\n          $(newLi).addClass(\"list-group-item-primary dalistright\");\n        } else {\n          $(newLi).addClass(\"list-group-item-secondary dalistleft\");\n        }\n        $(newLi).html(data.data.message);\n        $(newLi).appendTo(chatArea);\n        daScrollChat(\"#chatarea\" + skey);\n        if (data.data.is_self) {\n          $(\"#listelement\" + skey).removeClass(\"da-new-message\");\n          if (document.title != daBrowserTitle) {\n            document.title = daBrowserTitle;\n            daFaviconRegular();\n          }\n        } else {\n          if (\n            !$(\"#chatarea\" + skey)\n              .find(\"input\")\n              .first()\n              .is(\":focus\")\n          ) {\n            $(\"#listelement\" + skey).addClass(\"da-new-message\");\n            if (daBrowserTitle == document.title) {\n              document.title = \"* \" + daBrowserTitle;\n              daFaviconAlert();\n            }\n          }\n          if (data.data.hasOwnProperty(\"temp_user_id\")) {\n            daNotifyOperator(\n              key,\n              \"chat\",\n              daAnonymousVisitor +\n                \" \" +\n                data.data.temp_user_id +\n                \": \" +\n                data.data.message,\n            );\n          } else {\n            if (data.data.first_name && data.data.first_name != \"\") {\n              daNotifyOperator(\n                key,\n                \"chat\",\n                data.data.first_name +\n                  \" \" +\n                  data.data.last_name +\n                  \": \" +\n                  data.data.message,\n              );\n            } else {\n              daNotifyOperator(\n                key,\n                \"chat\",\n                data.data.email + \": \" + data.data.message,\n              );\n            }\n          }\n        }\n      }\n    });\n    daSocket.on(\"sessionupdate\", function (data) {\n      //console.log(\"Got session update: \" + data.session.chatstatus);\n      daDrawSession(data.key, data.session);\n      daCheckIfEmpty();\n    });\n    daSocket.on(\"updatemonitor\", function (data) {\n      //console.log(\"Got update monitor response\");\n      //console.log(\"updatemonitor: chat partners are: \" + data.chatPartners);\n      daChatPartners = data.chatPartners;\n      daNewPhonePartners = Object();\n      daTermPhonePartners = Object();\n      daPhonePartners = data.phonePartners;\n      var newSubscribedRoles = Object();\n      for (var key in data.subscribedRoles) {\n        if (data.subscribedRoles.hasOwnProperty(key)) {\n          newSubscribedRoles[key] = 1;\n        }\n      }\n      for (var i = 0; i < data.availRoles.length; ++i) {\n        var key = data.availRoles[i];\n        var skey = key.replace(/(:|\\.|\\[|\\]|,|=|\\/| )/g, \"\\\\$1\");\n        if ($(\"#role\" + skey).length == 0) {\n          var div = document.createElement(\"div\");\n          $(div).addClass(\"form-check form-check-inline\");\n          var label = document.createElement(\"label\");\n          $(label).addClass(\"form-check-label\");\n          $(label).attr(\"for\", \"role\" + key);\n          var input = document.createElement(\"input\");\n          $(input).addClass(\"form-check-input\");\n          var text = document.createTextNode(key);\n          $(input).attr(\"type\", \"checkbox\");\n          $(input).attr(\"id\", \"role\" + key);\n          if (key in newSubscribedRoles) {\n            $(input).prop(\"checked\", true);\n          } else {\n            $(input).prop(\"checked\", false);\n          }\n          $(input).val(key);\n          $(text).appendTo($(label));\n          $(input).appendTo($(div));\n          $(label).appendTo($(div));\n          $(div).appendTo($(\"#monitorroles\"));\n          $(input).change(function () {\n            var key = $(this).val();\n            //console.log(\"change to \" + key);\n            if ($(this).is(\":checked\")) {\n              //console.log(\"it is checked\");\n              daSubscribedRoles[key] = 1;\n            } else {\n              //console.log(\"it is not checked\");\n              if (key in daSubscribedRoles) {\n                delete daSubscribedRoles[key];\n              }\n            }\n            daUpdateMonitor();\n          });\n        } else {\n          var input = $(\"#role\" + skey).first();\n          if (key in newSubscribedRoles) {\n            $(input).prop(\"checked\", true);\n          } else {\n            $(input).prop(\"checked\", false);\n          }\n        }\n      }\n      daSubscribedRoles = newSubscribedRoles;\n      newDaSessions = Object();\n      for (var key in data.sessions) {\n        if (data.sessions.hasOwnProperty(key)) {\n          var user_id = key.replace(/^.*:userid:/, \"\");\n          if (true || user_id != daUserid) {\n            var obj = data.sessions[key];\n            newDaSessions[key] = obj;\n            daDrawSession(key, obj);\n          }\n        }\n      }\n      var toDelete = Array();\n      var numSessions = 0;\n      for (var key in daSessions) {\n        if (daSessions.hasOwnProperty(key)) {\n          numSessions++;\n          if (!(key in newDaSessions)) {\n            toDelete.push(key);\n          }\n        }\n      }\n      for (var i = 0; i < toDelete.length; ++i) {\n        var key = toDelete[i];\n        daUndrawSession(key);\n      }\n      if ($(\"#monitorsessions\").find(\"li\").length > 0) {\n        $(\"#emptylist\").addClass(\"dainvisible\");\n      } else {\n        $(\"#emptylist\").removeClass(\"dainvisible\");\n      }\n    });\n  }\n  if (daAvailableForChat) {\n    $(\"#daNotAvailable\").addClass(\"dainvisible\");\n    daCheckNotifications();\n  } else {\n    $(\"#daAvailable\").addClass(\"dainvisible\");\n  }\n  $(\"#daAvailable\").click(function (event) {\n    $(\"#daAvailable\").addClass(\"dainvisible\");\n    $(\"#daNotAvailable\").removeClass(\"dainvisible\");\n    daAvailableForChat = false;\n    //console.log(\"daAvailableForChat: \" + daAvailableForChat);\n    daUpdateMonitor();\n    daPlaySound(\"signinout\");\n  });\n  $(\"#daNotAvailable\").click(function (event) {\n    daCheckNotifications();\n    $(\"#daNotAvailable\").addClass(\"dainvisible\");\n    $(\"#daAvailable\").removeClass(\"dainvisible\");\n    daAvailableForChat = true;\n    //console.log(\"daAvailableForChat: \" + daAvailableForChat);\n    daUpdateMonitor();\n    daPlaySound(\"signinout\");\n  });\n  $(window).bind(\"unload\", function () {\n    if (typeof daSocket !== \"undefined\") {\n      daSocket.emit(\"terminate\");\n    }\n  });\n  if (daUsePhone) {\n    $(\"#daPhoneInfo\").removeClass(\"dainvisible\");\n    $(\"#daPhoneNumber\").val(daPhoneNumber);\n    $(\"#daPhoneNumber\").change(daCheckPhone);\n    $(\"#daPhoneNumber\").bind(\"keypress keydown keyup\", function (e) {\n      var theCode = e.which || e.keyCode;\n      if (theCode == 13) {\n        $(this).blur();\n        e.preventDefault();\n      }\n    });\n  }\n  $(window).on(\"scroll\", daOnScrollResize);\n  $(window).on(\"resize\", daOnScrollResize);\n  $(\".da-chat-notifier\").click(function (e) {\n    //var key = $(this).data('key');\n    var direction = 0;\n    if ($(this).attr(\"id\") == \"chat-message-above\") {\n      direction = -1;\n    } else {\n      direction = 1;\n    }\n    var target = -1;\n    var targetElement = null;\n    for (var key in daUpdatedSessions) {\n      if (daUpdatedSessions.hasOwnProperty(key)) {\n        var top = $(key).offset().top;\n        if (direction == -1) {\n          if (target == -1 || top < target) {\n            target = top;\n            targetElement = key;\n          }\n        } else {\n          if (target == -1 || top > target) {\n            target = top;\n            targetElement = key;\n          }\n        }\n      }\n    }\n    if (target >= 0) {\n      $(\"html, body\").animate({ scrollTop: target - 60 }, 500, function () {\n        $(targetElement).find(\"input\").first().focus();\n      });\n    }\n    e.preventDefault();\n    return false;\n  });\n}\n\n"],"names":["global","factory","exports","module","define","amd","globalThis","self","io","this","_arrayLikeToArray","r","a","length","e","n","Array","_arrayWithoutHoles","isArray","_construct","t","_isNativeReflectConstruct","Reflect","construct","apply","arguments","o","push","p","bind","_setPrototypeOf","prototype","_defineProperties","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","_createForOfIteratorHelper","Symbol","iterator","_unsupportedIterableToArray","F","s","done","value","f","TypeError","u","call","next","return","_extends","assign","hasOwnProperty","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_inheritsLoose","create","constructor","_isNativeFunction","Function","toString","indexOf","Boolean","valueOf","_iterableToArray","from","_nonIterableSpread","_toConsumableArray","_toPrimitive","toPrimitive","i","String","Number","_typeof","slice","name","test","_wrapNativeSuper","Map","has","get","set","Wrapper","PACKET_TYPES","PACKET_TYPES_REVERSE","keys","forEach","ERROR_PACKET","type","data","withNativeBlob$1","Blob","withNativeArrayBuffer$2","ArrayBuffer","isView$1","isView","obj","buffer","encodePacket","_ref","supportsBinary","callback","encodeBlobAsBase64","fileReader","FileReader","onload","content","result","split","readAsDataURL","toArray","Uint8Array","byteOffset","byteLength","TEXT_ENCODER","encodePacketToBinary","packet","arrayBuffer","then","encoded","TextEncoder","encode","chars","lookup$1","charCodeAt","decode$1","decode","base64","bufferLength","len","encoded1","encoded2","encoded3","encoded4","arraybuffer","bytes","withNativeArrayBuffer$1","decodePacket","encodedPacket","binaryType","mapBinary","charAt","decodeBase64Packet","substring","packetType","decoded","SEPARATOR","fromCharCode","encodePayload","packets","encodedPackets","count","join","decodePayload","encodedPayload","decodedPacket","createPacketEncoderStream","TransformStream","transform","controller","payloadLength","header","DataView","setUint8","view","setUint16","_view","setBigUint64","BigInt","enqueue","TEXT_DECODER","totalLength","chunks","reduce","acc","chunk","concatChunks","size","shift","j","createPacketDecoderStream","maxPayload","TextDecoder","state","expectedLength","isBinary","headerArray","getUint16","_headerArray","getUint32","Math","pow","protocol$1","Emitter","mixin","on","addEventListener","event","fn","_callbacks","once","off","removeListener","removeAllListeners","removeEventListener","callbacks","cb","splice","emit","args","emitReserved","listeners","hasListeners","nextTick","isPromiseAvailable","Promise","resolve","setTimeoutFn","globalThisShim","window","defaultBinaryType","createCookieJar","pick","_len","attr","_key","k","NATIVE_SET_TIMEOUT","setTimeout","NATIVE_CLEAR_TIMEOUT","clearTimeout","installTimerFunctions","opts","useNativeTimers","clearTimeoutFn","BASE64_OVERHEAD","utf8Length","ceil","str","c","l","randomString","Date","now","random","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","TransportError","_Error","reason","description","context","_this","Error","Transport","_Emitter","_this2","query","socket","forceBase64","_proto","onError","open","readyState","doOpen","close","doClose","onClose","send","write","onOpen","onData","onPacket","details","pause","onPause","createUri","schema","undefined","_hostname","_port","path","_query","hostname","port","secure","encodedQuery","Polling","_Transport","_polling","_poll","total","doPoll","_this3","_this4","_this5","doWrite","uri","timestampRequests","timestampParam","sid","b64","XMLHttpRequest","err","hasCORS","empty","BaseXHR","_Polling","location","isSSL","protocol","xd","req","request","method","xhrStatus","pollXhr","Request","createRequest","_opts","_method","_uri","_data","_create","_proto2","_a","xdomain","xhr","_xhr","extraHeaders","setDisableHeaderCheck","setRequestHeader","cookieJar","addCookies","withCredentials","requestTimeout","timeout","onreadystatechange","parseCookies","getResponseHeader","status","_onLoad","_onError","document","_index","requestsCount","requests","_cleanup","fromError","abort","responseText","attachEvent","unloadHandler","terminationEvent","hasXHR2","newRequest","responseType","XHR","_BaseXHR","_this6","_proto3","concat","isReactNative","navigator","product","toLowerCase","BaseWS","protocols","headers","ws","createSocket","addEventListeners","onopen","autoUnref","_socket","unref","onclose","closeEvent","onmessage","ev","onerror","_loop","lastPacket","WebSocketCtor","WebSocket","MozWebSocket","WS","_BaseWS","_packet","WT","_transport","WebTransport","transportOptions","closed","ready","createBidirectionalStream","stream","decoderStream","MAX_SAFE_INTEGER","reader","readable","pipeThrough","getReader","encoderStream","pipeTo","_writer","getWriter","read","transports","websocket","webtransport","polling","re","parts","parse","src","b","replace","m","exec","source","host","authority","ipv6uri","pathNames","queryKey","regx","names","$0","$1","$2","withEventListeners","OFFLINE_EVENT_LISTENERS","listener","SocketWithoutUpgrade","writeBuffer","_prevBufferLen","_pingInterval","_pingTimeout","_maxPayload","_pingTimeoutTime","Infinity","parsedUri","_transportsByName","transportName","agent","upgrade","rememberUpgrade","addTrailingSlash","rejectUnauthorized","perMessageDeflate","threshold","closeOnBeforeunload","_beforeunloadEventListener","transport","_offlineEventListener","_onClose","_cookieJar","_open","createTransport","EIO","id","priorWebsocketSuccess","setTransport","_onDrain","_onPacket","flush","onHandshake","JSON","_sendPacket","_resetPingTimeout","code","pingInterval","pingTimeout","_pingTimeoutTimer","delay","upgrading","_getWritablePackets","shouldCheckPayloadSize","payloadSize","_hasPingExpired","hasExpired","msg","options","compress","cleanupAndClose","waitForUpgrade","tryAllTransports","SocketWithUpgrade","_SocketWithoutUpgrade","_this7","_upgrades","_probe","_this8","failed","onTransportOpen","cleanup","freezeTransport","error","onTransportClose","onupgrade","to","_filterUpgrades","upgrades","filteredUpgrades","Socket$1","_SocketWithUpgrade","Socket","map","filter","getDefaultExportFromCjs","x","__esModule","browser","ms","hasRequiredMs","requireMs","h","d","w","y","val","isFinite","fmtLong","fmtShort","stringify","match","parseFloat","msAbs","abs","round","plural","isPlural","setup","env","createDebug","debug","coerce","disable","enable","enabled","humanize","destroy","skips","formatters","selectColor","namespace","hash","colors","prevTime","enableOverride","namespacesCache","enabledCache","curr","diff","prev","unshift","index","format","formatter","formatArgs","logFn","log","useColors","color","extend","namespaces","v","init","delimiter","newDebug","save","RegExp","toNamespace","regexp","stack","message","console","warn","load","common","storage","localstorage","warned","process","__nwjs","userAgent","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","lastC","setItem","removeItem","getItem","DEBUG","localStorage","browserExports","debugModule","debug$3","url","loc","ipv6","href","withNativeArrayBuffer","withNativeBlob","withNativeFile","File","hasBinary","toJSON","deconstructPacket","buffers","packetData","pack","_deconstructPacket","attachments","placeholder","_placeholder","num","newData","_newData","reconstructPacket","_reconstructPacket","isIndexValid","RESERVED_EVENTS$1","PacketType","Encoder","replacer","EVENT","ACK","encodeAsBinary","BINARY_EVENT","BINARY_ACK","nsp","encodeAsString","deconstruction","Decoder","reviver","add","reconstructor","decodeString","isBinaryEvent","BinaryReconstructor","takeBinaryData","start","buf","_start","_start2","_c","payload","tryParse","substr","isPayloadValid","CONNECT","isObject","DISCONNECT","CONNECT_ERROR","finishedReconstruction","reconPack","binData","isNamespaceValid","isInteger","floor","isAckIdValid","isDataValid","isPacketValid","parser","freeze","subDestroy","debug$2","RESERVED_EVENTS","connect","connect_error","disconnect","disconnecting","newListener","connected","recovered","receiveBuffer","sendBuffer","_queue","_queueSeq","ids","acks","flags","auth","_autoConnect","subEvents","subs","onpacket","_readyState","_b","_len2","_key2","retries","fromQueue","_addToQueue","ack","pop","_registerAckCallback","isTransportWritable","engine","isConnected","discardPacket","notifyOutgoingListeners","ackTimeout","timer","_len3","_key3","withError","emitWithAck","_len4","_key4","reject","arg1","arg2","tryCount","pending","hasError","_len5","responseArgs","_key5","_drainQueue","force","_sendConnectPacket","_pid","pid","offset","_lastOffset","_clearAcks","isBuffered","some","sameNamespace","onconnect","onevent","onack","ondisconnect","emitEvent","_anyListeners","_iterator","_step","sent","_len6","_key6","emitBuffered","_compress","_timeout","onAny","prependAny","offAny","listenersAny","onAnyOutgoing","_anyOutgoingListeners","prependAnyOutgoing","offAnyOutgoing","listenersAnyOutgoing","_iterator2","_step2","Backoff","min","max","factor","jitter","attempts","duration","rand","deviation","reset","setMin","setMax","setJitter","debug$1","Manager","nsps","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","encoder","decoder","autoConnect","_reconnection","skipReconnect","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","maybeReconnectOnOpen","_reconnecting","reconnect","openSubDestroy","errorSub","onping","ondata","ondecoded","active","_destroy","_i","_nsps","_close","onreconnect","attempt","cache","lookup","parsed","newConnection","forceNew","multiplex","$","jQuery","noConflict","daReadyFunction","daAudioContext","daSocket","daSoundBuffer","daShowingNotif","daUpdatedSessions","daSessions","daAvailRoles","daChatPartners","daPhonePartners","daNewPhonePartners","daTermPhonePartners","daFirstTime","daUpdateMonitorInterval","daNotificationsEnabled","daControlling","daGotConfirmation","daFaviconRegular","link","querySelector","createElement","rel","daFaviconIcoUrl","getElementsByTagName","appendChild","daFaviconAlert","daChatIcoUrl","daTopMessage","newDiv","addClass","html","css","appendTo","daTargetDiv","slideDown","slideUp","remove","daAbortControlling","daAlreadyControlled","daStopControlling","skey","find","each","click","daOnError","daLoadSoundBuffer","url_a","url_b","pos","decodeAudioData","response","info","daPlaySound","createBufferSource","destination","daCheckNotifications","Notification","permission","requestPermission","daNotifyOperator","mode","top","scrollTop","height","daNewMessageBelow","daNewConversationBelow","daMarkAsUpdated","daNewMessageAbove","daNewConversationAbove","notification","daPhoneNumberOk","phoneNumber","daCheckPhone","the_number","removeClass","daPhoneNumber","daAllSessions","uid","yaml_filename","prefix","output","daScrollChat","chatScroller","first","scrollHeight","animate","daScrollChatFast","daDoUpdateMonitor","available_for_chat","daAvailableForChat","phone_number","subscribed_roles","daSubscribedRoles","phone_partners_to_add","phone_partners_to_terminate","daUpdateMonitor","clearInterval","setInterval","daCheckinInterval","daIsHidden","ref","daActivateChatArea","is","daBrowserTitle","title","prop","daDeActivateChatArea","daUndrawSession","xButton","xButtonIcon","daOfflineWord","daButtonStyle","daCheckIfEmpty","theIframe","contents","contentWindow","daTurnOffControl","daPublishChatLog","userid","messages","scroll","chatArea","newLi","is_self","daDrawSession","the_html","wants_to_chat","chatstatus","browser_title","first_name","last_name","daAnonymousVisitor","temp_user_id","theListElement","sessionDiv","theIframeContainer","theChatArea","daSendWord","submitter","input","trim","theCode","which","keyCode","preventDefault","focus","theText","innerHTML","statusLabel","daUsePhone","phoneButton","phoneIcon","daPhoneOnMessage","daPhoneOffMessage","hasClass","unblockButton","blocked","daUnblockWord","blockButton","daBlockWord","joinButton","daJoinWord","daVisitInterviewUrl","param","openButton","daObserverUrl","daObserveWord","stopObservingButton","daStopObservingWord","controlButton","daControlWord","stopControllingButton","daStopControllingWord","daTurnOnControl","daOnScrollResize","somethingAbove","somethingBelow","firstElement","lastElement","hide","AudioContext","webkitAudioContext","daNotificationClickOnMp3","daNotificationClickOnOgg","daNotificationStaplerMp3","daNotificationStaplerOgg","daNotificationSnapMp3","daNotificationSnapOgg","domain","daRootUrl","daNewChatConnection","arg","email","session","chatPartners","phonePartners","newSubscribedRoles","subscribedRoles","availRoles","div","label","text","createTextNode","change","newDaSessions","sessions","user_id","daUserid","toDelete","numSessions","blur","direction","target","targetElement"],"mappings":"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"}