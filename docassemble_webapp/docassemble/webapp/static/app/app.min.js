if(typeof $=="undefined")var $=jQuery.noConflict(),daCtx,daColor,daTheWidth,daAspectRatio,daTheBorders,daIsEmpty,daAutocomplete;daColor="#000";function daInitializeSignature(){daAspectRatio=.4,daTheBorders=30,daIsEmpty=1,setTimeout(function(){isCanvasSupported()||daPost({da_success:0,da_ajax:1}),daNewCanvas(),$(document).on("touchmove",function(e){window.matchMedia("(max-width: 575px)").matches&&e.preventDefault()})},500),$(window).on("resize",function(){daResizeCanvas()}),$(window).on("orientationchange",function(){daResizeCanvas()}),$(".dasigclear").click(function(e){return e.preventDefault(),daNewCanvas(),!1}),$(".dasigsave").click(function(e){return e.preventDefault(),daIsEmpty&&document.getElementById("da_sig_required").value=="1"?($("#daerrormess").removeClass("dasignotshowing"),setTimeout(function(){$("#daerrormess").addClass("dasignotshowing")},3e3)):($(".dasigclear").attr("disabled",!0),$(".dasigsave").attr("disabled",!0),daSaveCanvas()),!1})}function daResizeCanvas(){setTimeout(function(){var e=$("#dasigcanvas")[0],t=e.getContext("2d"),n=t.getImageData(0,0,e.width,e.height);daNewCanvas(),t=$("#dasigcanvas")[0].getContext("2d"),t.putImageData(n,0,0)},200)}function daSaveCanvas(){var e=document.getElementById("dasigcanvas").toDataURL();daSpinnerTimeout=setTimeout(daShowSpinner,1e3),daPost({da_success:1,da_the_image:e,da_ajax:1})}function daNewCanvas(){var e,n,o,t=$(window).width()-daTheBorders,s=$("#dasigpage").outerWidth(!0);t>s&&(t=s),e=t*daAspectRatio,n=$("#dasigheader").outerHeight(!0)+$("#dasigtoppart").outerHeight(!0)+$("#dasigmidpart").outerHeight(!0)+$("#dasigbottompart").outerHeight(!0),e>$(window).height()-n&&(e=$(window).height()-n),(e>275||e<30)&&(e=275),$("#dasigcontent").height(e),o='<canvas class="form-control" id="dasigcanvas" width="'+t+'px" height="'+e+'px"></canvas>',$("#dasigcontent").html(o),daTheWidth=daThicknessScalingFactor*t/100,daTheWidth<1&&(daTheWidth=1),$("#dasigcanvas").each(function(){daCtx=$(this)[0].getContext("2d"),daCtx.strokeStyle=daColor,daCtx.lineWidth=daTheWidth}),$("#dasigcanvas").drawTouch(),$("#dasigcanvas").drawPointer(),$("#dasigcanvas").drawMouse(),daIsEmpty=1,setTimeout(function(){daJsEmbed?($(daTargetDiv)[0].scrollTo(0,1),daSteps>1&&$(daTargetDiv)[0].scrollIntoView()):window.scrollTo(0,1)},10)}$.fn.drawTouch=function(){var n=function(e){e=e.originalEvent,x=e.changedTouches[0].pageX-$("#dasigcanvas").offset().left,y=e.changedTouches[0].pageY-$("#dasigcanvas").offset().top,daCtx.beginPath(),daCtx.arc(x,y,.5*daTheWidth,0,2*Math.PI),daCtx.fill(),daCtx.beginPath(),daCtx.lineJoin="round",daCtx.moveTo(x,y),daIsEmpty&&($(".dasigsave").prop("disabled",!1),daIsEmpty=0)},e=function(e){e.preventDefault(),e=e.originalEvent,x=e.changedTouches[0].pageX-$("#dasigcanvas").offset().left,y=e.changedTouches[0].pageY-$("#dasigcanvas").offset().top,daCtx.lineTo(x,y),daCtx.stroke(),daIsEmpty&&(daIsEmpty=0)},t=function(t){e(t)},s=function(e){e.preventDefault(),e=e.originalEvent,daCtx.lineJoin="round",x=e.pageX-$("#dasigcanvas").offset().left,y=e.pageY-$("#dasigcanvas").offset().top,daCtx.beginPath(),daCtx.arc(x,y,.5*daTheWidth,0,2*Math.PI),daCtx.fill(),daCtx.moveTo(x,y),daIsEmpty&&(daIsEmpty=0)};$(this).on("click",s),$(this).on("touchend",t),$(this).on("touchcancel",t),$(this).on("touchstart",n),$(this).on("touchmove",e)},$.fn.drawPointer=function(){var t=function(e){e=e.originalEvent,daCtx.beginPath(),daCtx.lineJoin="round",x=e.pageX-$("#dasigcanvas").offset().left,y=e.pageY-$("#dasigcanvas").offset().top,daCtx.moveTo(x,y),daIsEmpty&&(daIsEmpty=0)},e=function(e){e.preventDefault(),e=e.originalEvent,x=e.pageX-$("#dasigcanvas").offset().left,y=e.pageY-$("#dasigcanvas").offset().top,daCtx.lineTo(x,y),daCtx.stroke(),daCtx.beginPath(),daCtx.arc(x,y,.5*daTheWidth,0,2*Math.PI),daCtx.fill(),daCtx.beginPath(),daCtx.moveTo(x,y),daIsEmpty&&(daIsEmpty=0)},n=function(t){e(t)};$(this).on("MSPointerDown",t),$(this).on("MSPointerMove",e),$(this).on("MSPointerUp",n)},$.fn.drawMouse=function(){var e=0,n=function(t){e=1,x=t.pageX-$("#dasigcanvas").offset().left,y=t.pageY-$("#dasigcanvas").offset().top,daCtx.beginPath(),daCtx.arc(x,y,.5*daTheWidth,0,2*Math.PI),daCtx.fill(),daCtx.beginPath(),daCtx.lineJoin="round",daCtx.moveTo(x,y),daIsEmpty&&(daIsEmpty=0)},t=function(t){e&&(x=t.pageX-$("#dasigcanvas").offset().left,y=t.pageY-$("#dasigcanvas").offset().top,daCtx.lineTo(x,y),daCtx.stroke(),daCtx.beginPath(),daCtx.arc(x,y,.5*daTheWidth,0,2*Math.PI),daCtx.fill(),daCtx.beginPath(),daCtx.moveTo(x,y),daIsEmpty&&(daIsEmpty=0))},s=function(n){return t(n),e=0,!0};$(this).on("mousedown",n),$(this).on("mousemove",t),$(window).on("mouseup",s)};function daPost(e){for(t in e)if(e.hasOwnProperty(t)){var t,n=document.getElementById(t);if(n!=null)n.setAttribute("value",e[t]);else{console.log("Key does not exist: "+t);return}}$("#dasigform").submit()}function isCanvasSupported(){var e=document.createElement("canvas");return!!(e.getContext&&e.getContext("2d"))}daAutocomplete=Object();function daInitAutocomplete(e){var t=0;try{google}catch{t=1e3}setTimeout(function(){for(var t,s,n=0;n<e.length;++n)t=e[n][0],s=e[n][1],daAutocomplete[t]=new google.maps.places.Autocomplete(document.getElementById(t),s),google.maps.event.addListener(daAutocomplete[t],"place_changed",daFillInAddressFor(t))},t)}function daFillInAddressFor(e){return function(){daFillInAddress(e)}}function daInitMap(e){var t=0;try{google}catch{t=1e3}setTimeout(function(){maps=[];for(var n,s,o,i=e.length,t=0;t<i;t++){the_map=e[t],s=new google.maps.LatLngBounds,maps[t]=daAddMap(t,the_map.center.latitude,the_map.center.longitude),marker_length=the_map.markers.length,marker_length==1?show_marker=!0:show_marker=!1;for(n=0;n<marker_length;n++)o=daAddMarker(maps[t],the_map.markers[n],show_marker),s.extend(o.getPosition());marker_length>1&&maps[t].map.fitBounds(s)}},t)}function daAddMap(e,t,n){var s=new google.maps.Map(document.getElementById("map"+e),{zoom:11,center:new google.maps.LatLng(t,n),mapTypeId:google.maps.MapTypeId.ROADMAP}),o=new google.maps.InfoWindow;return{map:s,infowindow:o}}function daAddMarker(e,t,n){var s;return t.icon?t.icon.path&&(t.icon.path=google.maps.SymbolPath[t.icon.path]):t.icon=null,s=new google.maps.Marker({position:new google.maps.LatLng(t.latitude,t.longitude),map:e.map,icon:t.icon}),t.info&&google.maps.event.addListener(s,"click",function(t,n){return function(){e.infowindow.setContent(n),e.infowindow.open(e.map,t)}}(s,t.info)),n&&(e.infowindow.setContent(t.info),e.infowindow.open(e.map,s)),s}function daFillInAddress(e){daVarLookupRev[e]?m=daVarLookupRev[e]:m=e;var n,s,o,i,a,r,l,d,u,h,m,f=atob(m).replace(/.[a-zA-Z0-9_]+$/,""),f=f.replace(/[[\]]/g,"."),v=new RegExp("^"+f+"\\.(.*)"),p={locality:"long_name",sublocality:"long_name",administrative_area_level_3:"long_name",administrative_area_level_2:"long_name",administrative_area_level_1:"short_name",country:"short_name",postal_code:"short_name"},c={locality:"city",administrative_area_level_2:"county",administrative_area_level_1:"state",country:"country",postal_code:"zip"},g=["address","city","county","state","zip","neighborhood","sublocality","administrative_area_level_3","postal_code"],t={};$("input, select").each(function(){var e,n,s=$(this).attr("id");if(typeof s!==typeof void 0&&s!==!1)try{e=atob($(this).attr("id")),e.indexOf("_field_")==0&&(e=atob(daVarLookupRev[$(this).attr("id")])),n=v.exec(e),n.length>0&&(t[n[1]]=$(this).attr("id"))}catch{}}),n=daAutocomplete[e].getPlace(),typeof t.address!="undefined"&&document.getElementById(t.address)!=null&&(document.getElementById(t.address).value="");for(d in g)typeof t[d]!="undefined"&&document.getElementById(t[d])!=null&&(document.getElementById(t[d]).value="");a={},r=[];for(o=0;o<n.address_components.length;o++)s=n.address_components[o].types[0],a[s]=n.address_components[o].long_name,s=="street_number"&&(u=n.address_components[o].short_name),s=="route"&&(h=n.address_components[o].long_name),p[s]&&t[c[s]]&&typeof t[c[s]]!="undefined"&&document.getElementById(t[c[s]])!=null?(i=n.address_components[o][p[s]],typeof i!="undefined"&&(document.getElementById(t[c[s]]).value=i,r.push("#"+t[c[s]])),c[s]!=s&&(i=n.address_components[o].long_name,typeof i!="undefined"&&typeof t[s]!="undefined"&&document.getElementById(t[s])!=null&&(document.getElementById(t[s]).value=i,r.push("#"+t[s])))):t[s]&&typeof t[s]!="undefined"&&document.getElementById(t[s])!=null&&(i=n.address_components[o].long_name,typeof i!="undefined"&&(document.getElementById(t[s]).value=i,r.push("#"+t[s])));typeof t.address!="undefined"&&document.getElementById(t.address)!=null&&(l="",typeof u!="undefined"&&(l+=u+" "),typeof h!="undefined"&&(l+=h),document.getElementById(t.address).value=l,r.push("#"+t.address)),typeof t.city!="undefined"&&document.getElementById(t.city)!=null&&(document.getElementById(t.city).value==""&&typeof a.sublocality_level_1!="undefined"&&(document.getElementById(t.city).value=a.sublocality_level_1),document.getElementById(t.city).value==""&&typeof a.neighborhood!="undefined"&&(document.getElementById(t.city).value=a.neighborhood),document.getElementById(t.city).value==""&&typeof a.administrative_area_level_3!="undefined"&&(document.getElementById(t.city).value=a.administrative_area_level_3)),n.adr_address&&typeof t.adr_address!="undefined"&&document.getElementById(t.adr_address)!=null&&(document.getElementById(t.adr_address).value=n.adr_address),n.business_status&&typeof t.business_status!="undefined"&&document.getElementById(t.business_status)!=null&&(document.getElementById(t.business_status).value=n.business_status),n.formatted_address&&typeof t.formatted_address!="undefined"&&document.getElementById(t.formatted_address)!=null&&(document.getElementById(t.formatted_address).value=n.formatted_address),n.formatted_phone_number&&typeof t.formatted_phone_number!="undefined"&&document.getElementById(t.formatted_phone_number)!=null&&(document.getElementById(t.formatted_phone_number).value=n.formatted_phone_number),n.geometry&&n.geometry.location&&(typeof t.latitude!="undefined"&&document.getElementById(t.latitude)!=null&&(document.getElementById(t.latitude).value=n.geometry.location.lat()),typeof t.longitude!="undefined"&&document.getElementById(t.longitude)!=null&&(document.getElementById(t.longitude).value=n.geometry.location.lng())),n.icon&&typeof t.icon!="undefined"&&document.getElementById(t.icon)!=null&&(document.getElementById(t.icon).value=n.icon),n.international_phone_number&&typeof t.international_phone_number!="undefined"&&document.getElementById(t.international_phone_number)!=null&&(document.getElementById(t.international_phone_number).value=n.international_phone_number),n.name&&typeof t.name!="undefined"&&document.getElementById(t.name)!=null&&(document.getElementById(t.name).value=n.name),n.place_id&&typeof t.place_id!="undefined"&&document.getElementById(t.place_id)!=null&&(document.getElementById(t.place_id).value=n.place_id),n.price_level&&typeof t.price_level!="undefined"&&document.getElementById(t.price_level)!=null&&(document.getElementById(t.price_level).value=n.price_level),n.rating&&typeof t.rating!="undefined"&&document.getElementById(t.rating)!=null&&(document.getElementById(t.rating).value=n.rating),n.url&&typeof t.url!="undefined"&&document.getElementById(t.url)!=null&&(document.getElementById(t.url).value=n.url),n.utc_offset_minutes&&typeof t.utc_offset_minutes!="undefined"&&document.getElementById(t.utc_offset_minutes)!=null&&(document.getElementById(t.utc_offset_minutes).value=n.utc_offset_minutes),n.vicinity&&typeof t.vicinity!="undefined"&&document.getElementById(t.vicinity)!=null&&(document.getElementById(t.vicinity).value=n.vicinity),n.website&&typeof t.website!="undefined"&&document.getElementById(t.website)!=null&&(document.getElementById(t.website).value=n.website);for(o=0;o<r.length;o++)$(r[o]).trigger("change")}function daGeolocate(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var t,n={lat:e.coords.latitude,lng:e.coords.longitude},s=new google.maps.Circle({center:n,radius:e.coords.accuracy});for(t in daAutocomplete)daAutocomplete.hasOwnProperty(t)&&daAutocomplete[t].setBounds(s.getBounds())})}function dagoogleapicallback(){}